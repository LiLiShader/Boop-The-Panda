# 3D支付测试按钮设置说明

## 在Cocos Creator中创建测试按钮

### 1. 找到支付表单节点
- 在场景中找到 `PaymentForm` 节点
- 这个节点应该在 `buyView` 或类似的支付界面中

### 2. 创建测试按钮
1. 右键点击 `PaymentForm` 节点
2. 选择 "创建" -> "UI组件" -> "Button"
3. 将新创建的Button节点重命名为 `test3DButton`

### 3. 设置按钮属性
- **节点名称**: `test3DButton`
- **按钮文本**: `3D Test: OFF`
- **位置**: 建议放在支付表单的右上角或底部
- **大小**: 建议宽度120，高度40

### 4. 按钮样式建议
- **背景颜色**: 灰色 (#CCCCCC)
- **文字颜色**: 黑色 (#000000)
- **字体大小**: 14
- **圆角**: 5

### 5. 按钮层级
确保按钮在支付表单的最上层，不会被其他元素遮挡。

## 代码集成

测试按钮创建完成后，代码会自动：
1. 找到名为 `test3DButton` 的节点
2. 绑定点击事件
3. 更新按钮文本显示当前测试状态
4. 保存测试模式状态到本地存储

## 测试流程

1. **开启测试模式**：
   - 点击 "3D Test: OFF" 按钮
   - 按钮文本变为 "3D Test: ON"
   - 显示提示信息 "3D支付测试模式已开启"

2. **进行3D支付测试**：
   - 填写支付表单
   - 点击支付按钮
   - 系统会使用测试商户号 (100204) 和测试密钥 (Dp}MwSfW)
   - 返回3D验证URL

3. **关闭测试模式**：
   - 再次点击按钮
   - 按钮文本变为 "3D Test: OFF"
   - 显示提示信息 "3D支付测试模式已关闭"

## 注意事项

- 测试模式状态会保存到本地存储，下次打开游戏时会自动恢复
- 测试模式下使用专门的测试商户号和密钥
- 正常支付时请确保测试模式已关闭 