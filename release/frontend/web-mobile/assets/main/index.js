System.register("chunks:///_virtual/acrossViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts","./viewNameConst.ts","./app.ts","./eventName.ts"],(function(e){var n,t,o,i,s,c,a,r;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,i=e.find},function(e){s=e.BaseViewCmpt},function(e){c=e.ViewName},function(e){a=e.App},function(e){r=e.EventName}],execute:function(){var u;t._RF.push({},"1c7dd/F2yRMUo1rAeRarwXC","acrossViewCmpt",void 0);var p=o.ccclass;o.property,e("acrossViewCmpt",p("acrossViewCmpt")(u=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.onLoad=function(){e.prototype.onLoad.call(this),this.checkLoginStatus(),a.event.on(r.Game.LoginSuccess,this.onLoginSuccess,this)},o.onDestroy=function(){a.event.off(r.Game.LoginSuccess,this)},o.checkLoginStatus=function(){a.user.isLoggedIn||this.showLoginView()},o.showLoginView=function(){a.view.openView(c.Single.eLoginView)},o.onLoginSuccess=function(){console.log("登录成功，acrossViewCmpt 可刷新数据")},o.loadExtraData=function(){a.view.closeView(c.Single.eLoadingView)},o.onClick_startBtn=function(){a.view.openView(c.Single.eHomeView),i("startBtn",this.node).active=!1,i("Loading",this.node).active=!0},t}(s))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/AdminViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./serverConfig.ts"],(function(e){var t,r,n,i,a,o,s,u,l,c,p,f,d,y,h,m,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,l=e.EditBox,c=e.Button,p=e.Label,f=e.ScrollView,d=e.Prefab,y=e.Node,h=e.instantiate,m=e.Component},function(e){b=e.ServerConfig}],execute:function(){var g,v,I,C,P,L,w,A,x,B,z,N,_,U,V,k,q;s._RF.push({},"b9a82u9PvZPa774JdpW1R0U","AdminViewCmpt",void 0);var D=u.ccclass,O=u.property;e("AdminViewCmpt",(g=D("AdminViewCmpt"),v=O(l),I=O(c),C=O(c),P=O(p),L=O(f),w=O(d),A=O(y),g((z=t((B=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"inputUserId",z,i(t)),n(t,"queryBtn",N,i(t)),n(t,"queryAllBtn",_,i(t)),n(t,"userInfoLabel",U,i(t)),n(t,"scrollView",V,i(t)),n(t,"payOrderItemPrefab",k,i(t)),n(t,"content",q,i(t)),t}r(t,e);var s=t.prototype;return s.onLoad=function(){this.queryBtn.node.on(c.EventType.CLICK,this.onQuery,this),this.queryAllBtn.node.on(c.EventType.CLICK,this.onQueryAll,this)},s.onQuery=function(){var e=a(o().mark((function e(){var t,r,n,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.inputUserId.string.trim()){e.next=5;break}return this.userInfoLabel.string="Please enter User ID",this.clearPayList(),e.abrupt("return");case 5:return e.next=7,fetch(b.getMainServerAPI()+"/users/"+t);case 7:return r=e.sent,e.next=10,r.json();case 10:if((n=e.sent).success){e.next=15;break}return this.userInfoLabel.string="User not found",this.clearPayList(),e.abrupt("return");case 15:return this.userInfoLabel.string="UserID: "+n.data.pid+"\nName: "+n.data.name+"\nCreated: "+n.data.created_at,e.next=18,fetch(b.getMainServerAPI()+"/users/"+t+"/payments");case 18:return i=e.sent,e.next=21,i.json();case 21:a=e.sent,this.updatePayList(a.success?a.data:[]);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.onQueryAll=function(){var e=a(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b.getMainServerAPI()+"/payments");case 2:return t=e.sent,e.next=5,t.json();case 5:if((r=e.sent).success){e.next=10;break}return this.userInfoLabel.string="Query failed",this.clearPayList(),e.abrupt("return");case 10:this.userInfoLabel.string="All payment records:",this.updatePayList(r.data);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.updatePayList=function(e){var t=this;if(this.content.removeAllChildren(),!e||0===e.length){var r=h(this.payOrderItemPrefab);return r.getChildByName("info").getComponent(p).string="No payment records.",void this.content.addChild(r)}e.forEach((function(e){var r=h(t.payOrderItemPrefab);r.getChildByName("info").getComponent(p).string="UserID: "+e.user_id+"  Name: "+e.user_name+"\nOrder No: "+e.order_no+"  Amount: "+e.amount+"  Pay Time: "+e.pay_time,t.content.addChild(r)}))},s.clearPayList=function(){this.content.removeAllChildren();var e=h(this.payOrderItemPrefab);e.getChildByName("info").getComponent(p).string="No payment records.",this.content.addChild(e)},t}(m)).prototype,"inputUserId",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(B.prototype,"queryBtn",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(B.prototype,"queryAllBtn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(B.prototype,"userInfoLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(B.prototype,"scrollView",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(B.prototype,"payOrderItemPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(B.prototype,"content",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=B))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/advertise.ts",["cc","./wxManager.ts"],(function(t){var n,i,o;return{setters:[function(t){n=t.cclegacy,i=t.sys},function(t){o=t.WxMgr}],execute:function(){n._RF.push({},"d7442HqVwxNSb0myN0lLnRZ","advertise",void 0);var e=t("Ads",function(){function t(){this.bannerAdv=null,this.videoAdv=null,this.interstitialAd=null,this.bannerId="",this.videoId="",this.interstitialId="",this.init()}var n=t.prototype;return n.init=function(){if(i.platform==i.Platform.WECHAT_GAME){console.log("--------------init ads-----------------");var t=wx.getSystemInfoSync(),n=wx.createBannerAd({adUnitId:this.bannerId,adIntervals:30,style:{left:(t.windowWidth-300)/2,top:t.windowHeight-80,width:300}});this.bannerAdv=n,n.onResize((function(i){n.style.top=t.windowHeight-n.style.realHeight-1})),n.onError((function(t){console.log(t)}));var o=wx.createRewardedVideoAd({adUnitId:this.videoId});if(o.onError((function(t){console.log(t)})),this.videoAdv=o,wx.createInterstitialAd){var e=wx.createInterstitialAd({adUnitId:this.interstitialId});this.interstitialAd=e}}},n.showBannerAds=function(){i.platform==i.Platform.WECHAT_GAME&&this.bannerAdv.show()},n.hideBannerAds=function(){i.platform==i.Platform.WECHAT_GAME&&this.bannerAdv.hide()},n.showVideoAds=function(){if(i.platform==i.Platform.WECHAT_GAME){var t=this.videoAdv;t.show().catch((function(){t.load().then((function(){return t.show()})).catch((function(t){console.log("激励视频 广告显示失败")}))})),t.onError((function(t){console.log(t)})),t.onClose((function(n){t&&(t.offClose(),(n&&n.isEnded||void 0===n)&&o.addReward())}))}},n.showInterstitialAds=function(){if(i.platform==i.Platform.WECHAT_GAME){var t=this.interstitialAd;t&&t.show().catch((function(t){console.error(t)}))}},t}());t("Advertise",new e);n._RF.pop()}}}));

System.register("chunks:///_virtual/androidPlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./eventName.ts","./app.ts","./logHelper.ts","./nativePlatform.ts"],(function(e){var t,n,i,o,a,s,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e.game},function(e){o=e.EventName},function(e){a=e.App},function(e){s=e.PrintLog},function(e){r=e.Native_Operation,c=e.NativePlatform}],execute:function(){n._RF.push({},"fc9ddBLSIlLL5G8Fs2Z+1Ds","androidPlatform",void 0);e("AndroidPlatform",function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).callback=null,t}t(n,e);var c=n.prototype;return c.getUUid=function(){return this.sendNativeMsg(r.GetUUid)},c.changeOrientation=function(t){if(t!=this.isPortrait){this.isPortrait=t;var n=t?"V":"H";this.sendNativeMsg(r.ChangeOrientation,n),e.prototype.changeOrientation.call(this,t)}},c.savePictureToAlbum=function(e){this.sendNativeMsg(r.SavePicture,e)},c.copyToClipboard=function(e){this.sendNativeMsg(r.CopyToClipboard,e)},c.getClipboardContent=function(e){return this.callback=e,this.sendNativeMsg(r.GetClipboardContent)},c.getPackageName=function(){var e=this;return this.sendNativeMsg(r.GetPackageName),new Promise((function(t){a.event.on(o.Lobby.GETPACKAGENAME,t,e)}))},c.getAppVersion=function(){return this.sendNativeMsg(r.GetAppVersion)},c.checkIsEmulator=function(){return!!this.sendNativeMsg(r.CheckIsEmulator)},c.faceBookLogin=function(){return this.sendNativeMsg(r.FaceBookLogin)},c.faceBookLoginOut=function(){return this.sendNativeMsg(r.FaceBookOut)},c.loginGoogle=function(){return this.sendNativeMsg(r.LoginGoogle)},c.loginOutGoogle=function(){return this.sendNativeMsg(r.LoginOutGoogle)},c.faceBookShare=function(e){return this.sendNativeMsg(r.FaceBookShare,JSON.stringify(e))},c.whatsAppShare=function(e){return this.sendNativeMsg(r.WhatsAppShare)},c.sendNativeMsg=function(e,t){return void 0===t&&(t=""),s(" sendJavaMsg opt = "+e+" , args = "+t),null},c.receiveNativeMsg=function(e,t){switch(s(" receiveNativeMsg opt = "+e+"   data = "+t),e){case r.SavePicture:case r.CopyToClipboard:a.view.showMsgTips(t);break;case r.FaceBookLogin:a.event.emit(o.Login.LOGIN_THIRD_WAY,t),s(t);break;case r.FaceBookOut:s(t);break;case r.LoginGoogle:a.event.emit(o.Login.LOGIN_THIRD_WAY,t);break;case r.LoginOutGoogle:s(t);break;case r.GetClipboardContent:this.callback&&this.callback(t);break;case r.GetPackageName:s(t),a.event.emit(o.Lobby.GETPACKAGENAME,t);break;case r.GetAppVersion:s(t),a.event.emit(o.Lobby.GETAPPVERSION,t);break;case r.CheckIsEmulator:+t||i.end()}},n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/app.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singletonClass.ts","./i18nManager.ts","./eventManager.ts","./viewManager.ts","./audioManager.ts","./subGameManager.ts","./platformManager.ts","./userInfo.ts","./noticeManager.ts","./storageHelper.ts","./timeManager.ts","./gameLogic.ts","./wxManager.ts","./viewNameConst.ts","./randomAdManager.ts","./environment.ts","./dataSyncManager.ts"],(function(n){var t,e,a,i,o,r,c,u,s,g,f,p,l,m,y,M,d,v,h,k,w,I,S;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass,a=n.asyncToGenerator,i=n.regeneratorRuntime},function(n){o=n.cclegacy},function(n){r=n.SingletonClass},function(n){c=n.I18nManager},function(n){u=n.EventManager},function(n){s=n.ViewManager},function(n){g=n.SoundType,f=n.AudioManager},function(n){p=n.SubGameManager},function(n){l=n.PlatformManager},function(n){m=n.UserInfo},function(n){y=n.NoticeManager},function(n){M=n.StorageHelper},function(n){d=n.default},function(n){v=n.GameLogic},function(n){h=n.WxMgr},function(n){k=n.ViewName},function(n){w=n.randomAd},function(n){I=n.EnvironmentConfig},function(n){S=n.DataSyncManager}],execute:function(){o._RF.push({},"4ce7alO+7RBO5WbUuJ1gzr2","app",void 0);var b=function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var r=o.prototype;return r.onInit=function(){var n=a(i().mark((function n(t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:I.autoDetectEnvironment(),A.user.init(),this.audio.init(t),this.view.init(t),this.timer.init(),this.gameLogic.init(),M.initData(),h.init(),w.init(),this.initDataSyncManager();case 10:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),r.initDataSyncManager=function(){setTimeout((function(){try{var n=S.getInstance();window.dataSyncManager=n,console.log("[App] 数据同步管理器初始化成功")}catch(n){console.error("[App] 初始化数据同步管理器失败:",n)}}),1e3)},r.addEvent=function(){},r.backHome=function(n,t){void 0===n&&(n=!1),void 0===t&&(t=2),A.view.openView(k.Single.eHomeView,n,t),A.audio.play("background",g.Music,!0)},r.setBackLobby=function(){this.platform.changeOrientation(!1)},r.evtResizeCallback=function(){},e(o,[{key:"user",get:function(){return m.getInstance(m)}},{key:"platform",get:function(){return l.getInstance(l)}},{key:"subGame",get:function(){return p.getInstance(p)}},{key:"view",get:function(){return s.getInstance(s)}},{key:"event",get:function(){return u.getInstance(u)}},{key:"audio",get:function(){return f.getInstance(f)}},{key:"i18n",get:function(){return c.getInstance(c)}},{key:"notice",get:function(){return y.getInstance(y)}},{key:"timer",get:function(){return d.getInstance(d)}},{key:"gameLogic",get:function(){return v.getInstance(v)}}]),o}(r),A=n("App",b.getInstance(b));window.JsApp=A,o._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./logHelper.ts","./resLoadHelper.ts","./storageHelper.ts","./app.ts","./singletonClass.ts"],(function(t){var i,e,o,n,s,u,a,r,c,l,d,f,p;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass,o=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){s=t.cclegacy,u=t.AudioSource,a=t.js},function(t){r=t.PrintLog},function(t){c=t.ResLoadHelper},function(t){l=t.StorageHelper,d=t.StorageHelperKey},function(t){f=t.App},function(t){p=t.SingletonClass}],execute:function(){s._RF.push({},"eae15ASC5VJp5ccv+3GN6+u","audioManager",void 0);var h=t("SoundType",function(t){return t[t.Music=1]="Music",t[t.Effect=2]="Effect",t}({}));t("AudioManager",function(t){function s(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this)._audioVol=1,i._isHide=!1,i._commonClipCache=a.createMap(),i._bgAudio=void 0,i._effectCtrlAudio=void 0,i}i(s,t);var p=s.prototype;return p.onInit=function(t){var i=this;this._audioVol=l.getData(d.Audio_Volume,1),this._isHide=!this._audioVol,this._bgAudio=t.getComponent(u)||t.addComponent(u),this._bgAudio.volume=this._audioVol,this._effectCtrlAudio=t.addComponent(u),f.event.on("hide",(function(){i._isHide=!0,i._bgAudio.stop()}),this),f.event.on("show",(function(){i._isHide=!1,i._audioVol>0&&i._bgAudio.play()}),this)},p.onDestroy=function(){this._bgAudio.destroy(),delete this._bgAudio,this._effectCtrlAudio.destroy(),delete this._effectCtrlAudio},p.keepPlay=function(){this._bgAudio&&this._audioVol>0&&!this._bgAudio.playing&&this._bgAudio.play()},p.play=function(){var t=o(n().mark((function t(i,e,o,s){var u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=h.Effect),void 0===o&&(o=!1),void 0===s&&(s=!1),u=this._commonClipCache[i]){t.next=9;break}return t.next=7,c.loadCommonAudioClip(i);case 7:u=t.sent,this._commonClipCache[i]=u;case 9:if(u){t.next=11;break}return t.abrupt("return");case 11:this.playClip(i,e,u,o,s);case 12:case"end":return t.stop()}}),t,this)})));return function(i,e,o,n){return t.apply(this,arguments)}}(),p.playClip=function(t,i,e,o,n){o&&(this._bgAudio.stop(),this._bgAudio.clip=e,this._bgAudio.loop=!0);var s=l.getBooleanData(d.Music_Status);if(i!=h.Music||s){var u=l.getBooleanData(d.Music_Eff_Status);(i!=h.Effect||u)&&(r("  播放声音 = "+t),o?this._bgAudio.play():(this._effectCtrlAudio.clip=e,this._effectCtrlAudio.loop=!1,this._effectCtrlAudio.play()))}},p.setMusicOpen=function(t){var i=t?1:0;this.setVolume(i)},p.resumeMusic=function(){this.setMusicOpen(!0),this._bgAudio.play()},p.stopMusic=function(){this.setMusicOpen(!1),this._bgAudio.stop(),this.stopEffect()},p.stopEffect=function(){this._effectCtrlAudio.stop()},p.setVolume=function(t){this._bgAudio.volume=t,this._audioVol=t,l.setData(d.Audio_Volume,this._audioVol)},e(s,[{key:"isOpen",get:function(){return this._audioVol>0}},{key:"volumes",get:function(){return this._audioVol}}]),s}(p));s._RF.pop()}}}));

System.register("chunks:///_virtual/baseNodeCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./cocosHelper.ts"],(function(t){var e,n,i,o,s,a,r,d,c,h,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,r=t.Button,d=t.Node,c=t.EditBox,h=t.Component},function(t){l=t.CocosHelper}],execute:function(){var p,u,m,C,_;s._RF.push({},"90094idqPxATKI/FUpezPN8","baseNodeCmpt",void 0);var g=a.ccclass,f=a.property;t("BaseNodeCmpt",(p=g("baseNodeCmpt"),u=f({displayName:"是否遍历所有节点"}),p((_=e((C=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,i(e,"isSelectNode",_,o(e)),e.viewList=new Map,e}n(e,t);var s=e.prototype;return s.onLoad=function(){this.isSelectNode&&this.selectChild(this.node),this.addEvent()},s.addEvent=function(){},s.onDestroy=function(){this.node.destroy()},s.getNodeByName=function(t){return this.viewList.get(t)||null},s.selectChild=function(t,e){void 0===e&&(e="");for(var n=[[t,e]];n.length>0;){var i=n.pop(),o=i[0],s=i[1];this.viewList.set(s,o),this._bingButton(o),this._bingEditBox(o);for(var a=o.children,r=a.length-1;r>=0;r--){var d=a[r],c=s?s+"/"+d.name:d.name;n.push([d,c])}}},s._bingButton=function(t){if(t.getComponent(r)){var e=t.getComponent(r);e.transition=r.Transition.SCALE,e.zoomScale=.95,this["onClick_"+t.name+"_Start"]&&l.addButtonLister(t,d.EventType.TOUCH_START,this["onClick_"+t.name+"_Start"].bind(this,t),this,0),this["onClick_"+t.name+"_End"]&&l.addButtonLister(t,d.EventType.TOUCH_END,this["onClick_"+t.name+"_End"].bind(this,t),this,0),this["onClick_"+t.name]&&l.addButtonLister(t,d.EventType.TOUCH_END,this["onClick_"+t.name].bind(this,t),this,0)}},s._bingEditBox=function(t){t.getComponent(c)&&(this["onEditEnd_"+t.name]&&l.addEditBoxLister(t,this["onEditEnd_"+t.name].bind(this,t.getComponent(c)),this,0,"editing-did-ended"),this["onEditChange_"+t.name]&&l.addEditBoxLister(t,this["onEditChange_"+t.name].bind(this,t.getComponent(c)),this,0,"text-changed"))},e}(h)).prototype,"isSelectNode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=C))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/basePlatform.ts",["cc"],(function(e){var t,i,n,o,r,a,s;return{setters:[function(e){t=e.cclegacy,i=e.size,n=e.view,o=e.macro,r=e.ResolutionPolicy,a=e.Node,s=e.Sprite}],execute:function(){t._RF.push({},"f6f55aijF9JTrkMQyE9YogR","basePlatform",void 0);e("BasePlatform",function(){function e(){}var t=e.prototype;return t.changeOrientation=function(e){var t=i(n.getVisibleSize()),a=t.width,s=t.height;if(!(e&&a<s)&&(e||!(a>s))){var c=a>s?a:s,u=a>s?s:a;if(e?(n.setFrameSize(u,c),n.setOrientation(o.ORIENTATION_PORTRAIT)):(n.setFrameSize(c,u),n.setOrientation(o.ORIENTATION_LANDSCAPE)),e){var f=a*(720/1443);n.setDesignResolutionSize(1443,f,r.FIXED_WIDTH)}else{var l=s*(720/1443);n.setDesignResolutionSize(l,1443,r.FIXED_HEIGHT)}}},t.shootBackground=function(e,t,i){var n=new a;n.addComponent(s);return n},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/baseViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enumConst.ts","./app.ts","./cocosHelper.ts"],(function(e){var t,i,n,o,a,s,r,l,c,d,p,u,h,m,f,g,C,y,v,b,S,w,k,E,_,T,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){r=e.cclegacy,l=e._decorator,c=e.Enum,d=e.Widget,p=e.BlockInputEvents,u=e.Node,h=e.Layers,m=e.UITransform,f=e.view,g=e.v3,C=e.tween,y=e.easing,v=e.Sprite,b=e.Color,S=e.Button,w=e.EditBox,k=e.Component},function(e){E=e.WindowType,_=e.WindowOpenType},function(e){T=e.App},function(e){B=e.CocosHelper}],execute:function(){var A,N,z,L,P,x,D,O,M,I,V,H,U,W,F,R,G,j,J;r._RF.push({},"c1d62bgGM9HkauYhtJLePWO","baseViewCmpt",void 0);var Y=l.ccclass,q=l.property;e("BaseViewCmpt",(A=Y("baseViewCmpt"),N=q({displayName:"是否遍历所有节点"}),z=q({type:c(E),displayName:"窗口类型"}),L=q({type:c(_),displayName:"打开类型"}),P=q({displayName:"是否添加全屏Widget"}),x=q({displayName:"是否遮罩"}),D=q({displayName:"点击空白地方是否关闭窗口"}),O=q({displayName:"是否播放打开界面动画,animNode为播放动画的节点"}),M=q({displayName:"是否截屏模糊背景"}),A((H=t((V=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n(t,"isSelectNode",H,o(t)),t.viewList=new Map,n(t,"viewType",U,o(t)),n(t,"viewOpenType",W,o(t)),n(t,"isAddFullWidget",F,o(t)),n(t,"isMask",R,o(t)),n(t,"isTouchSpaceClose",G,o(t)),n(t,"isPlayOpenAnim",j,o(t)),n(t,"isScreeShoot",J,o(t)),t.maskPanel=void 0,t.closeCallBack=void 0,t.extraData=void 0,t.isInGame=!1,t}i(t,e);var r=t.prototype;return r.onLoad=function(){if(this.isSelectNode&&this.selectChild(this.node),this.isPlayOpenAnim&&this.openAnim(),this.addEvents(),this.isAddFullWidget){var e=this.node.addComponent(d);e.isAlignTop=!0,e.top=0,e.isAlignBottom=!0,e.bottom=0,e.isAlignLeft=!0,e.left=0,e.isAlignRight=!0,e.right=0}this.isMask&&this.addMask(),this.isTouchSpaceClose&&this.addSpaceEvent(),this.isScreeShoot&&this.screeShot()},r.loadExtraData=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.extraData=t},r.addEvents=function(){},r.setMaskVis=function(e){this.maskPanel&&(this.maskPanel.active=e)},r.cancelBlockInput=function(){this.maskPanel&&this.maskPanel.getComponent(p)&&this.maskPanel.removeComponent(p)},r.setCloseFunc=function(e){this.closeCallBack=e},r.onClose=function(){this.closeCallBack&&this.closeCallBack.bind(this)(this),this.node&&(this.node.removeFromParent(),console.log("distroy"),console.log(this.node.name),this.node.destroy())},r.addSpaceEvent=function(){var e=this,t=new u;t.layer=h.Enum.UI_2D,t.addComponent(m),t.getComponent(m).setContentSize(f.getVisibleSize()),this.node.addChild(t),t.setSiblingIndex(-1),t.on(u.EventType.TOUCH_END,(function(i){i.target==t&&e.onTouchSpace()}))},r.onTouchSpace=function(){this.onClick_closeBtn()},r.onClick_closeBtn=function(){var e=this.node.viewName;e?T.view.closeView(e):this.onClose()},r.onDestroy=function(){T.event.offAll(this)},r.openAnim=function(e){var t=this.viewList.get("animNode");t&&(t.scale=g(0,0,0),C(t).to(.2,{scale:g(1,1,1)},{easing:y.backOut}).call((function(){e&&e()})).start())},r.screeShot=function(){var e=a(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.addMask=function(){var e=new u;e.layer=h.Enum.UI_2D,e.addComponent(m);var t=e.addComponent(v);t.type=v.Type.SLICED,t.sizeMode=v.SizeMode.CUSTOM,e.getComponent(m).setContentSize(f.getVisibleSize()),t.color=new b(0,0,0,180),this.node.addChild(e),e.setSiblingIndex(-2),this.maskPanel=e,B.updateCommonSpriteSync(e,"popbg/common"),e.addComponent(p)},r.selectChild=function(e,t){void 0===t&&(t="");for(var i=[[e,t]];i.length>0;){var n=i.pop(),o=n[0],a=n[1];this.viewList.set(a,o),this._bingButton(o),this._bingEditBox(o);for(var s=o.children,r=s.length-1;r>=0;r--){var l=s[r],c=a?a+"/"+l.name:l.name;i.push([l,c])}}},r._bingButton=function(e){if(e.getComponent(S)){var t=e.getComponent(S);t.transition=S.Transition.SCALE,t.zoomScale=.95,this["onClick_"+e.name+"_Start"]&&B.addButtonLister(e,u.EventType.TOUCH_START,this["onClick_"+e.name+"_Start"].bind(this,e),this,0),this["onClick_"+e.name+"_End"]&&B.addButtonLister(e,u.EventType.TOUCH_END,this["onClick_"+e.name+"_End"].bind(this,e),this,0),this["onClick_"+e.name]&&B.addButtonLister(e,u.EventType.TOUCH_END,this["onClick_"+e.name].bind(this,e),this,0)}},r._bingEditBox=function(e){e.getComponent(w)&&(this["onEditEnd_"+e.name]&&B.addEditBoxLister(e,this["onEditEnd_"+e.name].bind(this,e.getComponent(w)),this,0,"editing-did-ended"),this["onEditChange_"+e.name]&&B.addEditBoxLister(e,this["onEditChange_"+e.name].bind(this,e.getComponent(w)),this,0,"text-changed"))},t}(k)).prototype,"isSelectNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),U=t(V.prototype,"viewType",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.eView}}),W=t(V.prototype,"viewOpenType",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.eSingle}}),F=t(V.prototype,"isAddFullWidget",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=t(V.prototype,"isMask",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=t(V.prototype,"isTouchSpaceClose",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=t(V.prototype,"isPlayOpenAnim",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),J=t(V.prototype,"isScreeShoot",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=V))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/blockCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,a;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,o=e.UITransform,a=e.Component}],execute:function(){var r;i._RF.push({},"c98559UzNZLtYPXky6aQC8f","blockCmpt",void 0);var h=n.ccclass;n.property,e("blockCmpt",h("blockCmpt")(r=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).h=0,t.v=0,t}t(i,e);var n=i.prototype;return n.initData=function(e,t){this.node.getChildByName("single").children.forEach((function(e){return e.active=!1})),this.node.getChildByName("corner").children.forEach((function(e){return e.active=!1})),this.h=e,this.v=t},n.isInside=function(e){var t=this.node.getComponent(o).width,i=this.node.position;return Math.abs(e.x-i.x)<=t/2&&Math.abs(e.y-i.y)<=t/2},n.handleBorders=function(e,t,i,n){this.node.getChildByName("single").getChildByName("top").active=!e,this.node.getChildByName("single").getChildByName("down").active=!t,this.node.getChildByName("single").getChildByName("left").active=!i,this.node.getChildByName("single").getChildByName("right").active=!n,this.node.getChildByName("corner").getChildByName("left_top").active=!e&&!i,this.node.getChildByName("corner").getChildByName("left_down").active=!t&&!i,this.node.getChildByName("corner").getChildByName("right_top").active=!e&&!n,this.node.getChildByName("corner").getChildByName("right_down").active=!t&&!n},i}(a))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/buyViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dropdown.ts","./baseViewCmpt.ts","./eventName.ts","./app.ts","./payManager.ts","./cocosHelper.ts","./globalFuncHelper.ts","./storageHelper.ts","./toolsHelper.ts","./serverConfig.ts","./paymentModeManager.ts"],(function(t){var e,o,n,a,r,s,i,l,c,u,d,m,h,p,g,D,y,f,v,b,w,P,S;return{setters:[function(t){e=t.inheritsLoose,o=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){a=t.cclegacy,r=t._decorator,s=t.find,i=t.Node,l=t.Button,c=t.Label,u=t.sys,d=t.EditBox},function(t){m=t.Dropdown},function(t){h=t.BaseViewCmpt},function(t){p=t.EventName},function(t){g=t.App},function(t){D=t.PayManager},function(t){y=t.CocosHelper},function(t){f=t.GlobalFuncHelper},function(t){v=t.StorageHelper,b=t.StorageHelperKey},function(t){w=t.ToolsHelper},function(t){P=t.ServerConfig},function(t){S=t.paymentModeManager}],execute:function(){var N;a._RF.push({},"7e044Zeg1JNhbSIwakEy9vq","buyViewCmpt",void 0);var B=r.ccclass;r.property,t("BuyViewCmpt",B("buyViewCmpt")(N=function(t){function a(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).lbGold=null,e.content=null,e.processingDialog=null,e.auth3DDialog=null,e.auth3DFrame=null,e.currentProductId="",e.enable3DTest=!1,e.paymentFormData={email:"",firstName:"",lastName:"",phone:"",address:"",city:"",state:"",country:"",zipCode:"",cardType:"",cardNumber:"",expMonth:"",expYear:"",cvv2:""},e.formNodes={},e.dropdowns={},e.products={itemBtn1:{amount:"8",diamonds:12},itemBtn2:{amount:"20",diamonds:40},itemBtn3:{amount:"40",diamonds:70},itemBtn4:{amount:"80",diamonds:140},itemBtn5:{amount:"100",diamonds:180},itemBtn6:{amount:"8",diamonds:24,isFirstCharge:!0},itemBtn7:{amount:"20",diamonds:80,isFirstCharge:!0},itemBtn8:{amount:"40",diamonds:140,isFirstCharge:!0},itemBtn9:{amount:"80",diamonds:280,isFirstCharge:!0},itemBtn10:{amount:"100",diamonds:360,isFirstCharge:!0},itemBtn11:{amount:"200",diamonds:50,bombBomb:3,bombHor:3,bombVer:5,bombAllSame:2},itemBtn12:{amount:"500",diamonds:200,bombBomb:5,bombHor:5,bombVer:10,bombAllSame:3},itemBtn13:{amount:"1000",bombBomb:10,bombHor:10,bombVer:20,bombAllSame:5},itemBtn14:{amount:"1500",diamonds:1e3,bombBomb:20,bombHor:20,bombAllSame:10}},e.funPay=null,e.currentBillNo="",e.pollingTimer=null,e.pollingAttempts=0,e.MAX_POLLING_ATTEMPTS=60,e.POLLING_INTERVAL=3e3,e}e(a,t);var r=a.prototype;return r.onLoad=function(){for(var e=1;e<15;e++)this["onClick_itemBtn"+e]=this.handleBtnEvent.bind(this);t.prototype.onLoad.call(this),this.lbGold=this.viewList.get("top/lbGold"),this.content=this.viewList.get("s/view/content"),g.event.on(p.Game.UpdataGold,this.evtUpdateGold,this),this.evtUpdateGold(),this.updateItemStatus(),this.initPaymentFormNodes(),this.loadPaymentFormData(),this.init3DPaymentUI(),this.initTest3DButton(),console.log("[BuyView] 支付模式现在从服务器获取，不再加载本地状态")},r.init3DPaymentUI=function(){this.processingDialog=s("ProcessingDialog",this.node),this.processingDialog||(console.warn("未找到处理中对话框节点，将创建"),this.createProcessingDialog()),this.auth3DDialog=s("Auth3DDialog",this.node),this.auth3DDialog||(console.warn("未找到3D验证对话框节点，将创建"),this.createAuth3DDialog()),this.processingDialog&&(this.processingDialog.active=!1),this.auth3DDialog&&(this.auth3DDialog.active=!1)},r.createProcessingDialog=function(){this.processingDialog=new i("ProcessingDialog"),this.node.addChild(this.processingDialog),this.processingDialog.active=!1},r.createAuth3DDialog=function(){this.auth3DDialog=new i("Auth3DDialog"),this.node.addChild(this.auth3DDialog),this.auth3DFrame=new i("IFrame"),this.auth3DDialog.addChild(this.auth3DFrame);var t=new i("CloseButton");this.auth3DDialog.addChild(t),t.addComponent(l).node.on("click",this.closeAuth3DDialog,this),this.auth3DDialog.active=!1},r.initTest3DButton=function(){var t=s("PaymentForm/test3DButton",this.node);if(t){var e=t.getComponent(l);if(e){e.node.on("click",this.toggleTest3DMode,this);var o=t.getChildByName("Label");if(o){var n=o.getComponent(c);n&&(n.string=this.enable3DTest?"3D Test: ON":"3D Test: OFF")}console.log("3D支付测试按钮已初始化")}}else console.warn("未找到3D支付测试按钮，请检查节点名称是否为 test3DButton")},r.toggleTest3DMode=function(){console.warn("[BuyView] toggleTest3DMode已废弃，现在从服务器获取支付模式"),g.view.showMsgTips("支付模式现在由运维后台统一管理"),this.showCurrentPaymentMode()},r.loadTestModeState=function(){console.log("[BuyView] loadTestModeState已废弃，现在从服务器获取支付模式")},r.showCurrentPaymentMode=function(){var t=o(n().mark((function t(){var e,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.getPaymentMode();case 3:e=t.sent,o="3D"===e?"3D支付":"2D支付",g.view.showMsgTips("当前支付模式: "+o),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("[BuyView] 获取支付模式失败:",t.t0),g.view.showMsgTips("获取支付模式失败，使用默认2D模式");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),r.showProcessingDialog=function(){this.processingDialog&&(this.processingDialog.active=!0)},r.hideProcessingDialog=function(){this.processingDialog&&(this.processingDialog.active=!1)},r.showAuth3DDialog=function(t){this.auth3DDialog&&(console.log("【3D支付】显示3D验证对话框，验证URL: "+t),this.auth3DDialog.active=!0,this.currentBillNo?(console.log("【3D支付】使用已设置的订单号: "+this.currentBillNo),console.log("【3D支付】准备开始轮询查询支付结果"),this.startPollingPaymentResult()):console.error("【3D支付错误】没有订单号，无法开始轮询"),console.log("【3D支付】打开3D验证页面: "+t),window.open(t,"_blank"))},r.closeAuth3DDialog=function(){this.auth3DDialog&&(this.auth3DDialog.active=!1)},r.loadPaymentFormData=function(){var t=this,e=u.localStorage.getItem("paymentFormData");if(e)try{var o=JSON.parse(e);Object.assign(this.paymentFormData,o),Object.keys(this.formNodes).forEach((function(e){var o,n=null==(o=t.formNodes[e])?void 0:o.getComponent(d);n&&"string"==typeof t.paymentFormData[e]&&(n.string=t.paymentFormData[e])})),Object.keys(this.dropdowns).forEach((function(e){var o=t.dropdowns[e];if(o&&"string"==typeof t.paymentFormData[e]){var n=o.options.indexOf(t.paymentFormData[e]);n>=0&&o.select(n)}}))}catch(t){console.warn("加载paymentFormData失败",t)}},r.savePaymentFormData=function(){u.localStorage.setItem("paymentFormData",JSON.stringify(this.paymentFormData))},r.initPaymentFormNodes=function(){var t=this;if(["email","firstName","lastName","phone","address","city","state","country","zipCode","cardType","cardNumber","expMonth","expYear","cvv2"].forEach((function(e){var o=s("PaymentForm/"+e,t.node);o&&(t.formNodes[e]=o)})),this.formNodes.country){var e=this.formNodes.country.getComponent(m);e&&(this.dropdowns.country=e)}if(this.formNodes.state){var o=this.formNodes.state.getComponent(m);o&&(this.dropdowns.state=o)}if(this.formNodes.cardType){var n=this.formNodes.cardType.getComponent(m);n&&(this.dropdowns.cardType=n,n.setOptions(["Visa","MasterCard","JCB","AE","Diners","Discover"]))}this.initCountryStateDropdown(),this.initFormAutoSave()},r.initFormAutoSave=function(){var t=this;Object.keys(this.formNodes).forEach((function(e){var o,n=null==(o=t.formNodes[e])?void 0:o.getComponent(d);n&&n.node.on("editing-did-ended",(function(){t.paymentFormData[e]=n.string,t.savePaymentFormData()}),t)})),Object.keys(this.dropdowns).forEach((function(e){var o=t.dropdowns[e];o&&o.node.on("change",(function(){t.paymentFormData[e]=o.getSelectedLabel(),t.savePaymentFormData()}),t)}))},r.initCountryStateDropdown=function(){this.dropdowns.country&&(this.dropdowns.country.setOptions(["United States","Canada","United Kingdom","Australia","Germany","France","Japan","China","India","Brazil","Mexico","Italy","Spain","Russia","South Korea","Singapore","Malaysia","Thailand","Vietnam","Philippines","Indonesia","Turkey","Netherlands","Sweden","Switzerland","Denmark","Finland","Norway","Poland","Greece","Hungary","Czech Republic","New Zealand","South Africa","Argentina","Chile","Colombia","Peru","Egypt","UAE","Saudi Arabia","Israel","Ukraine","Portugal","Belgium","Austria","Ireland","Romania","Slovakia","Croatia","Slovenia","Bulgaria","Estonia","Latvia","Lithuania","Luxembourg","Iceland","Malta","Cyprus","Monaco","Liechtenstein","Andorra","San Marino","Vatican City","Other"]),this.formNodes.country.on("change",this.onCountryChange,this)),this.updateStateFieldVisibility()},r.onCountryChange=function(){var t="";this.dropdowns.country&&(t=this.dropdowns.country.getSelectedLabel()),this.paymentFormData.country=t,this.dropdowns.state&&("United States"===t?this.dropdowns.state.setOptions(m.US_STATES,!0):"Canada"===t?this.dropdowns.state.setOptions(m.CANADA_STATES,!0):this.dropdowns.state.setOptions([],!0)),this.updateStateFieldVisibility()},r.updateStateFieldVisibility=function(){var t=this.paymentFormData.country.trim(),e="United States"===t||"Canada"===t;this.formNodes.state&&(this.formNodes.state.active=e)},r.collectPaymentFormData=function(){var t,e=this,o=!0,n=["email","firstName","lastName","phone","address","city","country","zipCode","cardType","cardNumber","expMonth","expYear","cvv2"],a=(null==(t=this.dropdowns.country)?void 0:t.getSelectedLabel())||"";return("United States"===a||"Canada"===a)&&n.push("state"),n.forEach((function(t){var n="";if("country"===t&&e.dropdowns.country)n=e.dropdowns.country.getSelectedLabel();else if("state"===t&&e.dropdowns.state)n=e.dropdowns.state.getSelectedLabel();else if("cardType"===t&&e.dropdowns.cardType)n=e.dropdowns.cardType.getSelectedLabel();else{var a,r=null==(a=e.formNodes[t])?void 0:a.getComponent(d);r&&(n=r.string.trim())}e.paymentFormData[t]=n,n||(o=!1)})),o},r.evtUpdateGold=function(){var t=f.getGold();y.updateLabelText(this.lbGold,t)},r.updateItemStatus=function(){for(var t=6;t<=10;t++){var e=this.content.getChildByName("itemBtn"+t);if(e){var o=v.getBooleanData(b["FirstChargeItem"+t],!1);w.setNodeGray(e,o)}}},r.noshowPaymentInformation=function(){var t=s("PaymentForm",this.node);t&&(t.active=!1)},r.showPaymentInformation=function(){var t=s("PaymentForm",this.node);t&&(t.active=!0,this.updateAmountLabel())},r.closePaymentInformation=function(){var t=this,e=s("PaymentForm",this.node),o=[];if(["email","firstName","lastName","phone","address","city","zipCode","cardNumber","expMonth","expYear","cvv2"].forEach((function(e){var n,a=null==(n=t.formNodes[e])?void 0:n.getComponent(d);a&&!a.string.trim()&&o.push(e)})),o.length>0){var n={email:"Email",firstName:"First Name",lastName:"Last Name",phone:"Phone",address:"Address",city:"City",zipCode:"Zip Code",cardNumber:"Card Number",expMonth:"Expiration Month",expYear:"Expiration Year",cvv2:"CVV2"},a="Please fill in: "+o.map((function(t){return n[t]||t})).join(", ");g.view.showMsgTips(a)}else e&&(console.log(this.paymentFormData),e.active=!1,this.funPay&&this.funPay())},r.handleBtnEvent=function(){var t=o(n().mark((function t(e){var a=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.currentProductId=e.name,this.showPaymentInformation(),this.funPay=null,this.funPay=o(n().mark((function t(){var o,r,i,l,c,u,d,m;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s("Canvas/view/homeView/Mask")?s("Canvas/view/homeView/Mask").active=!0:s("Canvas/view/gameView/Mask").active=!0,g.audio.play("button_click"),o=e.name,a.currentProductId=o,r=a.products[o],a.updateAmountLabel(),r){t.next=9;break}return console.error("未找到商品配置:",o),t.abrupt("return");case 9:if(!r.isFirstCharge){t.next=16;break}if(i=parseInt(o.replace("itemBtn","")),l=b["FirstChargeItem"+i],!v.getBooleanData(l,!1)){t.next=16;break}return g.view.showMsgTips("The first recharge gift package has been purchased"),t.abrupt("return");case 16:return t.prev=16,a.showProcessingDialog(),t.next=20,a.requestPayment(r.amount,"钻石礼包-"+r.diamonds+"钻石");case 20:c=t.sent,a.hideProcessingDialog(),"P0001"===c.code?(console.log("2D支付成功"),a.handlePaymentSuccess(r,o)):"P0004"===c.code&&c.auth3DUrl?(console.log("需要3D验证，验证URL:",c.auth3DUrl),console.log("支付响应数据:",c.data),g.view.showMsgTips("Redirecting to 3D secure verification..."),(m=(null==(u=c.data)?void 0:u.billNo)||(null==(d=c.data)?void 0:d.orderNo)||"")&&(console.log("【3D支付】从支付响应获取订单号: "+m),a.currentBillNo=m,localStorage.setItem("lastBillNo",m),localStorage.setItem("lastProductId",a.currentProductId)),a.showAuth3DDialog(c.auth3DUrl)):(console.log("支付失败:",c),g.view.showMsgTips("Payment failed: "+c.message)),t.next=30;break;case 25:t.prev=25,t.t0=t.catch(16),a.hideProcessingDialog(),console.error("支付请求失败:",t.t0),g.view.showMsgTips("Payment request failed, please try again later");case 30:s("Canvas/view/homeView/Mask")?s("Canvas/view/homeView/Mask").active=!1:s("Canvas/view/gameView/Mask").active=!1;case 31:case"end":return t.stop()}}),t,null,[[16,25]])})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.handlePaymentSuccess=function(t,e){if(console.log("【支付成功】开始处理商品 "+e+"，商品配置:",JSON.stringify(t)),t.diamonds){var o=f.getGold();f.setGold(t.diamonds);var n=f.getGold();console.log("【支付成功】发放钻石: "+t.diamonds+"，钻石变化: "+o+" -> "+n),g.event.emit(p.Game.UpdataGold)}var a=[];if(t.diamonds&&a.push(t.diamonds+" Diamonds"),t.bombBomb){var r=v.getData(b.BombBomb,0);v.setData(b.BombBomb,r+t.bombBomb),console.log("【支付成功】发放炸弹道具: "+t.bombBomb+"，数量变化: "+r+" -> "+(r+t.bombBomb)),a.push(t.bombBomb+" Bomb Blast")}if(t.bombHor){var s=v.getData(b.BombHor,0);v.setData(b.BombHor,s+t.bombHor),console.log("【支付成功】发放横向炸弹道具: "+t.bombHor+"，数量变化: "+s+" -> "+(s+t.bombHor)),a.push(t.bombHor+" Horizontal Bomb")}if(t.bombVer){var i=v.getData(b.BombVer,0);v.setData(b.BombVer,i+t.bombVer),console.log("【支付成功】发放竖向炸弹道具: "+t.bombVer+"，数量变化: "+i+" -> "+(i+t.bombVer)),a.push(t.bombVer+" Vertical Bomb")}if(t.bombAllSame){var l=v.getData(b.BombAllSame,0);v.setData(b.BombAllSame,l+t.bombAllSame),console.log("【支付成功】发放同类型炸弹道具: "+t.bombAllSame+"，数量变化: "+l+" -> "+(l+t.bombAllSame)),a.push(t.bombAllSame+" Color Bomb")}if(t.isFirstCharge){var c=parseInt(e.replace("itemBtn","")),u=b["FirstChargeItem"+c],d=v.getBooleanData(u,!1);v.setBooleanData(u,!0),console.log("【支付成功】标记首充礼包 "+c+" 已购买，状态变化: "+d+" -> true"),this.updateItemStatus()}console.log("【支付成功】奖励内容: "+a.join(", ")),g.view.showMsgTips("Purchase successful!"),this.forceSyncDataToServer(),this.uploadPaymentRecord(t,e)},r.uploadPaymentRecord=function(t,e){var o=void 0!==g&&g.user&&g.user.currentUser?g.user.currentUser:{pid:"",name:""},n=this.currentBillNo||localStorage.getItem("lastBillNo")||"";if(n){var a={diamonds:t.diamonds||0,bombBomb:t.bombBomb||0,bombHor:t.bombHor||0,bombVer:t.bombVer||0,bombAllSame:t.bombAllSame||0,isFirstCharge:t.isFirstCharge||!1},r={user_id:o.pid||"",user_name:o.name||"",amount:parseFloat(t.amount||"0"),order_no:n,pay_time:this.getCurrentFormattedTime(),raw_response:{code:"P0001",message:"3D支付成功"},product_id:e,product_info:"钻石礼包-"+t.diamonds+"钻石",product_details:a};console.log("【上传支付记录】准备上传数据:",r),fetch(P.getPayProxyAPI()+"/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(t){return t.json()})).then((function(t){t.success?console.log("【上传支付记录】支付记录已上传成功"):console.error("【上传支付记录】支付记录上传失败",t.message)})).catch((function(t){console.error("【上传支付记录】支付记录上传异常",t)}))}else console.warn("【上传支付记录】没有找到订单号，跳过上传")},r.getCurrentFormattedTime=function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,"0")+"-"+t.getDate().toString().padStart(2,"0")+" "+t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")+":"+t.getSeconds().toString().padStart(2,"0")},r.poll3DPaymentResult=function(){var t=o(n().mark((function t(e,a,r){var s,i,l=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=10),void 0===r&&(r=3e3),s=0,i=function(){var t=o(n().mark((function t(){var o,c,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(P.getPayProxyAPI()+"/status/"+e);case 3:return o=t.sent,t.next=6,o.json();case 6:if(!(c=t.sent).success||!c.data){t.next=21;break}if("PAID"!==c.data.status){t.next=16;break}return console.log("3D支付成功:",c.data),l.closeAuth3DDialog(),(u=l.products[l.currentProductId])&&l.handlePaymentSuccess(u,l.currentProductId),t.abrupt("return",!0);case 16:if("FAILED"!==c.data.status){t.next=21;break}return console.log("3D支付失败:",c.data),l.closeAuth3DDialog(),g.view.showMsgTips("Payment failed: "+(c.data.message||"Unknown error")),t.abrupt("return",!0);case 21:if(!(++s>=a)){t.next=25;break}return console.log("轮询超时，停止检查3D支付结果"),t.abrupt("return",!0);case 25:return setTimeout(i,r),t.abrupt("return",!1);case 29:if(t.prev=29,t.t0=t.catch(0),console.error("查询3D支付结果失败:",t.t0),!(++s>=a)){t.next=36;break}return console.log("轮询超时，停止检查3D支付结果"),t.abrupt("return",!0);case 36:return setTimeout(i,r),t.abrupt("return",!1);case 38:case"end":return t.stop()}}),t,null,[[0,29]])})));return function(){return t.apply(this,arguments)}}(),t.abrupt("return",i());case 5:case"end":return t.stop()}}),t)})));return function(e,o,n){return t.apply(this,arguments)}}(),r.return=function(){this.node.active=!1},r.requestPayment=function(){var t=o(n().mark((function t(e,o){var a,r,s,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a={amount:e,currency:{Visa:"1",MasterCard:"2",JCB:"3",AE:"4",Diners:"5",Discover:"6"}[this.paymentFormData.cardType]||"1",productInfo:encodeURIComponent(o),email:this.paymentFormData.email,firstName:this.paymentFormData.firstName,lastName:this.paymentFormData.lastName,phone:this.paymentFormData.phone,address:this.paymentFormData.address,city:this.paymentFormData.city,state:this.paymentFormData.state,country:this.paymentFormData.country,zipCode:this.paymentFormData.zipCode,cardNum:this.paymentFormData.cardNumber,month:this.paymentFormData.expMonth,year:this.paymentFormData.expYear,cvv2:this.paymentFormData.cvv2},r=D.getInstance()){t.next=6;break}throw new Error("PayManager not initialized");case 6:return s=this.enable3DTest?"3D测试模式":"正常支付模式",console.log("当前支付模式: "+s),console.log("发起支付请求，参数:",a),t.next=11,r.requestPay(a);case 11:return i=t.sent,console.log("支付响应 ("+s+"):",i),t.abrupt("return",i);case 16:throw t.prev=16,t.t0=t.catch(0),console.error("支付请求失败:",t.t0),t.t0;case 20:case"end":return t.stop()}}),t,this,[[0,16]])})));return function(e,o){return t.apply(this,arguments)}}(),r.startPollingPaymentResult=function(){var t=this;this.pollingTimer&&(console.log("【3D支付轮询】清除现有轮询定时器"),this.stopPolling()),console.log("【3D支付轮询】开始轮询查询订单 "+this.currentBillNo+" 的支付结果"),this.pollingAttempts=0,console.log("【3D支付轮询】立即执行第一次查询"),this.queryPaymentResult(),console.log("【3D支付轮询】设置轮询间隔: "+this.POLLING_INTERVAL+"ms, 最大尝试次数: "+this.MAX_POLLING_ATTEMPTS),this.pollingTimer=setInterval((function(){t.pollingAttempts++,console.log("【3D支付轮询】执行第 "+(t.pollingAttempts+1)+" 次查询"),t.queryPaymentResult(),t.pollingAttempts>=t.MAX_POLLING_ATTEMPTS&&(console.log("【3D支付轮询】订单 "+t.currentBillNo+" 轮询超时，已停止查询"),t.stopPolling(),g.view.showMsgTips("支付查询超时，如已支付请稍后检查道具"))}),this.POLLING_INTERVAL),console.log("【3D支付轮询】轮询定时器已设置，ID: "+this.pollingTimer)},r.stopPolling=function(){this.pollingTimer?(console.log("【3D支付轮询】停止轮询，清除定时器 ID: "+this.pollingTimer),clearInterval(this.pollingTimer),this.pollingTimer=null):console.log("【3D支付轮询】没有活动的轮询定时器需要清除")},r.queryPaymentResult=function(){var t=o(n().mark((function t(){var e,o,a,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currentBillNo){t.next=3;break}return console.error("【3D支付错误】没有订单号，无法查询支付结果"),t.abrupt("return");case 3:return console.log("【3D支付轮询】正在查询订单 "+this.currentBillNo+" 的支付结果 (第"+(this.pollingAttempts+1)+"次)"),t.prev=4,e=P.getPayProxyAPI()+"/status/"+this.currentBillNo,console.log("【3D支付轮询】查询URL: "+e),console.log("【3D支付轮询】开始发送请求..."),t.next=10,fetch(e);case 10:return o=t.sent,console.log("【3D支付轮询】收到响应状态: "+o.status),t.next=14,o.json();case 14:a=t.sent,console.log("【3D支付轮询】响应数据:",JSON.stringify(a)),a.success&&a.data?(console.log("【3D支付轮询】支付状态: "+a.data.status),"PAID"===a.data.status?(console.log("【3D支付成功】订单 "+this.currentBillNo+" 支付成功"),this.stopPolling(),this.closeAuth3DDialog(),(r=this.products[this.currentProductId])?(console.log("【3D支付成功】处理商品 "+this.currentProductId+"，商品信息:",JSON.stringify(r)),this.handlePaymentSuccess(r,this.currentProductId),console.log("【3D支付成功】商品处理完成: "+this.currentProductId)):(console.error("【3D支付错误】支付成功，但无法找到商品 ID: "+this.currentProductId),g.view.showMsgTips("支付成功，但商品信息有误"))):"FAILED"===a.data.status?(console.log("【3D支付失败】订单 "+this.currentBillNo+" 支付失败"),this.stopPolling(),this.closeAuth3DDialog(),g.view.showMsgTips("支付失败，请重试")):console.log("【3D支付轮询】订单 "+this.currentBillNo+" 处理中，继续轮询")):console.warn("【3D支付轮询】未获取到有效支付状态，result.success: "+a.success),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(4),console.error("【3D支付错误】查询支付结果失败:",t.t0),t.t0 instanceof Error&&console.error("【3D支付错误】错误名称: "+t.t0.name+", 错误信息: "+t.t0.message+", 错误堆栈: "+t.t0.stack);case 23:case"end":return t.stop()}}),t,this,[[4,19]])})));return function(){return t.apply(this,arguments)}}(),r.testQueryPayment=function(){var t=o(n().mark((function t(e){var o,a,r,s,i,l;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("【3D支付测试】开始测试查询订单: "+e),this.currentBillNo=e,t.prev=2,o=P.getPayProxyAPI()+"/status/"+e,console.log("【3D支付测试】查询URL: "+o),t.next=7,fetch(o);case 7:return a=t.sent,console.log("【3D支付测试】响应状态: "+a.status),t.next=11,a.json();case 11:r=t.sent,console.log("【3D支付测试】响应数据:",JSON.stringify(r)),r.success&&r.data?(console.log("【3D支付测试】支付状态: "+r.data.status),"PAID"===r.data.status?(console.log("【3D支付测试】订单支付成功，准备处理商品"),this.stopPolling(),this.closeAuth3DDialog(),this.currentProductId?(s=this.products[this.currentProductId])?(console.log("【3D支付测试】处理商品 "+this.currentProductId),this.handlePaymentSuccess(s,this.currentProductId)):console.error("【3D支付测试】无法找到商品: "+this.currentProductId):(console.warn("【3D支付测试】没有当前商品ID，尝试使用默认商品"),(i=Object.keys(this.products)[0])&&(l=this.products[i],this.handlePaymentSuccess(l,i)))):"FAILED"===r.data.status?(console.log("【3D支付测试】订单支付失败"),g.view.showMsgTips("支付失败，请重试")):console.log("【3D支付测试】订单处理中: "+r.data.status)):console.warn("【3D支付测试】查询失败: "+(r.message||"未知错误")),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.error("【3D支付测试】查询异常:",t.t0);case 19:case"end":return t.stop()}}),t,this,[[2,16]])})));return function(e){return t.apply(this,arguments)}}(),r.onDestroy=function(){this.stopPolling(),t.prototype.onDestroy&&t.prototype.onDestroy.call(this)},r.addQueryButton=function(){if(console.log("【3D支付】点击查询按钮，当前订单号: "+this.currentBillNo),this.currentBillNo)this.testQueryPayment(this.currentBillNo);else{var t=localStorage.getItem("lastBillNo");t?(console.log("【3D支付测试】从本地存储获取订单号: "+t),this.testQueryPayment(t)):g.view.showMsgTips("没有可查询的订单号")}},r.manualTestQuery=function(){var t=o(n().mark((function t(e){var o,a,r,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("【手动测试】开始查询订单: "+e),t.prev=1,o=P.getPayProxyAPI()+"/status/"+e,console.log("【手动测试】查询URL: "+o),t.next=6,fetch(o);case 6:return a=t.sent,console.log("【手动测试】响应状态: "+a.status),t.next=10,a.json();case 10:return r=t.sent,console.log("【手动测试】响应数据:",r),r.success&&r.data&&"PAID"===r.data.status&&(console.log("【手动测试】订单支付成功"),this.currentProductId&&(s=this.products[this.currentProductId])&&this.handlePaymentSuccess(s,this.currentProductId)),t.abrupt("return",r);case 16:return t.prev=16,t.t0=t.catch(1),console.error("【手动测试】查询失败:",t.t0),t.abrupt("return",{success:!1,error:t.t0.message});case 20:case"end":return t.stop()}}),t,this,[[1,16]])})));return function(e){return t.apply(this,arguments)}}(),r.setCurrentBillNo=function(t){console.log("【手动设置】设置当前订单号: "+t),this.currentBillNo=t,localStorage.setItem("lastBillNo",t),console.log("【手动设置】订单号已保存到本地存储")},r.getCurrentBillNo=function(){console.log("【获取订单号】当前订单号: "+this.currentBillNo);var t=localStorage.getItem("lastBillNo");return console.log("【获取订单号】本地存储订单号: "+t),this.currentBillNo||t||""},r.updateAmountLabel=function(){if(this.currentProductId){var t=this.products[this.currentProductId];if(t){var e=s("PaymentForm/amount",this.node);if(e){var o=e.getComponent(c);o?(o.string="Amount: $"+t.amount,console.log("【金额标签】已更新为: Amount: $"+t.amount)):console.warn("金额标签节点没有Label组件")}else console.warn("未找到金额标签节点: PaymentForm/amount")}else console.warn("未找到商品配置: "+this.currentProductId)}else console.warn("没有当前商品ID，无法更新金额标签")},r.payreturn=function(){},r.forceSyncDataToServer=function(){try{window.dataSyncManager?(console.log("【数据同步】开始强制同步数据到服务器"),window.dataSyncManager.forceSyncAllData().then((function(t){t?console.log("【数据同步】数据同步成功"):console.error("【数据同步】数据同步失败")})).catch((function(t){console.error("【数据同步】数据同步异常:",t)}))):(console.warn("【数据同步】数据同步管理器未初始化，尝试手动同步"),this.manualSyncData())}catch(t){console.error("【数据同步】强制同步失败:",t),this.manualSyncData()}},r.manualSyncData=function(){try{var t=void 0!==g&&g.user&&g.user.currentUser;if(!t||!t.id)return void console.warn("【手动同步】用户未登录，跳过同步");var e=f.getGold(),o={userId:t.id,data:[{key:"Gold",value:e.toString(),type:"string"}]};console.log("【手动同步】准备同步数据:",o),fetch(P.getMainServerURL()+"/api/user/sync-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(t){return t.json()})).then((function(t){t.success?console.log("【手动同步】数据同步成功"):console.error("【手动同步】数据同步失败:",t.message)})).catch((function(t){console.error("【手动同步】数据同步异常:",t)}))}catch(t){console.error("【手动同步】手动同步失败:",t)}},a}(h))||N);a._RF.pop()}}}));

System.register("chunks:///_virtual/cameraCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseNodeCmpt.ts","./app.ts","./eventName.ts"],(function(t){var e,o,n,i,r,s,a;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Vec3},function(t){r=t.BaseNodeCmpt},function(t){s=t.App},function(t){a=t.EventName}],execute:function(){var c;o._RF.push({},"a392fnTBrVBKrqfvcG1BR0z","cameraCmpt",void 0);var p=n.ccclass;n.property,t("cameraCmpt",p("cameraCmpt")(c=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).originPos=null,e.offset=5,e}e(o,t);var n=o.prototype;return n.onLoad=function(){t.prototype.onLoad.call(this),s.event.on(a.UI.MoveCarmera,this.evtMoveCarmera,this),this.originPos=this.node.getPosition(),this.scheduleOnce((function(){}),3)},n.evtMoveCarmera=function(t){var e=t*this.offset,o=new i(this.originPos.x,this.originPos.y-e,this.originPos.z);this.node.setPosition(o)},o}(r))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/challengeViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts","./enumConst.ts","./eventName.ts","./levelConfig.ts","./viewNameConst.ts","./app.ts","./cocosHelper.ts","./globalFuncHelper.ts","./gridCmpt.ts"],(function(t){var e,o,n,i,l,a,s,c,r,u,h,m,p,b;return{setters:[function(t){e=t.inheritsLoose,o=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){i=t.cclegacy,l=t._decorator},function(t){a=t.BaseViewCmpt},function(t){s=t.Bomb},function(t){c=t.EventName},function(t){r=t.LevelConfig},function(t){u=t.ViewName},function(t){h=t.App},function(t){m=t.CocosHelper},function(t){p=t.GlobalFuncHelper},function(t){b=t.gridCmpt}],execute:function(){var g;i._RF.push({},"13d65T7UzpMzZ5nLJ97Eq1b","challengeViewCmpt",void 0);var v=l.ccclass;l.property,t("challengeViewCmpt",v("challengeViewCmpt")(g=function(t){function i(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).lv=0,e.lbTool1=null,e.lbTool2=null,e.lbTool3=null,e.tCount1=0,e.tCount2=0,e.tCount3=0,e}e(i,t);var l=i.prototype;return l.onLoad=function(){for(var e=1;e<4;e++)this["onClick_toolBtn"+e]=this.onClickToolBtn.bind(this);t.prototype.onLoad.call(this),this.lbTool1=this.viewList.get("animNode/content/bg/toolBtn1/prompt/lbTool1"),this.lbTool2=this.viewList.get("animNode/content/bg/toolBtn2/prompt/lbTool2"),this.lbTool3=this.viewList.get("animNode/content/bg/toolBtn3/prompt/lbTool3"),this.tCount1=p.getBomb(s.hor),this.tCount2=p.getBomb(s.bomb),this.tCount3=p.getBomb(s.allSame)},l.loadExtraData=function(){var t=o(n().mark((function t(e){var o,i,l,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lv=e,m.updateLabelText(this.viewList.get("animNode/content/lb/title"),e+"Level"),t.next=4,r.getLevelData(e);case 4:o=t.sent,i=this.viewList.get("animNode/content/target"),l=o.mapData[0].m_id,a=o.mapData[0].m_ct,i.children.forEach((function(t,e){if(t.active=e<l.length,e<l.length){t.getComponent(b).setType(l[e]);var o=a[e]+10;a[e]<10&&(o=a[e]+30),t.getComponent(b).setCount(o)}})),m.updateLabelText(this.lbTool3,this.tCount3),m.updateLabelText(this.lbTool2,this.tCount2),m.updateLabelText(this.lbTool1,this.tCount1),this.setAddStatus();case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),l.onClick_playBtn=function(){h.audio.play("button_click"),h.gameLogic.toolsArr=[];for(var t=1;t<4;t++){if(this.viewList.get("animNode/content/bg/toolBtn"+t).getChildByName("s").active)switch(h.gameLogic.toolsArr.push(t+8),t+8){case s.allSame:p.setBomb(s.allSame,-1);break;case s.hor:p.setBomb(s.hor,-1);break;case s.ver:p.setBomb(s.ver,-1);break;case s.bomb:p.setBomb(s.bomb,-1)}}this.onClick_closeBtn(),h.view.openView(u.Single.eGameView,this.lv)},l.onClickToolBtn=function(t){if(h.audio.play("button_click"),this["tCount"+ +t.name.substring(t.name.length-1,t.name.length)]<=0)return h.event.emit(c.Game.GotoShop),void this.onClick_closeBtn();var e=t.getChildByName("s").active;t.getChildByName("s").active=!e,t.getChildByName("s1").active=!e},l.setAddStatus=function(){for(var t=1;t<4;t++){this.viewList.get("animNode/content/bg/toolBtn"+t).getChildByName("add").active=this["tCount"+t]<=0}},i}(a))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/characterCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseNodeCmpt.ts","./enumConst.ts","./eventName.ts","./app.ts"],(function(t){var e,n,o,i,s,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){i=t.BaseNodeCmpt},function(t){s=t.Direction},function(t){c=t.EventName},function(t){r=t.App}],execute:function(){var a;n._RF.push({},"1b014lWZkJL4YLJE2YnUf0C","characterCmpt",void 0);var v=o.ccclass;o.property,t("roleCmpt",v("roleCmpt")(a=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).isMoving=!1,e.direction=s.left,e}e(n,t);var o=n.prototype;return o.onLoad=function(){t.prototype.onLoad.call(this)},o.addEvent=function(){r.event.on(c.Game.Move,this.evtMove,this),r.event.on(c.Game.EndMove,this.evtEndMove,this)},o.evtMove=function(t){this.direction=t,this.isMoving=!0},o.evtEndMove=function(){this.isMoving=!1},o.update=function(t){if(this.isMoving){t*=10;var e=this.node.getPosition();switch(this.direction){case s.left:e.x+=t;break;case s.right:e.x-=t;break;case s.up:e.z+=t;break;case s.down:e.z-=t}this.node.setPosition(e)}},o.onDestroy=function(){t.prototype.onDestroy.call(this),r.event.off(c.Game.Move,this),r.event.off(c.Game.EndMove,this)},n}(i))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/cocosHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app.ts","./logHelper.ts","./resLoadHelper.ts","./toolsHelper.ts"],(function(e){var t,n,r,o,a,i,c,u,p,s,d,f,l,m,v,S,g;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,o=e.Component,a=e.isValid,i=e.Node,c=e.Label,u=e.EditBox,p=e.RichText,s=e.Sprite,d=e.SpriteFrame,f=e.UITransform,l=e.Vec3},function(e){m=e.App},function(e){v=e.PrintError},function(e){S=e.ResLoadHelper},function(e){g=e.ToolsHelper}],execute:function(){r._RF.push({},"76d63wAte9KcKwHTdtTPtdB","cocosHelper",void 0);e("CocosHelper",new(function(){function e(){}var r=e.prototype;return r.addButtonLister=function(e,t,n,r,o){void 0===o&&(o=0);for(var a=arguments.length,i=new Array(a>5?a-5:0),c=5;c<a;c++)i[c-5]=arguments[c];e.off(t),e.on(t,(function(){if(o){var t=e.clickTime||(new Date).getTime(),a=(new Date).getTime(),c=(a-t)/1e3;if(c&&c<o)return;e.attr({clickTime:a})}e.name.indexOf("Audio"),n.call.apply(n,[r,e].concat(i))}))},r.addEditBoxLister=function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o="editing-did-ended");for(var a=arguments.length,i=new Array(a>5?a-5:0),c=5;c<a;c++)i[c-5]=arguments[c];e.off(o),e.on(o,(function(){if(r){var o=e.clickTime||(new Date).getTime(),a=(new Date).getTime(),c=(a-o)/1e3;if(c&&c<r)return;e.attr({clickTime:a})}t.call.apply(t,[n,e].concat(i))}))},r.addEventHandler=function(e,t,n,r){void 0===r&&(r="");var a=new o.EventHandler;return a.target=e,a.component=t,a.handler=n,a.customEventData=r,a},r.updateCommonSpriteSync=function(){var e=t(n().mark((function e(t,r){var o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(t)){e.next=3;break}return v("updateCommonSpriteSync not node = "+r),e.abrupt("return");case 3:if(o=t.getComponent(s)){e.next=7;break}return v("updateCommonSpriteSync not sprite = "+r),e.abrupt("return");case 7:return e.next=9,S.loadCommonAssetSync(r,d);case 9:if(i=e.sent){e.next=13;break}return v("updateCommonSpriteSync not SpriteFrame = "+r),e.abrupt("return");case 13:o.spriteFrame=i;case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.updateLabelText=function(e,t,n){if(void 0===n&&(n=!1),a(e)){var r=e instanceof i?e.getComponent(c):e;if(r){t+="";var o=n?m.i18n.getString(t):t;r.string=o}else v("LabelText not label = "+t)}else v("LabelText not node = "+t)},r.updateEditBoxText=function(e,t,n){if(void 0===n&&(n=!0),a(e)){var r=e instanceof i?e.getComponent(u):e;if(r){var o=n?m.i18n.getString(t):t;r.string=o}else v("LabelText not label = "+t)}else v("LabelText not node = "+t)},r.updateRichText=function(e,t,n){if(void 0===n&&(n=!0),a(e)){var r=e instanceof i?e.getComponent(p):e;if(r){var o=n?m.i18n.getString(t):t;r.string=o}else v("LabelText not label = "+t)}else v("LabelText not node = "+t)},r.updateMoneyLab=function(e,t){var n=g.moneyToThousands(t);this.updateLabelText(e,n,!1)},r.updateSpriteSync=function(){var e=t(n().mark((function e(t,r){var o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(t)){e.next=3;break}return v("updateSpriteSync not node = "+r),e.abrupt("return");case 3:if(o=t.getComponent(s)){e.next=7;break}return v("updateSpriteSync not sprite = "+r),e.abrupt("return");case 7:return e.next=9,S.loadAssetSync(r,d);case 9:if(i=e.sent){e.next=13;break}return v("updateSpriteSync not SpriteFrame = "+r),e.abrupt("return");case 13:o.spriteFrame=i;case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.updateSpriteAsync=function(e,t,n){if(void 0===n&&(n=!1),a(e)){var r=e.getComponent(s);r?S.loadAssetAsync(t,d,(function(t){t&&a(e)&&(r.spriteFrame=t)}),n):v("updateSpriteAsync not sprite = "+t)}else v("updateSpriteAsync not node = "+t)},r.updateUserHeadSpriteAsync=function(){var e=t(n().mark((function e(t,r){var o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(t)){e.next=3;break}return v("updateUserHeadSpriteAsync not node = "+r),e.abrupt("return");case 3:if(t.getComponent(s)){e.next=7;break}return v("updateUserHeadSpriteAsync not sprite = "+r),e.abrupt("return");case 7:return"1",r||(r="1"),o="head/head"+r,e.next=12,S.loadCommonAssetSync(o,d);case 12:i=e.sent,t.getComponent(s).spriteFrame=i;case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.convertToNodeSpaceAR=function(e,t){return t.getComponent(f).convertToNodeSpaceAR(e.parent.getComponent(f).convertToWorldSpaceAR(e.getPosition()))},r.convertToPosSpaceAR=function(e,t,n){return n.getComponent(f).convertToNodeSpaceAR(t.getComponent(f).convertToWorldSpaceAR(new l(e.x,e.y,0)))},r.wordToScree=function(e,t){return e.worldToScreen(t)},e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/dataSyncManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app.ts","./storageHelper.ts","./logHelper.ts","./serverConfig.ts"],(function(t){var e,n,r,s,a,i,c,u,o,y;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime,r=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy},function(t){a=t.App},function(t){i=t.StorageHelper,c=t.StorageHelperKey},function(t){u=t.PrintLog,o=t.PrintError},function(t){y=t.ServerConfig}],execute:function(){s._RF.push({},"cdb95gXg1lNzb36mOmRhx6D","dataSyncManager",void 0);var h=t("SyncStatus",function(t){return t.IDLE="idle",t.SYNCING="syncing",t.SUCCESS="success",t.FAILED="failed",t.OFFLINE="offline",t}({})),f=t("DataSyncManager",function(){function t(){this.syncQueue=[],this.syncStatus=h.IDLE,this.isOnline=!0,this.retryCount=0,this.MAX_RETRY_COUNT=3,this.SYNC_INTERVAL=5e3,this.syncTimer=null,this.lastSyncTime=0,this.init()}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var s=t.prototype;return s.init=function(){this.checkNetworkStatus(),this.startPeriodicSync(),this.setupAppLifecycleListeners()},s.checkNetworkStatus=function(){var t=this;this.isOnline=navigator.onLine,window.addEventListener("online",(function(){t.isOnline=!0,t.onNetworkRestored()})),window.addEventListener("offline",(function(){t.isOnline=!1,t.onNetworkLost()}))},s.onNetworkRestored=function(){u("[DataSync] 网络恢复，开始同步离线数据"),this.syncOfflineData()},s.onNetworkLost=function(){u("[DataSync] 网络断开，切换到离线模式"),this.syncStatus=h.OFFLINE},s.setupAppLifecycleListeners=function(){var t=this;document.addEventListener("visibilitychange",(function(){document.hidden||t.syncData()}))},s.startPeriodicSync=function(){var t=this;this.syncTimer&&clearInterval(this.syncTimer),this.syncTimer=setInterval((function(){t.isOnline&&t.syncQueue.length>0&&t.syncData()}),this.SYNC_INTERVAL)},s.addToSyncQueue=function(t,e,n){void 0===n&&(n="string");var r={key:t,value:e,type:n,timestamp:Date.now()},s=this.syncQueue.findIndex((function(e){return e.key===t}));s>=0?this.syncQueue[s]=r:this.syncQueue.push(r),u("[DataSync] 添加数据到同步队列: "+t+" = "+e),this.isOnline&&this.syncData()},s.syncData=function(){var t=e(n().mark((function t(){var e,r,s,i,c,f=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.syncStatus!==h.SYNCING){t.next=3;break}return u("[DataSync] 同步正在进行中，跳过"),t.abrupt("return",!1);case 3:if(this.isOnline){t.next=6;break}return u("[DataSync] 网络离线，无法同步"),t.abrupt("return",!1);case 6:if(0!==this.syncQueue.length){t.next=8;break}return t.abrupt("return",!0);case 8:if(this.syncStatus=h.SYNCING,u("[DataSync] 开始同步 "+this.syncQueue.length+" 条数据"),t.prev=10,(e=a.user.currentUser)&&e.id){t.next=16;break}return o("[DataSync] 用户未登录，无法同步数据"),this.syncStatus=h.FAILED,t.abrupt("return",!1);case 16:return r=[].concat(this.syncQueue),this.syncQueue=[],t.next=20,fetch(y.getMainServerURL()+"/api/user/sync-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,data:r})});case 20:return s=t.sent,t.next=23,s.json();case 23:if(!(i=t.sent).success){t.next=32;break}return this.syncStatus=h.SUCCESS,this.retryCount=0,this.lastSyncTime=Date.now(),u("[DataSync] 数据同步成功: "+r.length+" 条"),t.abrupt("return",!0);case 32:throw new Error(i.message||"同步失败");case 33:t.next=42;break;case 35:return t.prev=35,t.t0=t.catch(10),o("[DataSync] 数据同步失败: "+t.t0.message),this.syncStatus=h.FAILED,(c=this.syncQueue).unshift.apply(c,this.syncQueue),this.retryCount<this.MAX_RETRY_COUNT?(this.retryCount++,u("[DataSync] 准备重试 ("+this.retryCount+"/"+this.MAX_RETRY_COUNT+")"),setTimeout((function(){f.syncData()}),2e3*this.retryCount)):o("[DataSync] 达到最大重试次数，停止重试"),t.abrupt("return",!1);case 42:case"end":return t.stop()}}),t,this,[[10,35]])})));return function(){return t.apply(this,arguments)}}(),s.syncOfflineData=function(){var t=e(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.syncQueue.length>0)){t.next=3;break}return t.next=3,this.syncData();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.fetchUserData=function(){var t=e(n().mark((function t(){var e,s,c,h,f,p;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(e=a.user.currentUser)&&e.id){t.next=5;break}return o("[DataSync] 用户未登录，无法获取数据"),t.abrupt("return",!1);case 5:return t.next=7,fetch(y.getMainServerURL()+"/api/user/get-game-data?userId="+e.id);case 7:return s=t.sent,t.next=10,s.json();case 10:if(!(c=t.sent).success||!c.data){t.next=17;break}for(h=r(c.data);!(f=h()).done;)p=f.value,i.setData(p.key,p.value);return u("[DataSync] 从服务器获取数据成功: "+c.data.length+" 条"),t.abrupt("return",!0);case 17:throw new Error(c.message||"获取数据失败");case 18:t.next=24;break;case 20:return t.prev=20,t.t0=t.catch(0),o("[DataSync] 获取用户数据失败: "+t.t0.message),t.abrupt("return",!1);case 24:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(){return t.apply(this,arguments)}}(),s.initializeUserData=function(){var t=e(n().mark((function t(){var e,r,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(e=a.user.currentUser)&&e.id){t.next=5;break}return o("[DataSync] 用户未登录，无法初始化数据"),t.abrupt("return",!1);case 5:return t.next=7,fetch(y.getMainServerURL()+"/api/user/init-game-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id})});case 7:return r=t.sent,t.next=10,r.json();case 10:if(!(s=t.sent).success){t.next=16;break}return u("[DataSync] 用户游戏数据初始化成功"),t.abrupt("return",!0);case 16:throw new Error(s.message||"初始化失败");case 17:t.next=23;break;case 19:return t.prev=19,t.t0=t.catch(0),o("[DataSync] 初始化用户数据失败: "+t.t0.message),t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(){return t.apply(this,arguments)}}(),s.getSyncStatus=function(){return this.syncStatus},s.getQueueLength=function(){return this.syncQueue.length},s.getLastSyncTime=function(){return this.lastSyncTime},s.isNetworkOnline=function(){return this.isOnline},s.forceSyncAllData=function(){var t=e(n().mark((function t(){var e,r,s,a,o,y,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(u("[DataSync] 开始强制同步所有本地数据"),e=Object.values(c),r=[],s=0,a=e;s<a.length;s++)o=a[s],null!=(y=i.getData(o))&&(h="string","number"==typeof y?h="number":"boolean"==typeof y?h="boolean":"object"==typeof y&&(h="json"),r.push({key:o,value:y,type:h,timestamp:Date.now()}));if(0!==r.length){t.next=7;break}return u("[DataSync] 没有需要同步的数据"),t.abrupt("return",!0);case 7:return this.syncQueue=r,t.next=10,this.syncData();case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.destroy=function(){this.syncTimer&&(clearInterval(this.syncTimer),this.syncTimer=null),this.syncQueue=[],this.syncStatus=h.IDLE},t}());f.instance=void 0;t("dataSyncManager",f.getInstance());s._RF.pop()}}}));

System.register("chunks:///_virtual/dataviewUtils.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8496boolPFNjJIoSqiaOBqe","dataviewUtils",void 0);t("default",function(){function t(){}return t.getHeadData=function(t){var e=t.getInt16(0),n=t.getInt16(2),r=t.getInt32(4);return{id:e,serverType:n,router:String(r)}},t.decoding=function(t,e){for(var n="",r=0,a=0;a<e&&!(r+8>=e);a++){var i=t.getInt16(r+8);r+=2,n+=String.fromCharCode(i)}return JSON.parse(n)},t.encoding=function(t,e,n,r){var a=JSON.stringify(r),i=new ArrayBuffer(2*a.length+8),o=new DataView(i);o.setInt16(0,t),o.setInt16(2,e),o.setInt32(4,n);for(var u=0,c=0;c<a.length;c++){var f=a.charCodeAt(c);o.setInt16(u+8,f),u+=2}return o.buffer},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/dropdown.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,o,a,r,s,l,c,p,h,u,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,s=e._decorator,l=e.Label,c=e.Node,p=e.Prefab,h=e.Button,u=e.Component,d=e.instantiate}],execute:function(){var f,g,b,w,v,y,m,I,C,P,D,N,S,_,x;r._RF.push({},"01058dsS+lEgYNWcW1QCDYy","dropdown",void 0);var k=s.ccclass,A=s.property;e("Dropdown",(f=k("Dropdown"),g=A({type:[String]}),b=A({type:l}),w=A({type:c}),v=A({type:c}),y=A({type:p}),f(((x=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,i(n,"options",C,o(n)),i(n,"label",P,o(n)),i(n,"optionsPanel",D,o(n)),i(n,"content",N,o(n)),i(n,"optionItemPrefab",S,o(n)),i(n,"defaultIndex",_,o(n)),n._selectedIndex=0,n._onChange=[],n}t(n,e);var r=n.prototype;return r.onLoad=function(){this.setOptions(this.options),this.select(this.defaultIndex),this.node.getComponent(h)&&this.node.on(h.EventType.CLICK,this.togglePanel,this),this.optionsPanel&&(this.optionsPanel.active=!1)},r.setOptions=function(e,n){var t=this;if(void 0===n&&(n=!0),this.options=e,this.content&&this.optionItemPrefab){this.content.removeAllChildren();for(var i=function(n){var i=d(t.optionItemPrefab),o=i.getComponent(l)||i.getComponentInChildren(l);o&&(o.string=e[n]),i.active=!0,i.on(h.EventType.CLICK,(function(){return t.select(n)}),t),t.content.addChild(i)},o=0;o<e.length;o++)i(o);n||this._selectedIndex>=e.length?this.select(0):this.select(this._selectedIndex)}},r.select=function(e){e<0||e>=this.options.length||(this._selectedIndex=e,this.label&&(this.label.string=this.options[e]),this.optionsPanel&&(this.optionsPanel.active=!1),this.emitChange())},r.getSelectedLabel=function(){return this.options[this._selectedIndex]||""},r.getSelectedIndex=function(){return this._selectedIndex},r.togglePanel=function(){this.optionsPanel&&(this.optionsPanel.active?n.openedDropdown=null:(n.openedDropdown&&n.openedDropdown!==this&&n.openedDropdown.hidePanel(),n.openedDropdown=this),this.optionsPanel.active=!this.optionsPanel.active)},r.hidePanel=function(){this.optionsPanel&&(this.optionsPanel.active=!1)},r.onChange=function(e){this._onChange.push(e)},r.emitChange=function(){for(var e,n=a(this._onChange);!(e=n()).done;){e.value.emit([this.getSelectedLabel(),this.getSelectedIndex()])}this.node.emit("change")},n}(u)).openedDropdown=null,x.US_STATES=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],x.CANADA_STATES=["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Nova Scotia","Ontario","Prince Edward Island","Quebec","Saskatchewan","Northwest Territories","Nunavut","Yukon"],C=n((I=x).prototype,"options",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=n(I.prototype,"label",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(I.prototype,"optionsPanel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(I.prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(I.prototype,"optionItemPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(I.prototype,"defaultIndex",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=I))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/DyManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"f50f23XRS1EvqA0kkrjmZ5J","DyManager",void 0),t("SdkManager",function(){function t(){this.videoId="",this.videoAd=null,this.interstitialId="",this.interstitialAd=null,this.bannerId="",this.bannerAd=null}var i=t.prototype;return i.getPlatform=function(){return null},i.initBannerAd=function(){var t=this,n=this.getPlatform();if(n){if(""!=this.bannerId){var i=n.getSystemInfoSync();null==this.bannerAd&&(this.bannerAd=n.createBannerAd({adUnitId:this.bannerId,adIntervals:30,style:{height:i.windowHeight-80,left:0,top:500,width:i.windowWidth}}),this.bannerAd.onResize((function(n){t.bannerAd.style.top=i.windowHeight-t.bannerAd.style.realHeight,t.bannerAd.style.left=i.windowWidth/2-t.bannerAd.style.realWidth/2})),this.bannerAd.onError((function(t){console.log("初始化异常",t)})))}}else console.log("banner ad init...")},i.toggleBannerAd=function(t){this.getPlatform()?this.bannerAd&&(t?this.bannerAd.show():this.bannerAd.hide()):console.log("【流量主横幅:"+t+"】")},i.initInterstitialAd=function(){var t=this.getPlatform();t?""!=this.interstitialId&&null==this.interstitialAd&&(this.interstitialAd=t.createInterstitialAd({adUnitId:this.interstitialId}),this.interstitialAd.onError((function(t){}))):console.log("inter ad init...")},i.showInterstitialAd=function(){this.getPlatform()?this.interstitialAd&&this.interstitialAd.show().catch((function(t){})):console.log("【流量主插屏】")},i.initVideoAd=function(){var t=this.getPlatform();t?""!=this.videoId&&null==this.videoAd&&(this.videoAd=t.createRewardedVideoAd({adUnitId:this.videoId}),this.videoAd.onError((function(t){}))):console.log("video ad init...")},i.showVideoAd=function(t,n){var i=this;return this.getPlatform()?this.videoAd?(this.videoAd.offClose(),this.videoAd.onClose((function(e){return i.videoAd.offClose(),e&&e.isEnded||void 0===e?t&&t("激励奖励已发放"):n&&n("视频播放中断")})),void this.videoAd.show().catch((function(){i.videoAd.load().then((function(){return i.videoAd.show()})).catch((function(t){console.log("广告展示失败")}))}))):n&&n("该功能尚未开放"):(console.log("激励模拟成功"),t&&t("模拟成功，激励奖励已发放"))},n(t,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new t),this._instance}}]),t}())._instance=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/enumConst.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"735c9mnir1AaJ4lKk2U+DGZ","enumConst",void 0);e("WindowType",function(e){return e[e.eMap=1]="eMap",e[e.eView=2]="eView",e[e.eTips=3]="eTips",e[e.eMarquee=4]="eMarquee",e[e.eToast=5]="eToast",e[e.eNetwork=6]="eNetwork",e}({})),e("WindowOpenType",function(e){return e[e.eSingle=1]="eSingle",e[e.eMultiple=2]="eMultiple",e}({})),e("Language",{Portuguese:0,English:1,Chinese:2}),e("PlatFormType",function(e){return e[e.android=1]="android",e[e.ios=2]="ios",e[e.web=3]="web",e}({})),e("Direction",function(e){return e[e.left=0]="left",e[e.right=1]="right",e[e.up=2]="up",e[e.down=3]="down",e}({})),e("Constant",{changeTime:.3,layCount:9,Width:75}),e("GoldType",function(e){return e[e.share=0]="share",e[e.level=1]="level",e[e.star=2]="star",e}({})),e("Bomb",function(e){return e[e.ver=8]="ver",e[e.hor=9]="hor",e[e.bomb=10]="bomb",e[e.allSame=11]="allSame",e[e.hint=99]="hint",e[e.extraSteps=100]="extraSteps",e[e.reshuffle=101]="reshuffle",e}({})),e("PageIndex",function(e){return e[e.shop=0]="shop",e[e.rank=1]="rank",e[e.home=2]="home",e[e.share=3]="share",e[e.setting=4]="setting",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/environment.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){var r;n._RF.push({},"2fabb8xXG9PtIxi0nc/qcr1","environment",void 0);var e=t("Environment",function(t){return t.DEVELOPMENT="development",t.TESTING="testing",t.PRODUCTION="production",t}({})),o=t("EnvironmentConfig",function(){function t(){}return t.setEnvironment=function(t){this.currentEnv=t;var n=this.getCurrentConfig();console.log("[EnvironmentConfig] 当前环境设置为: "+t),console.log("[EnvironmentConfig] 服务器配置: "+n.protocol+"://"+n.host+":"+n.serverPort)},t.getCurrentEnvironment=function(){return this.currentEnv},t.getCurrentConfig=function(){return this.SERVER_CONFIGS[this.currentEnv]},t.getMainServerAPI=function(){var t=this.getCurrentConfig();return t.protocol+"://"+t.host+":"+t.serverPort+"/admin/api"},t.getMainServerURL=function(){var t=this.getCurrentConfig();return t.protocol+"://"+t.host+":"+t.serverPort},t.getPayProxyURL=function(){var t=this.getCurrentConfig();return t.protocol+"://"+t.host+":"+t.serverPort},t.getPayProxyAPI=function(){var t=this.getCurrentConfig();return t.protocol+"://"+t.host+":"+t.serverPort+"/api/payment"},t.getCallbackServerURL=function(){var t=this.getCurrentConfig();return t.protocol+"://"+t.host+":"+t.serverPort},t.getCallbackServerAPI=function(){var t=this.getCurrentConfig();return t.protocol+"://"+t.host+":"+t.serverPort+"/api/payment"},t.getServerHost=function(){return this.getCurrentConfig().host},t.getAllConfig=function(){var t=this.getCurrentConfig();return{environment:this.currentEnv,host:t.host,mainServer:this.getMainServerAPI(),payProxy:this.getPayProxyAPI(),callbackServer:this.getCallbackServerAPI(),port:t.serverPort,protocol:t.protocol}},t.autoDetectEnvironment=function(){if("undefined"!=typeof window){var t=new URLSearchParams(window.location.search).get("env");if(t){var n=t;Object.values(e).includes(n)&&(this.setEnvironment(n),console.log("[EnvironmentConfig] 通过URL参数自动设置环境: "+n))}else{var r=window.location.hostname;"localhost"===r||"127.0.0.1"===r?(this.setEnvironment(e.DEVELOPMENT),console.log("[EnvironmentConfig] 根据域名自动设置为开发环境: "+r)):"thunderousfreeze.com"===r?(this.setEnvironment(e.PRODUCTION),console.log("[EnvironmentConfig] 根据域名自动设置为生产环境: "+r)):(this.setEnvironment(e.TESTING),console.log("[EnvironmentConfig] 根据域名自动设置为测试环境: "+r))}}},t}());o.currentEnv=e.TESTING,o.SERVER_CONFIGS=((r={})[e.DEVELOPMENT]={host:"119.91.142.92",serverPort:3e3,protocol:"http"},r[e.TESTING]={host:"119.91.142.92",serverPort:3e3,protocol:"http"},r[e.PRODUCTION]={host:"thunderousfreeze.com",serverPort:443,protocol:"https"},r),n._RF.pop()}}}));

System.register("chunks:///_virtual/environmentDebug.ts",["./rollupPluginModLoBabelHelpers.js","cc","./environment.ts"],(function(n){var o,e,t,r,l;return{setters:[function(n){o=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){t=n.cclegacy},function(n){r=n.EnvironmentConfig,l=n.Environment}],execute:function(){t._RF.push({},"5e0e0PSzLNIrLUJL2oogXaB","environmentDebug",void 0);var c=n("EnvironmentDebug",function(){function n(){}return n.checkCurrentEnvironment=function(){console.log("=== 环境配置检查 ===");var n=r.getCurrentEnvironment(),o=r.getAllConfig();console.log("当前环境:",n),console.log("完整配置:",o),console.log("主服务器API:",r.getMainServerAPI()),console.log("支付代理API:",r.getPayProxyAPI()),console.log("3D支付回调API:",r.getCallbackServerAPI()),"undefined"!=typeof window&&(console.log("当前域名:",window.location.hostname),console.log("当前协议:",window.location.protocol),console.log("当前端口:",window.location.port)),console.log("=== 环境配置检查完成 ===")},n.testNetworkConnection=function(){var n=o(e().mark((function n(){var o,t,l;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("=== 网络连接测试 ==="),o=r.getMainServerAPI(),console.log("测试API地址:",o),n.prev=3,n.next=6,fetch(o+"/health");case 6:if(t=n.sent,console.log("网络连接成功，状态码:",t.status),!t.ok){n.next=15;break}return n.next=11,t.json();case 11:l=n.sent,console.log("服务器响应:",l),n.next=16;break;case 15:console.warn("服务器响应异常，状态码:",t.status);case 16:n.next=21;break;case 18:n.prev=18,n.t0=n.catch(3),console.error("网络连接失败:",n.t0);case 21:console.log("=== 网络连接测试完成 ===");case 22:case"end":return n.stop()}}),n,null,[[3,18]])})));return function(){return n.apply(this,arguments)}}(),n.switchEnvironment=function(n){console.log("=== 切换环境到: "+n+" ==="),r.setEnvironment(n),this.checkCurrentEnvironment(),console.log("=== 环境切换完成 ===")},n.showAllEnvironments=function(){console.log("=== 所有环境配置 ==="),Object.values(l).forEach((function(n){r.setEnvironment(n);var o=r.getAllConfig();console.log(n+" 环境:",o)})),console.log("=== 所有环境配置显示完成 ===")},n.setEnvironmentFromURL=function(){if(console.log("=== 根据URL参数设置环境 ==="),"undefined"!=typeof window){var n=new URLSearchParams(window.location.search).get("env");if(n){console.log("URL参数中的环境:",n);var o=n;Object.values(l).includes(o)?(r.setEnvironment(o),console.log("环境设置成功:",o)):console.warn("无效的环境参数:",n)}else console.log("URL中没有环境参数，使用自动检测"),r.autoDetectEnvironment()}this.checkCurrentEnvironment(),console.log("=== URL环境设置完成 ===")},n}());"undefined"!=typeof window&&(window.EnvironmentDebug=c,console.log("环境调试工具已加载，可在控制台使用 EnvironmentDebug 进行调试"),console.log("可用方法:"),console.log("- EnvironmentDebug.checkCurrentEnvironment() - 检查当前环境"),console.log("- EnvironmentDebug.testNetworkConnection() - 测试网络连接"),console.log('- EnvironmentDebug.switchEnvironment("development") - 切换环境'),console.log("- EnvironmentDebug.showAllEnvironments() - 显示所有环境"),console.log("- EnvironmentDebug.setEnvironmentFromURL() - 根据URL设置环境")),t._RF.pop()}}}));

System.register("chunks:///_virtual/err.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"e3376SPCTlOIauH5nLs8SBQ","err",void 0);e("ErrEnum",{OK:200});r._RF.pop()}}}));

System.register("chunks:///_virtual/eventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singletonClass.ts"],(function(t){var e,n,r,i,a,s;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,i=t.Component,a=t.Node},function(t){s=t.SingletonClass}],execute:function(){r._RF.push({},"cb230EqBJpL37IE3+YhxKSt","eventManager",void 0);t("EventManager",function(t){function r(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this)._mapListener=new Map,e}e(r,t);var s=r.prototype;return s.onDestroy=function(){this._mapListener.clear()},s.on=function(t,e,n){var r=this;if(!this._isNull(n)){var s={handler:e,target:n},o=this._mapListener.get(t)||[];return o.length<1?(this._mapListener.set(t,[s]),1):(this._mapListener.set(t,o.filter((function(t){return t.target instanceof i?!r._isNull(t.target.node.parent):t.target instanceof a?!r._isNull(t.target.parent):t.target}))),this._mapListener.get(t).push(s),this._mapListener.get(t).length)}},s.emit=function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var o=this._mapListener.get(t)||[];o.length<1||(this._mapListener.set(t,o.filter((function(t){return t.target instanceof i?!e._isNull(t.target.node.parent):t.target instanceof a?!e._isNull(t.target.parent):t.target}))),this._mapListener.get(t).forEach((function(t){t.handler.apply(t.target,r)})))},s.off=function(t,e){var n=this._mapListener.get(t)||[];this._mapListener.set(t,n.filter((function(t){return t.target!==e})))},s.offAll=function(t){if(!this._isNull(t))for(var e,r=n(this._mapListener);!(e=r()).done;){var i=e.value,a=i[0],s=i[1];this._mapListener.set(a,s.filter((function(e){return e.target!==t})))}},s._isNull=function(t){return null==t},r}(s));r._RF.pop()}}}));

System.register("chunks:///_virtual/eventName.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){var t;e("EventName",void 0),o._RF.push({},"e73c1Rm9CxJXYN0CoqZN265","eventName",void 0),function(e){var o=function(e){return e.Move="Move",e.EndMove="EndMove",e.TouchTile="TouchTile",e.Restart="Restart",e.RefreshCurLevel="RefreshCurLevel",e.NextLevel="NextLevel",e.LoadMap="LoadMap",e.BackHome="BackHome",e.AddStarScore="AddStarScore",e.UpdataGold="UpdataGold",e.ContinueGame="ContinueGame",e.RefreshTools="RefreshTools",e.ToolReturn="ToolReturn",e.ToolCountRefresh="ToolCountRefresh",e.Share="Share",e.LayoutFinish="LayoutFinish",e.ClickedTile="ClickedTile",e.Connected="Connected",e.TouchStart="TouchStart",e.TouchMove="TouchMove",e.TouchEnd="TouchEnd",e.TouchMovingAndCheckPos="TouchMovingAndCheckPos",e.IsSuitable="IsSuitable",e.CheckRusult="CheckRusult",e.FlyFlower="FlyFlower",e.GuildEvent="GuildEvent",e.Scrolling="Scrollinggg",e.GotoShop="GotoShopgg",e.LoginSuccess="LoginSuccess",e.LoginFailed="LoginFailed",e.RegisterSuccess="RegisterSuccess",e.RegisterFailed="RegisterFailed",e.Logout="Logout",e.TIMER_DOWN="TIMER_DOWN",e}({});e.Game=o;var t=function(e){return e.RotateTile="RotateTile",e.MoveCarmera="MoveCarmera",e}({});e.UI=t}(t||(t=e("EventName",{}))),o._RF.pop()}}}));

System.register("chunks:///_virtual/gameLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enumConst.ts","./singletonClass.ts"],(function(t){var i,e,n,r,s,o;return{setters:[function(t){i=t.inheritsLoose,e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy},function(t){s=t.Bomb},function(t){o=t.SingletonClass}],execute:function(){r._RF.push({},"24298e3SlFN7o4tJ6/pxFxx","gameLogic",void 0);t("GameLogic",function(t){function r(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(i=t.call.apply(t,[this].concat(n))||this).rewardGold=100,i.curLevel=1,i.blockCount=5,i.toolsArr=[],i.hideFullList=[],i.hideList=[],i.defaultHidelist=[[[0,0],[0,1],[1,0],[0,8],[0,7],[1,8],[8,0],[8,1],[7,0],[8,8],[8,7],[7,8]],[[0,0],[0,1],[0,2],[1,0],[2,0],[1,1],[0,8],[8,8],[6,0],[7,1],[8,2],[7,0],[8,0],[8,1]],[[4,5],[4,6],[4,7],[4,8],[4,0],[4,1],[4,2],[4,3]],[[2,8],[3,8],[4,8],[5,8],[6,8],[3,7],[5,7],[4,7],[4,6]],[[0,4],[1,4],[2,4],[3,4],[5,4],[6,4],[7,4],[8,4]],[[0,4],[1,4],[2,4],[3,4],[5,4],[6,4],[7,4],[8,4],[4,5],[4,6],[4,7],[4,8],[4,0],[4,1],[4,2],[4,3]],[[3,8],[4,8],[5,8],[3,1],[4,1],[5,1],[3,7],[4,7],[5,7],[3,0],[4,0],[5,0],[0,5],[1,5],[2,5],[6,5],[7,5],[8,5],[0,4],[1,4],[2,4],[6,4],[7,4],[8,4],[0,3],[1,3],[2,3],[6,3],[7,3],[8,3]],[[0,2],[1,2],[2,2],[6,2],[7,2],[8,2],[0,8],[1,8],[2,8],[6,8],[7,8],[8,8],[0,1],[1,1],[2,1],[6,1],[7,1],[8,1],[0,7],[1,7],[2,7],[6,7],[7,7],[8,7],[0,0],[1,0],[2,0],[6,0],[7,0],[8,0],[0,6],[1,6],[2,6],[6,6],[7,6],[8,6]],[[0,5],[1,5],[2,5],[6,5],[7,5],[8,5],[0,4],[1,4],[2,4],[6,4],[7,4],[8,4],[0,3],[1,3],[2,3],[6,3],[7,3],[8,3]],[[0,0],[1,0],[2,1],[3,1],[4,2],[5,2],[6,3],[7,3],[8,4],[6,5],[7,5],[4,6],[5,6],[2,7],[3,7],[0,8],[1,8]]],i}i(r,t);var o=r.prototype;return o.onInit=function(){var t=e(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o.checkInHideList=function(t,i){for(var e=0;e<this.hideList.length;e++)if(this.hideList[e][0]==t&&this.hideList[e][1]==i)return!0;return!1},o.checkAllInHideList=function(t,i){for(var e=!0,n=i;n>=0;n--){if(!this.checkInHideList(t,n)){e=!1;break}}return e},o.resetHdeList=function(t){if(this.defaultHidelist[t-1])this.hideList=this.defaultHidelist[t-1];else if(0!=this.hideFullList.length){this.hideList=[];for(var i=Math.floor(25*Math.random()),e=0;e<i;e++){var n=Math.floor(Math.random()*this.hideFullList.length);this.hideList.push(this.hideFullList[n])}}else this.hideList=this.defaultHidelist[0]},o.isNeighbor=function(t,i){return t.h==i.h&&1==Math.abs(t.v-i.v)||t.v==i.v&&1==Math.abs(t.h-i.h)},o.isSameGrid=function(t,i){return t.v==i.v&&t.h==i.h},o.isSameHorizental=function(t){for(var i=t[0].v,e=0;e<t.length;e++)if(t[e].v!=i)return!1;return!0},o.isSameVertical=function(t){for(var i=t[0].h,e=0;e<t.length;e++)if(t[e].h!=i)return!1;return!0},o.getBombType=function(t){return 4!=t.length?this.isSameHorizental(t)||this.isSameVertical(t)?s.allSame:s.bomb:this.isSameHorizental(t)?s.ver:this.isSameVertical(t)?s.hor:void 0},r}(o));r._RF.pop()}}}));

System.register("chunks:///_virtual/gameViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts","./enumConst.ts","./eventName.ts","./levelConfig.ts","./viewNameConst.ts","./app.ts","./audioManager.ts","./cocosHelper.ts","./globalFuncHelper.ts","./resLoadHelper.ts","./toolsHelper.ts","./gridManagerCmpt.ts","./gridCmpt.ts","./rocketCmpt.ts","./randomAdManager.ts","./serverConfig.ts"],(function(t){var e,n,r,o,i,a,s,c,h,l,u,p,d,f,g,b,v,k,m,w,C,x,T,y,B,S,A,L,V,P,H,_,M,N,R;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy,i=t._decorator,a=t.UITransform,s=t.v3,c=t.instantiate,h=t.tween,l=t.Vec3,u=t.Node,p=t.Button,d=t.Color,f=t.EventHandler,g=t.Sprite,b=t.Label,v=t.find,k=t.Tween},function(t){m=t.BaseViewCmpt},function(t){w=t.Constant,C=t.Bomb},function(t){x=t.EventName},function(t){T=t.LevelConfig},function(t){y=t.ViewName},function(t){B=t.App},function(t){S=t.SoundType},function(t){A=t.CocosHelper},function(t){L=t.GlobalFuncHelper},function(t){V=t.ResLoadHelper},function(t){P=t.ToolsHelper},function(t){H=t.gridManagerCmpt},function(t){_=t.gridCmpt},function(t){M=t.rocketCmpt},function(t){N=t.randomAd},function(t){R=t.ServerConfig}],execute:function(){var E,G;o._RF.push({},"788ecy1oGVHD78Wq0TSW6N5","gameViewCmpt",void 0);var D=i.ccclass;i.property,t("GameViewCmpt",D("gameViewCmpt")(((G=function(t){function o(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).gridMgr=null,e.gridNode=null,e.effNode=null,e.target1=null,e.target2=null,e.targetBg=null,e.lbStep=null,e.spPro=null,e.star=null,e.lbTool1=null,e.lbTool2=null,e.lbTool3=null,e.lbTool4=null,e.lbTool5=null,e.lbTool6=null,e.lbTool7=null,e.addBtn1=null,e.addBtn2=null,e.addBtn3=null,e.addBtn4=null,e.addBtn5=null,e.addBtn6=null,e.addBtn7=null,e.gridPre=null,e.particlePre=null,e.rocketPre=null,e.blockArr=[],e.blockPosArr=[],e.hideList=[],e.H=w.layCount,e.V=w.layCount,e.isStartTouch=!1,e.curTwo=[],e.isStartChange=!1,e.level=0,e.stepCount=0,e.data=null,e.coutArr=[],e.curScore=0,e.starCount=0,e.isWin=!1,e.clearHintHighlight=null,e.isRecording=!1,e.isUsingBomb=!1,e}e(o,t);var i=o.prototype;return i.onLoad=function(){for(var e=1;e<5;e++)this["onClick_addBtn"+e]=this.onClickAddButton.bind(this),this["onClick_toolBtn"+e]=this.onClickToolButton.bind(this);this.onClick_addBtn5=this.onClickAddButton.bind(this),this.onClick_addBtn6=this.onClickAddButton.bind(this),this.onClick_addBtn7=this.onClickAddButton.bind(this),this.onClick_toolBtn5=this.onClickToolButton.bind(this),this.onClick_toolBtn6=this.onClickToolButton.bind(this),this.onClick_toolBtn7=this.onClickToolButton.bind(this),t.prototype.onLoad.call(this),B.audio.play("background1",S.Music,!0),this.gridMgr=this.viewList.get("center/gridManager").getComponent(H),this.gridNode=this.viewList.get("center/gridNode"),this.effNode=this.viewList.get("center/effNode"),this.targetBg=this.viewList.get("top/content/targetBg"),this.target1=this.viewList.get("top/target1"),this.target2=this.viewList.get("top/target2"),this.lbStep=this.viewList.get("top/lbStep"),this.spPro=this.viewList.get("top/probg/spPro"),this.star=this.viewList.get("top/star"),this.lbTool1=this.viewList.get("bottom/proppenal/tool1/prompt/lbTool1"),this.lbTool2=this.viewList.get("bottom/proppenal/tool2/prompt/lbTool2"),this.lbTool3=this.viewList.get("bottom/proppenal/tool3/prompt/lbTool3"),this.lbTool4=this.viewList.get("bottom/proppenal/tool4/prompt/lbTool4"),this.addBtn1=this.viewList.get("bottom/proppenal/tool1/addBtn1"),this.addBtn2=this.viewList.get("bottom/proppenal/tool2/addBtn2"),this.addBtn3=this.viewList.get("bottom/proppenal/tool3/addBtn3"),this.addBtn4=this.viewList.get("bottom/proppenal/tool4/addBtn4"),this.lbTool5=this.viewList.get("bottom/proppenal/tool5/prompt/lbTool5"),this.lbTool6=this.viewList.get("bottom/proppenal/tool6/prompt/lbTool6"),this.lbTool7=this.viewList.get("bottom/proppenal/tool7/prompt/lbTool7"),this.addBtn5=this.viewList.get("bottom/proppenal/tool5/addBtn5"),this.addBtn6=this.viewList.get("bottom/proppenal/tool6/addBtn6"),this.addBtn7=this.viewList.get("bottom/proppenal/tool7/addBtn7")},i.addEvents=function(){t.prototype.addEvents.call(this),B.event.on(x.Game.TouchStart,this.evtTouchStart,this),B.event.on(x.Game.TouchMove,this.evtTouchMove,this),B.event.on(x.Game.TouchEnd,this.evtTouchEnd,this),B.event.on(x.Game.ContinueGame,this.evtContinueGame,this),B.event.on(x.Game.Restart,this.evtRestart,this)},i.loadExtraData=function(){var t=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return B.view.closeView(y.Single.eHomeView),N.tryShowRandomAd(),this.level=e,t.next=5,T.getLevelData(e);case 5:if(this.data=t.sent,B.gameLogic.blockCount=this.data.blockCount,this.setLevelInfo(),this.gridPre){t.next=18;break}return t.next=11,V.loadPieces(y.Pieces.grid);case 11:return this.gridPre=t.sent,t.next=14,V.loadPieces(y.Pieces.particle);case 14:return this.particlePre=t.sent,t.next=17,V.loadPieces(y.Pieces.rocket);case 17:this.rocketPre=t.sent;case 18:return t.next=20,this.initLayout();case 20:N.init(),this.addTestAdButton(),this.onClick_testAdBtn();case 23:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.setLevelInfo=function(){var t=this.data,e=t.mapData[0].m_id,n=t.mapData[0].m_ct;this.coutArr=[];for(var r=0;r<e.length;r++){var o=[e[r],n[r]+10];n[r]<10&&(o=[e[r],n[r]+30]),this.coutArr.push(o)}var i=this.data.moveCount-10>0?this.data.moveCount-10:this.data.moveCount;this.stepCount=i,this.updateTargetCount(),this.updateStep(),this.updateScorePercent(),this.updateToolsInfo()},i.updateToolsInfo=function(){var t=L.getBomb(C.bomb),e=L.getBomb(C.hor),n=L.getBomb(C.ver),r=L.getBomb(C.allSame),o=L.getBomb(C.hint),i=L.getBomb(C.extraSteps),a=L.getBomb(C.reshuffle);A.updateLabelText(this.lbTool1,t),A.updateLabelText(this.lbTool2,e),A.updateLabelText(this.lbTool3,n),A.updateLabelText(this.lbTool4,r),this.lbTool5&&A.updateLabelText(this.lbTool5,o),this.lbTool6&&A.updateLabelText(this.lbTool6,i),this.lbTool7&&A.updateLabelText(this.lbTool7,a),this.addBtn1.active=t<=0,this.addBtn2.active=e<=0,this.addBtn3.active=n<=0,this.addBtn4.active=r<=0,this.addBtn5&&(this.addBtn5.active=o<=0),this.addBtn6&&(this.addBtn6.active=i<=0),this.addBtn7&&(this.addBtn7.active=a<=0)},i.updateTargetCount=function(){var t=this.coutArr;this.target1.active=t.length<=2,this.target2.active=t.length>2,(t.length<=2?this.target1:this.target2).children.forEach((function(e,n){e.active=n<t.length,n<t.length&&(e.getComponent(_).setType(t[n][0]),e.getComponent(_).setCount(t[n][1]))})),this.checkResult()},i.updateScorePercent=function(){var t=this,e=this.data.scores,n=190*(this.curScore/e[e.length-1]<1?this.curScore/e[e.length-1]:1);this.spPro.getComponent(a).width=n,this.star.children.forEach((function(n,r){var o=e[r]/e[e.length-1];n.setPosition(s(180*o,0,1)),n.getChildByName("s").active=t.curScore>=e[r],t.curScore>=e[r]&&(t.starCount=r+1)}))},i.updateStep=function(){this.stepCount<0&&(this.stepCount=0),A.updateLabelText(this.lbStep,this.stepCount)},i.checkResult=function(){if(!this.isWin){for(var t=0,e=0;e<this.coutArr.length;e++)0==this.coutArr[e][1]&&t++;if(t==this.coutArr.length)if(this.isWin=!0,this.stepCount>0)this.handleLastSteps();else N.tryShowRandomAd(),B.view.getViewByName(y.Single.eResultView)||(B.audio.play("win"),B.view.openView(y.Single.eResultView,this.level,!0,this.coutArr,this.starCount));else this.stepCount<=0&&t!=this.coutArr.length&&(N.tryShowRandomAd(),B.audio.play("lose"),B.view.openView(y.Single.eResultView,this.level,!1))}},i.handleLastSteps=function(){var t=n(r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.stepCount,n=0;case 2:if(!(n<e)){t.next=11;break}return t.next=5,P.delayTime(.1);case 5:this.stepCount--,this.updateStep(),this.throwTools();case 8:n++,t.next=2;break;case 11:return t.next=13,P.delayTime(1);case 13:this.checkAllBomb();case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.checkAllBomb=function(){var t=n(r().mark((function t(){var e,n,o,i,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isValid){t.next=2;break}return t.abrupt("return");case 2:for(e=!1,n=0;n<this.H;n++)for(o=0;o<this.V;o++)(i=this.blockArr[n][o])&&this.isBomb(i.getComponent(_))&&(e=!0,this.handleBomb(i.getComponent(_),!0));return t.next=6,P.delayTime(1);case 6:e||(a=B.view.getViewByName(y.Single.eResultView),console.log("没有炸弹了，一切都结束了"),a||B.view.openView(y.Single.eResultView,this.level,!0,this.coutArr,this.starCount));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.throwTools=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=null),B.audio.play("prop_missle");var n=e||this.lbStep.worldPosition,r=this.effNode.getComponent(a).convertToNodeSpaceAR(n),o=c(this.particlePre);this.effNode.addChild(o),o.setPosition(r),o.children.forEach((function(t){t.active="move"==t.name}));var i=this.getRandomBlock();if(i){var s=this.effNode.getComponent(a).convertToNodeSpaceAR(i.node.worldPosition);h(o).to(1,{position:s}).call((function(){o.destroy();var e=-1==t?Math.floor(3*Math.random())+8:t;i&&i.setType(e)})).start()}},i.getRandomBlock=function(){var t=Math.floor(Math.random()*this.H),e=Math.floor(Math.random()*this.V);return this.blockArr[t][e]&&this.blockArr[t][e].getComponent(_).type<7?this.blockArr[t][e].getComponent(_):this.getRandomBlock()},i.evtContinueGame=function(){this.stepCount+=5,this.isStartChange=!1,this.isStartTouch=!1,this.updateStep()},i.evtTouchStart=function(){var t=n(r().mark((function t(e){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(this.isStartTouch,this.isStartChange),this.handleProtected(),!this.isStartChange){t.next=4;break}return t.abrupt("return");case 4:if(!this.isStartTouch){t.next=6;break}return t.abrupt("return");case 6:if(!(this.stepCount<=0)){t.next=10;break}return B.view.showMsgTips("Insufficient steps"),B.view.openView(y.Single.eResultView,this.level,!1),t.abrupt("return");case 10:n=this.gridNode.getComponent(a).convertToNodeSpaceAR(new l(e.x,e.y,1)),o=this.checkClickOnBlock(n),this.curTwo=[],o&&(o.setSelected(!0),this.curTwo.push(o),console.log(o.data),this.isStartTouch=!0);case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.evtTouchMove=function(t){if(!this.isStartChange&&this.isStartTouch){var e=this.gridNode.getComponent(a).convertToNodeSpaceAR(new l(t.x,t.y,1)),n=this.checkClickOnBlock(e);n&&B.gameLogic.isNeighbor(n,this.curTwo[0])&&(n.setSelected(!0),this.curTwo.push(n),this.isStartChange=!0,this.startChangeCurTwoPos())}},i.evtTouchEnd=function(){var t=n(r().mark((function t(e){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isStartChange){t.next=2;break}return t.abrupt("return");case 2:if(this.isStartTouch){t.next=4;break}return t.abrupt("return");case 4:if(n=this.gridNode.getComponent(a).convertToNodeSpaceAR(new l(e.x,e.y,1)),!(o=this.checkClickOnBlock(n))||!this.isBomb(o)||1!=this.curTwo.length){t.next=9;break}return t.next=9,this.handleBomb(o);case 9:this.isStartTouch=!1,this.isStartChange=!1,this.resetSelected();case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.handleProtected=function(){var t=this;!this.isStartChange&&!this.isStartTouch||this.isRecording||(this.isRecording=!0,this.scheduleOnce((function(){t.isValid&&(t.isRecording=!1,t.isStartChange=!1,t.isStartTouch=!1)}),5))},i.isBomb=function(t){return t.type>=8&&t.type<=11},i.handleBomb=function(){var t=n(r().mark((function t(e,n){var o,i,a,s,c,h,l,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=!1),!this.isBomb(e)){t.next=28;break}return o=[],i=[],t.next=6,this.getBombList(e);case 6:a=t.sent,o.push(a),s=0;case 9:if(!(s<a.length)){t.next=21;break}if(a[s].h!=e.h||a[s].v!=e.v){t.next=12;break}return t.abrupt("continue",18);case 12:if(!this.isBomb(a[s])){t.next=18;break}return t.t0=o,t.next=16,this.getBombList(a[s]);case 16:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 18:s++,t.next=9;break;case 21:for(c=function(t){for(var e=0;e<i.length;e++)if(i[e].h==t.h&&i[e].v==t.v)return!0;return!1},h=0;h<o.length;h++)for(l=0;l<o[h].length;l++)u=o[h][l],c(u)||i.push(u);return t.next=25,this.handleSamelistBomb(i);case 25:return t.next=27,this.checkAgain(n);case 27:return t.abrupt("return",!0);case 28:return t.abrupt("return",!1);case 29:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),i.getBombList=function(){var t=n(r().mark((function t(e){var o,i,a,s,l,u,p,d,f,b,v,k,m,w,x,T,y,S,A,L;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=[],t.t0=e.type,t.next=t.t0===C.hor?4:t.t0===C.ver?11:t.t0===C.bomb?18:t.t0===C.allSame?34:63;break;case 4:for(i=0;i<this.H;i++)(a=this.blockArr[i][e.v])&&o.push(a.getComponent(_));return B.audio.play("prop_line"),s=c(this.rocketPre),this.effNode.addChild(s),s.setPosition(e.node.position),s.getComponent(M).initData(e.type),t.abrupt("break",63);case 11:for(l=0;l<this.V;l++)(u=this.blockArr[e.h][l])&&o.push(u.getComponent(_));return B.audio.play("prop_line"),p=c(this.rocketPre),this.effNode.addChild(p),p.setPosition(e.node.position),p.getComponent(M).initData(e.type),t.abrupt("break",63);case 18:d=e.h-2;case 19:if(!(d<e.h+2&&d<this.V)){t.next=32;break}f=e.v-2;case 21:if(!(f<e.v+2&&f<this.V)){t.next=29;break}if(!(d<0||f<0)){t.next=24;break}return t.abrupt("continue",26);case 24:(b=this.blockArr[d][f])&&o.push(b.getComponent(_));case 26:f++,t.next=21;break;case 29:d++,t.next=19;break;case 32:return B.audio.play("prop_bomb"),t.abrupt("break",63);case 34:for(v=-1,k=0;k<this.curTwo.length;k++)this.curTwo[k].type!=e.type&&(v=this.curTwo[k].type);if(!(v<0)){t.next=53;break}m=e.h-1;case 38:if(!(m<e.h+1&&m<this.V)){t.next=53;break}w=e.v-1;case 40:if(!(w<e.v+1&&w<this.V)){t.next=50;break}if(!(m<0||w<0)){t.next=43;break}return t.abrupt("continue",47);case 43:if(!((x=this.blockArr[m][w])&&v<0)){t.next=47;break}return v=x.getComponent(_).type,t.abrupt("break",50);case 47:w++,t.next=40;break;case 50:m++,t.next=38;break;case 53:for((T=e.node.getChildByName("icon").getChildByName("Match11")).getComponent(g).enabled=!1,T.getChildByName("a").active=!0,v<0&&(v=Math.floor(Math.random()*B.gameLogic.blockCount)),B.audio.play("prop_missle"),y=0;y<this.H;y++)for(S=0;S<this.V;S++)(A=this.blockArr[y][S])&&A.getComponent(_).type==v&&(o.push(A.getComponent(_)),L=c(this.particlePre),this.effNode.addChild(L),L.setPosition(e.node.position),L.children.forEach((function(t){t.active="move"==t.name})),h(L).to(.5,{position:A.position}).call(n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.delayTime(.2);case 2:e.destroy();case 3:case"end":return t.stop()}}),t)})))).start());return o.push(e),t.next=62,P.delayTime(.7);case 62:return t.abrupt("break",63);case 63:return t.abrupt("return",o);case 64:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.resetSelected=function(){this.isValid&&this.curTwo.forEach((function(t){t&&t.setSelected(!1)}))},i.startChangeCurTwoPos=function(){var t=n(r().mark((function t(e){var o,i,a,s=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=!1),o=w.changeTime,i=this.curTwo[0],a=this.curTwo[1],e?B.audio.play("ui_banner_up_hide"):B.audio.play("ui_banner_down_show"),i&&a){t.next=6;break}return t.abrupt("return");case 6:h(i.node).to(o,{position:this.blockPosArr[a.h][a.v]}).start(),h(a.node).to(o,{position:this.blockPosArr[i.h][i.v]}).call(n(r().mark((function t(){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=14;break}return s.changeData(i,a),t.next=4,s.handleBomb(i);case 4:return n=t.sent,t.next=7,s.handleBomb(a);case 7:return o=t.sent,t.next=10,s.startCheckThree((function(t){t&&(s.stepCount--,s.updateStep())}));case 10:t.sent||n||o?(s.checkAgain(),N.tryShowRandomAd()):(console.log(s.curTwo),s.startChangeCurTwoPos(!0)),t.next=18;break;case 14:s.changeData(i,a),s.isStartChange=!1,s.isStartTouch=!1,s.resetSelected();case 18:case"end":return t.stop()}}),t)})))).start();case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.checkExist=function(t,e){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++){var o=e[n][r];if(o.data.h==t.data.h&&o.data.v==t.data.v)return!0}return!1},i.checkAgain=function(){var t=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.next=3,this.startCheckThree();case 3:t.sent?this.checkAgain(e):(this.resetSelected(),this.isStartChange=!1,this.isStartTouch=!1,e&&(console.log(e),this.checkAllBomb()));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.startCheckThree=function(){var t=n(r().mark((function t(e){var o=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=null),t.abrupt("return",new Promise(n(r().mark((function t(n){var i,a,s,c,h,l,u,p,d,f,g,b;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],a=0;case 2:if(!(a<o.H)){t.next=22;break}s=0;case 4:if(!(s<o.V)){t.next=19;break}if(o.isValid){t.next=8;break}return n(!1),t.abrupt("return");case 8:if((c=o.blockArr[a][s])&&!c.getComponent(_).getMoveState()){t.next=11;break}return t.abrupt("continue",16);case 11:if(!o.checkExist(c.getComponent(_),i)){t.next=13;break}return t.abrupt("continue",16);case 13:h=o._checkHorizontal(c.getComponent(_)),l=o._checkVertical(c.getComponent(_)),h.length>=3&&l.length>=3&&(h=(h=h.slice(1,h.length)).concat(l),i.push(h));case 16:s++,t.next=4;break;case 19:a++,t.next=2;break;case 22:u=0;case 23:if(!(u<o.H)){t.next=40;break}p=0;case 25:if(!(p<o.V)){t.next=37;break}if((d=o.blockArr[u][p])&&!d.getComponent(_).getMoveState()){t.next=29;break}return t.abrupt("continue",34);case 29:if(!o.checkExist(d.getComponent(_),i)){t.next=31;break}return t.abrupt("continue",34);case 31:f=o._checkHorizontal(d.getComponent(_)),g=o._checkVertical(d.getComponent(_)),f.length>=3?i.push(f):g.length>=3&&i.push(g);case 34:p++,t.next=25;break;case 37:u++,t.next=23;break;case 40:return e&&e(!!i.length),t.next=43,o.handleSamelist(i);case 43:b=!!i.length,n(b);case 45:case"end":return t.stop()}}),t)})))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.handleSamelist=function(){var t=n(r().mark((function t(e){var o=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(n(r().mark((function t(n){var i,a,s,h,l,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length<1)){t.next=3;break}return n(""),t.abrupt("return");case 3:o._deleteDuplicates(e),e=o.jugetLegitimate(e),i=["combo_cool","combo_excellent","combo_good","combo_great","combo_perfect"],a=Math.floor(Math.random()*i.length),s=0;case 8:if(!(s<e.length)){t.next=26;break}if(!((h=e[s]).length<3)){t.next=12;break}return t.abrupt("continue",23);case 12:if(!(h.length>3)){t.next=15;break}return o.synthesisBomb(h),t.abrupt("continue",23);case 15:h.length>3?B.audio.play(i[a]):B.audio.play("combo"),l=r().mark((function t(){var e,n,i,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=h[u],n=c(o.particlePre),o.effNode.addChild(n),n.children.forEach((function(t){t.active=+t.name==e.type})),i=e.type,a=e.node.worldPosition,o.flyItem(i,a),o.addScoreByType(i),n.setPosition(o.blockPosArr[e.h][e.v]),o.blockArr[e.h][e.v]=null,e.node.destroy();case 11:case"end":return t.stop()}}),t)})),u=0;case 18:if(!(u<h.length)){t.next=23;break}return t.delegateYield(l(),"t0",20);case 20:u++,t.next=18;break;case 23:s++,t.next=8;break;case 26:return t.next=28,P.delayTime(.2);case 28:return t.next=30,o.checkMoveDown();case 30:n("");case 31:case"end":return t.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.handleSamelistBomb=function(){var t=n(r().mark((function t(e){var o=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(n(r().mark((function t(n){var i,a,s,h;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length<1)){t.next=3;break}return n(""),t.abrupt("return");case 3:i=["combo_cool","combo_excellent","combo_good","combo_great","combo_perfect"],a=Math.floor(Math.random()*i.length),o.scheduleOnce((function(){o.isValid&&B.audio.play(i[a])}),.2),s=r().mark((function t(){var n,i,a,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e[h]){t.next=3;break}return t.abrupt("return",0);case 3:if(i=c(o.particlePre),o.effNode.addChild(i),i.children.forEach((function(t){t.active=+t.name==n.type})),a=n.type,n&&n.node){t.next=9;break}return t.abrupt("return",0);case 9:s=n.node.worldPosition,o.flyItem(a,s),o.addScoreByType(a),i.setPosition(o.blockPosArr[n.h][n.v]),o.blockArr[n.h][n.v]=null,n.node&&n.node.destroy();case 15:case"end":return t.stop()}}),t)})),h=0;case 8:if(!(h<e.length)){t.next=16;break}return t.delegateYield(s(),"t0",10);case 10:if(0!==t.t0){t.next=13;break}return t.abrupt("continue",13);case 13:h++,t.next=8;break;case 16:return t.next=18,P.delayTime(.2);case 18:return t.next=20,o.checkMoveDown();case 20:n("");case 21:case"end":return t.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.synthesisBomb=function(t){for(var e=this,n=null,r=0;r<t.length;r++)for(var o=0;o<this.curTwo.length;o++)if(t[r].h==this.curTwo[o].h&&t[r].v==this.curTwo[o].v){n=t[r];break}n||(n=t[Math.floor(t.length/2)]);var i=B.gameLogic.getBombType(t);B.audio.play("ui_banner_up_hide");for(var a=0;a<t.length;a++){var s=t[a],c=s.type;s.node.worldPosition;this.addScoreByType(c),h(s.node).to(.1,{position:this.blockPosArr[n.h][n.v]}).call((function(t){var r=t.getComponent(_);console.log(r.h,r.v),r.h==n.h&&r.v==n.v?r.setType(i):(e.blockArr[r.h][r.v]=null,r.node.destroy())})).start()}},i.jugetLegitimate=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];this.startJuge(r)&&e.push(r)}return e},i.startJuge=function(t){var e=!1;switch(t.length){case 3:case 4:e=this._atTheSameHorOrVer(t);break;case 5:(e=this._atTheSameHorOrVer(t))||(e=this._atLeastThreeSameHorAndVer(t));break;case 6:case 7:default:e=this._atLeastThreeSameHorAndVer(t)}return e},i._atLeastThreeSameHorAndVer=function(t){for(var e=0,n=0;n<t.length;n++)for(var r=t[n],o=0;o<t.length;o++){var i=t[o];if(r.data.h==i.data.h){e++;break}}if(e<3)return false;e=0;for(var a=0;a<t.length;a++)for(var s=t[a],c=0;c<t.length;c++){var h=t[c];if(s.data.v==h.data.v){e++;break}}return!(e<3)},i._atTheSameHorOrVer=function(t){for(var e=t[0],n=!0,r=0;r<t.length;r++)if(e.data.h!=t[r].data.h){n=!1;break}if(n)return n;n=!0;for(var o=0;o<t.length;o++)if(e.data.v!=t[o].data.v){n=!1;break}return n},i._deleteDuplicates=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=!0;do{for(var o=0,i=0;i<n.length-1;i++)for(var a=i+1;a<n.length;a++)if(n[i].data.h==n[a].data.h&&n[i].data.v==n[a].data.v){t[e].splice(e,1),o++,console.log("------------repeat----------");break}r=o>0}while(r)}},i._checkHorizontal=function(t){for(var e=[t],n=t.data.h,r=t.data.v,o=n+1;o<this.H&&this.blockArr[o][r];o++){var i=this.blockArr[o][r].getComponent(_);if(!i||t.getMoveState())break;if(i.type!=t.type)break;e.push(i)}for(var a=n-1;a>=0&&!(a<0)&&this.blockArr[a][r];a--){var s=this.blockArr[a][r].getComponent(_);if(!s||t.getMoveState())break;if(s.type!=t.type)break;e.push(s)}return e.length<3?[]:e},i._checkVertical=function(t){for(var e=[t],n=t.data.h,r=t.data.v,o=r+1;o<this.V&&this.blockArr[n][o];o++){var i=this.blockArr[n][o].getComponent(_);if(!i||t.getMoveState())break;if(i.type!=t.type)break;e.push(i)}for(var a=r-1;a>=0&&!(a<0)&&this.blockArr[n][a];a--){var s=this.blockArr[n][a].getComponent(_);if(!s||t.getMoveState())break;if(s.type!=t.type)break;e.push(s)}return e.length<3?[]:e},i.changeData=function(t,e){var n=t.data;t.data=e.data,e.data=n;var r=t.data.h,o=t.data.v,i=e.data.h,a=e.data.v,s=this.blockArr[r][o];this.blockArr[r][o]=this.blockArr[i][a],this.blockArr[i][a]=s,this.blockArr[r][o].getComponent(_).initData(this.blockArr[r][o].getComponent(_).data.h,this.blockArr[r][o].getComponent(_).data.v),this.blockArr[i][a].getComponent(_).initData(this.blockArr[i][a].getComponent(_).data.h,this.blockArr[i][a].getComponent(_).data.v)},i.checkClickOnBlock=function(t){if(this.isValid&&!(this.blockArr.length<1)){for(var e=0;e<this.H;e++)for(var n=0;n<this.V;n++){var r=this.blockArr[e][n];if(r&&r.getComponent(_).isInside(t))return r.getComponent(_)}return null}},i.checkMoveDown=function(){var t=n(r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(n(r().mark((function t(n){var o,i,a,s,c,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=0;case 1:if(!(o<e.H)){t.next=27;break}i=0,a=0;case 4:if(!(a<e.V)){t.next=24;break}if(e.isValid){t.next=7;break}return t.abrupt("return");case 7:if(s=e.blockArr[o][a],c=B.gameLogic.checkInHideList(o,a),s){t.next=13;break}c?!B.gameLogic.checkAllInHideList(o,a)&&i>0&&i++:i++,t.next=21;break;case 13:if(!(s&&i>0)){t.next=21;break}return t.next=16,e.getDownLastCount(o,a,i);case 16:l=t.sent,e.blockArr[o][a]=null,e.blockArr[o][a-l]=s,s.getComponent(_).initData(o,a-l),h(s).to(.5,{position:e.blockPosArr[o][a-l]},{easing:"backOut"}).call(n).start();case 21:a++,t.next=4;break;case 24:o++,t.next=1;break;case 27:return t.next=29,e.checkReplenishBlock();case 29:n("");case 30:case"end":return t.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getDownLastCount=function(){var t=n(r().mark((function t(e,n,o){var i=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var r=0;!function t(e,n,o){r=o,(B.gameLogic.checkInHideList(e,n-o)||i.blockArr[e][n-o])&&t(e,n,o-1)}(e,n,o),t(r)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),i.checkReplenishBlock=function(){var t=n(r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(n(r().mark((function t(n){var o,i,a,c,l,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o=0;o<e.H;o++)for(i=0;i<e.V;i++)a=e.blockArr[o][i],c=B.gameLogic.checkInHideList(o,i),a||c||(l=e.blockPosArr[o][e.V-1],u=e.addBlock(o,i,s(l.x,l.y+w.Width+20,1)),e.blockArr[o][i]=u,h(u).to(.5,{position:e.blockPosArr[o][i]},{easing:"backOut"}).call(n).start());return t.next=3,P.delayTime(.5);case 3:n("");case 4:case"end":return t.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.initLayout=function(){var t=n(r().mark((function t(){var e,n,o,i,a,c,l,u,p,d,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clearData(),t.next=3,this.gridMgr.initGrid();case 3:this.hideList=B.gameLogic.hideList,e=0,n=w.Width,o=0,i=0;case 8:if(!(i<this.H)){t.next=32;break}this.blockArr.push([]),this.blockPosArr.push([]),a=0;case 12:if(!(a<this.V)){t.next=29;break}if(B.gameLogic.hideFullList.length<this.H*this.V&&B.gameLogic.hideFullList.push([i,a]),c=(n+e)*(i+0)-(n+e)*(this.H-1)/2,l=(n+e)*(a+0)-(n+e)*(this.V-1)/2,u=s(c,l,1),this.blockPosArr[i][a]=u,!B.gameLogic.checkInHideList(i,a)){t.next=21;break}return this.blockArr[i][a]=null,t.abrupt("continue",26);case 21:o++,(p=this.addBlock(i,a,u)).setScale(s(0,0,0)),h(p).to(o/100,{scale:s(1,1,1)}).start(),this.blockArr[i][a]=p;case 26:a++,t.next=12;break;case 29:i++,t.next=8;break;case 32:return t.next=34,P.delayTime(.8);case 34:for(d=B.gameLogic.toolsArr,f=0;f<d.length;f++)this.throwTools(d[f]);B.gameLogic.toolsArr=[];case 37:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.addBlock=function(t,e,n){void 0===n&&(n=null);var r=c(this.gridPre);return this.gridNode.addChild(r),r.getComponent(_).initData(t,e),n&&r.setPosition(n),r},i.clearData=function(){if(B.gameLogic.resetHdeList(this.level),!(this.blockArr.length<1)){for(var t=0;t<this.H;t++)for(var e=0;e<this.V;e++){var n=this.blockArr[t][e];n&&n.destroy()}this.blockArr=[],this.blockPosArr=[],this.isStartChange=!1,this.isStartTouch=!1,this.curScore=0,this.isWin=!1}},i.addScoreByType=function(t){t>this.data.blockRatio.length-1&&(t=this.data.blockRatio.length-1);var e=this.data.blockRatio[t];this.curScore+=e,this.updateScorePercent()},i.flyItem=function(){var t=n(r().mark((function t(e,n){var o,i,s,u,p=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.data.mapData[0].m_id.indexOf(e)<0)){t.next=3;break}return t.abrupt("return");case 3:o=c(this.gridPre),i=new l,s=new l,this.node.getComponent(a).convertToNodeSpaceAR(n,i),this.node.getComponent(a).convertToNodeSpaceAR(this.targetBg.worldPosition,s),o.setPosition(i),this.node.addChild(o),o.getComponent(_).setType(e),u=.5+1*Math.random(),o.setScale(.5,.5,.5),h(o).to(u,{position:s},{easing:"backIn"}).call((function(){p.handleLevelTarget(e),o.destroy()})).start();case 14:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),i.handleLevelTarget=function(t){for(var e=0;e<this.coutArr.length;e++)t==this.coutArr[e][0]&&(this.coutArr[e][1]--,this.coutArr[e][1]<0&&(this.coutArr[e][1]=0));this.updateTargetCount()},i.evtRestart=function(){this.loadExtraData(this.level)},i.onClick_testBtn=function(){this.loadExtraData(this.level)},i.addTestAdButton=function(){var t=this.node.getChildByPath("testAdBtn");if(t)t.active=!0;else{console.log("添加测试广告按钮");var e=(t=new u("testAdBtn")).addComponent(a);e.width=150,e.height=60;var n=t.addComponent(p);n.transition=p.Transition.COLOR,n.normalColor=new d(0,122,204,255),n.hoverColor=new d(30,152,234,255),n.pressedColor=new d(0,92,174,255);var r=new f;r.target=this.node,r.component="gameViewCmpt",r.handler="onClick_testAdBtn",n.clickEvents.push(r);var o=t.addComponent(g);o.type=g.Type.SIMPLE,o.color=new d(0,122,204,255);var i=new u("Label"),s=i.addComponent(a);s.width=140,s.height=50;var c=i.addComponent(b);c.string="测试广告",c.fontSize=24,c.color=d.WHITE,c.horizontalAlign=b.HorizontalAlign.CENTER,c.verticalAlign=b.VerticalAlign.CENTER,i.parent=t,t.setPosition(300,-600,0),t.parent=this.node,console.log("测试广告按钮已添加")}},i.onClick_testAdBtn=function(){B.audio.play("button_click"),console.log("测试广告按钮点击"),N.resetAdState(),N.forceShowAd("next")},i.onClick_setBtn=function(){B.view.openView(y.Single.esettingGameView)},i.onClick_buyBtn=function(){B.audio.play("button_click"),B.view.openView(y.Single.eBuyView)},i.onClick_pauseBtn=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:B.audio.play("button_click"),B.view.openView(y.Single.esettingGameView);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.onClickAddButton=function(t){B.audio.play("button_click");var e=-1,n=10;switch(t.name){case"addBtn1":e=C.bomb,n=10;break;case"addBtn2":e=C.hor,n=10;break;case"addBtn3":e=C.ver,n=10;break;case"addBtn4":e=C.allSame,n=10;break;case"addBtn5":e=C.hint,n=2;break;case"addBtn6":e=C.extraSteps,n=50;break;case"addBtn7":e=C.reshuffle,n=20}L.getGold()>=n?(L.setGold(-n),L.setBomb(e,1),this.updateToolsInfo(),B.view.showMsgTips("Purchase successful! +1 prop"),this.syncGoldDataToServer()):(B.view.showMsgTips("Insufficient coins"),v("Canvas/view/gameView/buy").active=!0)},i.onClickToolButton=function(t){var e=this;if(B.audio.play("button_click"),!this.isUsingBomb){this.isUsingBomb=!0,this.scheduleOnce((function(){e.isUsingBomb=!1,e.isStartChange=!1,e.isStartTouch=!1}),1);var n=-1;switch(t.name){case"toolBtn1":n=C.bomb;break;case"toolBtn2":n=C.hor;break;case"toolBtn3":n=C.ver;break;case"toolBtn4":n=C.allSame;break;case"toolBtn5":n=C.hint;break;case"toolBtn6":n=C.extraSteps;break;case"toolBtn7":n=C.reshuffle}var r=L.getBomb(n);if(console.log(r),r<=0)B.view.showMsgTips("Insufficient number of props");else{N.tryShowRandomAd(),L.setBomb(n,-1);var o=t.worldPosition;n===C.hint?this.onClickHintButton():n===C.extraSteps?this.onClickExtraStepsButton():n===C.reshuffle?this.onClickReshuffleButton():this.throwTools(n,o),this.updateToolsInfo()}}},i.onClickReshuffleButton=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return B.audio.play("button_click"),B.view.showMsgTips("Reshuffling..."),t.next=4,this.reshuffleBlocks();case 4:this.updateToolsInfo();case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.reshuffleBlocks=function(){var t=n(r().mark((function t(){var e,n,o,i,l,u,p,d,f,g,b,v;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=c(this.particlePre),this.effNode.addChild(e),n=this.effNode.getComponent(a).convertToNodeSpaceAR(s(0,0,0)),e.setPosition(n),e.children.forEach((function(t){t.active="move"==t.name})),o=[],i=0;i<this.H;i++)for(o.push([]),l=0;l<this.V;l++)this.blockArr[i][l]?o[i][l]=this.blockArr[i][l].getComponent(_).type:o[i][l]=-1;for(u=[],o.forEach((function(t){t.forEach((function(t){-1!==t&&u.push(t)}))})),p=u.length-1;p>0;p--)d=Math.floor(Math.random()*(p+1)),f=[u[d],u[p]],u[p]=f[0],u[d]=f[1];for(g=0,b=0;b<this.H;b++)for(v=0;v<this.V;v++)-1!==o[b][v]&&(this.blockArr[b][v].getComponent(_).setType(u[g++]),k.stopAllByTarget(this.blockArr[b][v]),h(this.blockArr[b][v]).to(.2,{scale:s(0,0,0)}).to(.2,{scale:s(1.2,1.2,1.2)}).to(.1,{scale:s(1,1,1)}).start());return t.next=14,P.delayTime(.5);case 14:return e.destroy(),t.next=17,this.checkAgain(!1);case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.onClickExtraStepsButton=function(){var t=n(r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:B.audio.play("button_click"),this.stepCount+=10,this.updateStep(),B.view.showMsgTips("+10 Steps!"),e=c(this.particlePre),this.effNode.addChild(e),n=this.effNode.getComponent(a).convertToNodeSpaceAR(this.lbStep.worldPosition),e.setPosition(n),e.children.forEach((function(t){t.active="move"==t.name})),this.scheduleOnce((function(){e.destroy()}),2),this.updateToolsInfo();case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.setHintHighlight=function(t,e){t&&t.node&&(e?(k.stopAllByTarget(t.node),h(t.node).to(.3,{scale:s(1.4,1.4,1.4)}).to(.3,{scale:s(1,1,1)}).to(.3,{scale:s(1.4,1.4,1.4)}).to(.3,{scale:s(1,1,1)}).union().repeat(6).start()):(k.stopAllByTarget(t.node),h(t.node).to(.2,{scale:s(1,1,1)}).start()))},i.findHintMove=function(){var t=n(r().mark((function t(){var e,n,o,i,a,s,c,h,l,u,p,d,f,g,b,v,k,m,w,C=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.clearHintHighlight&&this.clearHintHighlight(),e=!1,n=null,o=null,i=[],a=0;case 6:if(!(a<this.H)){t.next=49;break}s=0;case 8:if(!(s<this.V)){t.next=44;break}if(c=this.blockArr[a][s]){t.next=12;break}return t.abrupt("continue",41);case 12:h=c.getComponent(_),l=[[1,0],[0,1]],u=0;case 15:if(!(u<l.length)){t.next=39;break}if(p=a+l[u][0],d=s+l[u][1],!(p>=this.H||d>=this.V)){t.next=20;break}return t.abrupt("continue",36);case 20:if(f=this.blockArr[p][d]){t.next=23;break}return t.abrupt("continue",36);case 23:if(g=f.getComponent(_),this.changeData(h,g),b=this._checkHorizontal(h),v=this._checkVertical(h),k=this._checkHorizontal(g),m=this._checkVertical(g),w=b.length>=3||v.length>=3||k.length>=3||m.length>=3,this.changeData(h,g),!w){t.next=36;break}return n=h,o=g,e=!0,t.abrupt("break",39);case 36:u++,t.next=15;break;case 39:if(!e){t.next=41;break}return t.abrupt("break",44);case 41:s++,t.next=8;break;case 44:if(!e){t.next=46;break}return t.abrupt("break",49);case 46:a++,t.next=6;break;case 49:if(!(e&&n&&o)){t.next=60;break}return this.setHintHighlight(n,!0),this.setHintHighlight(o,!0),i.push(n,o),console.log("提示高亮方块: 方块1(h="+n.h+", v="+n.v+")，方块2(h="+o.h+", v="+o.v+")"),this.clearHintHighlight=function(){i.forEach((function(t){return C.setHintHighlight(t,!1)})),C.clearHintHighlight=null},setTimeout((function(){C.clearHintHighlight&&C.clearHintHighlight()}),2e3),console.log("found"),t.abrupt("return",!0);case 60:return B.view.showMsgTips("No available hints"),t.abrupt("return",!1);case 62:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.onClickHintButton=function(){var t=n(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return B.audio.play("button_click"),e=o.HINT_TOOL_TYPE,L.getBomb(e),t.next=5,this.findHintMove();case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.syncGoldDataToServer=function(){try{window.dataSyncManager?(console.log("[GameView] 开始同步金币数据到服务器"),window.dataSyncManager.forceSyncAllData().then((function(t){t?console.log("[GameView] 金币数据同步成功"):console.error("[GameView] 金币数据同步失败")})).catch((function(t){console.error("[GameView] 金币数据同步异常:",t)}))):(console.warn("[GameView] 数据同步管理器未初始化，尝试手动同步"),this.manualSyncGoldData())}catch(t){console.error("[GameView] 同步金币数据失败:",t),this.manualSyncGoldData()}},i.manualSyncGoldData=function(){try{var t=void 0!==B&&B.user&&B.user.currentUser;if(!t||!t.id)return void console.warn("[GameView] 用户未登录，跳过金币同步");var e=L.getGold(),n={userId:t.id,data:[{key:"Gold",value:e.toString(),type:"string"}]};console.log("[GameView] 准备同步金币数据:",n),fetch(R.getMainServerURL()+"/api/user/sync-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(t){t.success?console.log("[GameView] 金币数据同步成功"):console.error("[GameView] 金币数据同步失败:",t.message)})).catch((function(t){console.error("[GameView] 金币数据同步异常:",t)}))}catch(t){console.error("[GameView] 手动同步金币数据失败:",t)}},o}(m)).HINT_TOOL_TYPE=99,E=G))||E);o._RF.pop()}}}));

System.register("chunks:///_virtual/globalFuncHelper.ts",["cc","./enumConst.ts","./viewNameConst.ts","./app.ts","./storageHelper.ts"],(function(e){var t,a,n,r,o,s;return{setters:[function(e){t=e.cclegacy},function(e){a=e.Bomb},function(e){n=e.ViewName},function(e){r=e.App},function(e){o=e.StorageHelper,s=e.StorageHelperKey}],execute:function(){t._RF.push({},"30cc2NATc1Mm48jbsPt4OZS","globalFuncHelper",void 0);e("GlobalFuncHelper",new(function(){function e(){this.debugInfo=[],this.index=0}var t=e.prototype;return t.pushDebugInfo=function(e){this.debugInfo.push(e),this.debugInfo.length>1e4&&this.debugInfo.shift()},t.getDebugInfo=function(){return this.debugInfo},t.clearDebugInfo=function(){this.debugInfo.splice(0)},t.getTileIndex=function(){return this.index++},t.getStarScore=function(e){return+o.getData(s.StarScore,0)},t.setStarScore=function(e,t){return t+=this.getStarScore(),o.setData(s.StarScore,t)},t.getStarReward=function(e){return o.getBooleanData(s.StarReward+e,!1)},t.setStarReward=function(e){return o.setBooleanData(s.StarReward+e,!0)},t.getLevelReward=function(e){return!1},t.setStLevelward=function(e){},t.getGold=function(){return+o.getData(s.Gold)},t.setGold=function(e){var t=+this.getGold();o.setData(s.Gold,e+t+"")},t.getIcon=function(){return+o.getData(s.Icon,1)},t.setIcon=function(e){o.setData(s.Icon,e+"")},t.getHeart=function(){var e=+o.getData(s.Heart,1);return e<0&&(e=0),e},t.setHeart=function(e){var t=this.getHeart()+e;o.setData(s.Heart,t+"")},t.getBomb=function(e){switch(e){case a.hor:return+o.getData(s.BombHor);case a.ver:return+o.getData(s.BombVer);case a.bomb:return+o.getData(s.BombBomb);case a.allSame:return+o.getData(s.BombAllSame);case a.hint:return+o.getData(s.BombHint);case a.extraSteps:return+o.getData(s.BombExtraSteps);case a.reshuffle:return+o.getData(s.BombReshuffle)}},t.setBomb=function(e,t){var n=this.getBomb(e),r=n+t>=0?n+t:0;switch(e){case a.hor:o.setData(s.BombHor,r+"");break;case a.ver:o.setData(s.BombVer,r+"");break;case a.bomb:o.setData(s.BombBomb,r+"");break;case a.allSame:o.setData(s.BombAllSame,r+"");break;case a.hint:o.setData(s.BombHint,r+"");break;case a.extraSteps:o.setData(s.BombExtraSteps,r+"");break;case a.reshuffle:o.setData(s.BombReshuffle,r+"")}},t.showLoseView=function(){r.view.openView(n.Single.eloseView)},e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/globalUtils.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"9675cmWlm1NgLiawbkdCV/5","globalUtils",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/gridCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app.ts"],(function(t){var e,i,o,n,a,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,n=t.UITransform,a=t.Label,s=t.Component},function(t){c=t.App}],execute:function(){var h;i._RF.push({},"c0b3a8gzq9EQ4oCb9dGqmYg","gridCmpt",void 0);var r=o.ccclass;o.property,t("gridCmpt",r("gridCmpt")(h=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).h=0,e.v=0,e.type=-1,e.obstacleValue=0,e.data=void 0,e}e(i,t);var o=i.prototype;return o.initData=function(t,e){var i=this;this.h=t,this.v=e,this.data={h:t,v:e},-1==this.type&&(this.type=Math.floor(Math.random()*c.gameLogic.blockCount)),this.node.getChildByName("icon").children.forEach((function(t){t.active=!1,t.name=="Match"+i.type&&(t.active=!0)})),this.showPos(t,e)},o.showPos=function(t,e){void 0===t&&(t=this.h),void 0===e&&(e=this.v),this.node.getChildByName("lb").active=!1},o.isInside=function(t){var e=this.node.getComponent(n).width,i=this.node.position;return Math.abs(t.x-i.x)<=e/2&&Math.abs(t.y-i.y)<=e/2},o.setSelected=function(t){console.log("setSelected",t),this.isValid&&this.node.getChildByName("icon").children.forEach((function(e){e.active&&e.getChildByName("s")&&(e.getChildByName("s").active=t)}))},o.getMoveState=function(){return!1},o.setType=function(t){var e=this;this.isValid&&(this.type=t,this.node.getChildByName("icon").children.forEach((function(t){t.active=!1,t.name=="Match"+e.type&&(t.active=!0)})))},o.setCount=function(t){this.node.getChildByName("lb").getComponent(a).string=""+t,0==t&&(this.node.getChildByName("ok").active=!0)},o.showGou=function(t){this.node.getChildByName("gou").active=t},i}(s))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/gridManagerCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enumConst.ts","./viewNameConst.ts","./app.ts","./resLoadHelper.ts","./blockCmpt.ts"],(function(t){var r,i,e,o,n,s,a,c,l,h,u,d,p;return{setters:[function(t){r=t.inheritsLoose,i=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){o=t.cclegacy,n=t._decorator,s=t.v3,a=t.instantiate,c=t.Component},function(t){l=t.Constant},function(t){h=t.ViewName},function(t){u=t.App},function(t){d=t.ResLoadHelper},function(t){p=t.blockCmpt}],execute:function(){var f;o._RF.push({},"eb22c5yz6lMrJroha6JGvYa","gridManagerCmpt",void 0);var v=n.ccclass;n.property,t("gridManagerCmpt",v("gridManagerCmpt")(f=function(t){function o(){for(var r,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(r=t.call.apply(t,[this].concat(e))||this).blockPre=null,r.obstacleArr=[],r.blockArr=[],r.blockPosArr=[],r.H=l.layCount,r.V=l.layCount,r.rectWidth=l.Width,r.hideList=[],r}r(o,t);var n=o.prototype;return n.initGrid=function(){var t=i(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadLinePre();case 2:this.initLayout();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.loadLinePre=function(){var t=i(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.loadPieces(h.Pieces.block);case 2:this.blockPre=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.initLayout=function(){this.hideList=u.gameLogic.hideList,this.clearData();for(var t=this.rectWidth,r=0;r<this.H;r++){this.blockArr.push([]),this.blockPosArr.push([]);for(var i=0;i<this.V;i++){var e=(t+0)*(r+0)-(t+0)*(this.H-1)/2,o=(t+0)*(i+0)-(t+0)*(this.V-1)/2,n=s(e,o,1);if(this.blockPosArr[r][i]=n,u.gameLogic.checkInHideList(r,i))this.blockArr[r][i]=null;else{var a=this.addBlock(r,i,n);this.blockArr[r][i]=a}}}this.setMapBorders()},n.setMapBorders=function(){for(var t=0;t<this.H;t++)for(var r=0;r<this.V;r++){var i=this.blockArr[t][r];if(i){var e=void 0,o=void 0,n=void 0,s=null;r+1<this.V&&(e=this.blockArr[t][r+1]),r-1>=0&&(o=this.blockArr[t][r-1]),t-1>=0&&(n=this.blockArr[t-1][r]),t+1<this.H&&(s=this.blockArr[t+1][r]),i.getComponent(p).handleBorders(e,o,n,s)}}},n.addBlock=function(t,r,i){void 0===i&&(i=null);var e=a(this.blockPre);return this.node.addChild(e),e.getComponent(p).initData(t,r),i&&e.setPosition(i),e},n.clearData=function(){if(!(this.blockArr.length<1)){for(var t=0;t<this.H;t++)for(var r=0;r<this.V;r++){var i=this.blockArr[t][r];i&&i.destroy()}this.obstacleArr.forEach((function(t){return t.destroy()})),this.obstacleArr=[],this.blockArr=[],this.blockPosArr=[]}},o}(c))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/gridTargetCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./eventName.ts","./app.ts"],(function(t){var o,e,n,i,s,r,a,h;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.UITransform,s=t.Vec3,r=t.Component},function(t){a=t.EventName},function(t){h=t.App}],execute:function(){var c;e._RF.push({},"2dcbfYYRnVNMaVm4hipMIuR","gridTargetCmpt",void 0);var u=n.ccclass;n.property,t("gridTargetCmpt",u("gridTargetCmpt")(c=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this).originPos=null,o.isStart=!1,o}o(e,t);var n=e.prototype;return n.onLoad=function(){h.event.on(a.Game.TouchStart,this.evtTouchStart,this),h.event.on(a.Game.TouchMove,this.evtTouchMove,this),h.event.on(a.Game.TouchEnd,this.evtTouchEnd,this)},n.onDestroy=function(){h.event.offAll(this)},n.evtTouchStart=function(t){if(!this.isStart){var o=this.node.parent.getComponent(i).convertToNodeSpaceAR(new s(t.x,t.y,1));this.originPos=this.node.getPosition();var e=this.node.getComponent(i);Math.abs(o.x-this.originPos.x)<=e.width/2&&Math.abs(o.y-this.originPos.y)<=e.height/2&&(h.audio.play("block_back"),this.isStart=!0,o.y+=200,this.node.setPosition(o),this.node.setScale(new s(1,1,1)))}},n.evtTouchMove=function(t){if(this.isStart){var o=this.node.parent.getComponent(i).convertToNodeSpaceAR(new s(t.x,t.y,1));o.y+=200,this.node.setPosition(o)}},n.evtTouchEnd=function(t){this.isStart&&(h.event.emit(a.Game.GuildEvent,new s(t.x,t.y+100,1)),console.log(this.node.position.x),console.log(this.node.position.y),Math.abs(this.node.position.x)<35&&Math.abs(this.node.position.y)<35?this.node.setPosition(new s(0,0,0)):(this.node.setPosition(this.originPos),this.node.setScale(new s(.6,.6,.6))),this.isStart=!1)},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/homeViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts","./scrollViewCmpt.ts","./eventName.ts","./levelConfig.ts","./viewNameConst.ts","./app.ts","./cocosHelper.ts","./globalFuncHelper.ts","./advertise.ts","./randomAdManager.ts"],(function(e){var t,i,n,o,a,s,c,l,r,h,u,g,p,f,v,w,m;return{setters:[function(e){t=e.inheritsLoose,i=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e._decorator,s=e.PageView,c=e.v2},function(e){l=e.BaseViewCmpt},function(e){r=e.ScrollViewCmpt},function(e){h=e.EventName},function(e){u=e.LevelConfig},function(e){g=e.ViewName},function(e){p=e.App},function(e){f=e.CocosHelper},function(e){v=e.GlobalFuncHelper},function(e){w=e.Advertise},function(e){m=e.randomAd}],execute:function(){var d;o._RF.push({},"dce1ezTsDVBIbtvkkKPn7oJ","homeViewCmpt",void 0);var V=a.ccclass,S=(a.property,function(e){return e[e.shop=0]="shop",e[e.rank=1]="rank",e[e.home=2]="home",e[e.share=3]="share",e[e.setting=4]="setting",e}(S||{}));e("homeViewCmpt",V("homeViewCmpt")(d=function(e){function o(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).scrollview=null,t.btnNode=null,t.localBtn=null,t.home=null,t.pageView=null,t.isStart=!1,t.pageTime=.5,t.head=null,t.lbCoin=null,t.lbLife=null,t.PagesName={0:"shopBtn",1:"rankBtn",2:"homeBtn",3:"shareBtn",4:"settingBtn"},t}t(o,e);var a=o.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this),this.btnNode=this.viewList.get("bottom/btn"),this.pageView=this.viewList.get("page").getComponent(s),this.home=this.viewList.get("page/view/content/home"),this.lbLife=this.viewList.get("page/view/content/home/top/life/lbLife"),this.lbCoin=this.viewList.get("page/view/content/home/top/coin/lbCoin"),this.head=this.viewList.get("page/view/content/home/top/head"),this.localBtn=this.viewList.get("page/view/content/home/localBtn"),this.localBtn.active=!1,this.scrollview=this.viewList.get("page/view/content/home/scrollview").getComponent(r),this.scrollview.node.on("scroll-to-top",this.scrollingToTop,this),p.event.on(h.Game.UpdataGold,this.initData,this),p.event.on(h.Game.Scrolling,this.evtScrolling,this),p.event.on(h.Game.Scrolling,this.evtScrolling,this),p.event.on(h.Game.GotoShop,this.evtGotoShop,this),this.pageView.node.on("page-turning",this.evtPageView,this)},a.onDestroy=function(){e.prototype.onDestroy.call(this),p.event.off(h.Game.UpdataGold,this)},a.loadExtraData=function(){var e=i(n().mark((function e(t,i){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===i&&(i=2),p.view.closeView(g.Single.eLoadingView),p.view.closeView(g.Single.eGameView),p.view.closeView(g.Single.eAcrossView),m.tryShowRandomAd(),this.isStart=t,this.pageView.getPages().forEach((function(e,t){e.active=t==i})),console.log("this.PagesName[`${pageIndex}`]   "+this.PagesName[""+i]),this.showSelectedBtn(this.PagesName[""+i]),this.initData(),w.showBannerAds();case 11:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),a.initData=function(){var e=i(n().mark((function e(){var t,i,o,a,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.home.active){e.next=2;break}return e.abrupt("return");case 2:for(t=[],i=u.getCurLevel(),o=Math.ceil(i/8)+4,a=o;a>=1;a--)t.push(a);this.scrollview.content.removeAllChildren(),this.scrollview.initData({list:t,target:this}),s=this.scrollview.getMaxScrollOffset().y,this.scrollview.scrollToOffset(c(0,s-1024*Math.floor(i/8)),1),this.continueGame(),this.setHomeInfo();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.setHomeInfo=function(){f.updateUserHeadSpriteAsync(this.head,p.user.rankData.icon),f.updateLabelText(this.lbCoin,v.getGold()),f.updateLabelText(this.lbLife,v.getHeart())},a.continueGame=function(){this.isStart&&this.scheduleOnce((function(){var e=p.gameLogic.curLevel;p.view.openView(g.Single.eChallengeView,e)}),1)},a.evtScrolling=function(e){var t=this.scrollview.getScrollOffset().y,i=this.scrollview.getMaxScrollOffset().y,n=p.gameLogic.curLevel,o=i-1024*Math.floor(n/8),a=Math.abs(t-o);this.localBtn.active=a>1300},a.scrollingToTop=function(){var e=i(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.view.showMsgTips("先完成前面关卡即可解锁更多关卡");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.onClick_localBtn=function(){p.audio.play("button_click");var e=this.scrollview.getMaxScrollOffset().y,t=p.gameLogic.curLevel;this.scrollview.scrollToOffset(c(0,e-1024*Math.floor(t/8)),1),this.localBtn.active=!1},a.onClick_head=function(){p.audio.play("button_click"),this.showSelectedBtn("settingBtn"),this.pageView.getPages().forEach((function(e,t){e.active=t==S.setting}))},a.evtGotoShop=function(){this.showSelectedBtn("shopBtn"),this.pageView.getPages().forEach((function(e,t){e.active=t==S.shop}))},a.onClick_settingBtn=function(e){p.audio.play("button_click"),this.showSelectedBtn(e.name),this.pageView.getPages().forEach((function(e,t){e.active=t==S.setting})),this.pageView.scrollToPage(S.setting,this.pageTime)},a.onClick_shopBtn=function(e){p.audio.play("button_click"),this.showSelectedBtn(e.name),this.pageView.getPages().forEach((function(e,t){e.active=t==S.shop})),this.pageView.scrollToPage(S.shop,this.pageTime)},a.onClick_homeBtn=function(e){p.audio.play("button_click"),this.showSelectedBtn(e.name),this.pageView.getPages().forEach((function(e,t){e.active=t==S.home})),this.pageView.scrollToPage(S.home,this.pageTime),this.scrollview.content.children.length<1&&this.initData()},a.onClick_rankBtn=function(e){p.audio.play("button_click"),this.showSelectedBtn(e.name),this.pageView.getPages().forEach((function(e,t){e.active=t==S.rank})),this.pageView.scrollToPage(S.rank,this.pageTime)},a.onClick_shareBtn=function(e){p.audio.play("button_click"),this.showSelectedBtn(e.name),this.pageView.getPages().forEach((function(e,t){e.active=t==S.share})),this.pageView.scrollToPage(S.share,this.pageTime)},a.showSelectedBtn=function(e){this.btnNode.children.forEach((function(t){t.getChildByName("s").active=e==t.name,t.getChildByName("n").active=e!=t.name}))},a.evtPageView=function(e){2==e.getCurrentPageIndex()&&this.setHomeInfo()},a.onClick_sharePageBtn=function(){p.audio.play("button_click"),p.event.emit(h.Game.Share,u.getCurLevel())},a.onClick_startBtn=function(){p.audio.play("button_click"),m.tryShowRandomAd(),p.view.openView(g.Single.eGameView,u.getCurLevel())},a.onClick_levelItem=function(e,t){p.audio.play("button_click"),m.tryShowRandomAd(),p.view.openView(g.Single.eGameView,+t)},o}(l))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/i18nLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app.ts"],(function(t){var e,n,i,r,o,s,a,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Label,c=t.Component},function(t){u=t.App}],execute:function(){var l,p,f,y;o._RF.push({},"72823QIvrVMdbnG1sP5lN1F","i18nLabel",void 0);var h=s.ccclass,b=s.property;t("default",(l=b({tooltip:"语言文件中的key"}),h((y=e((f=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,i(e,"i18nKey",y,r(e)),e}n(e,t);var o=e.prototype;return o.onLoad=function(){u.i18n.register(this),this.reset()},o.onDestroy=function(){u.i18n.unregister(this)},o.setText=function(t){this.i18nKey=t,u.i18n.setText(this.getComponent(a),this.i18nKey)},o.reset=function(){this.setText(this.i18nKey)},e}(c)).prototype,"i18nKey",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=f))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/i18nManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./i18nLabel.ts","./i18nSprite.ts","./logHelper.ts","./resLoadHelper.ts","./singletonClass.ts"],(function(n){var t,e,r,a,o,i,s,u,c,f,g,p,l,h,d;return{setters:[function(n){t=n.inheritsLoose,e=n.createForOfIteratorHelperLoose,r=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){o=n.cclegacy,i=n.isValid,s=n.Label,u=n.JsonAsset,c=n.SpriteFrame},function(n){f=n.default},function(n){g=n.default},function(n){p=n.PrintLog,l=n.PrintError},function(n){h=n.ResLoadHelper},function(n){d=n.SingletonClass}],execute:function(){o._RF.push({},"e51239DgeNLz4Jdkvw+nGLs","i18nManager",void 0);n("I18nManager",function(n){function o(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return(t=n.call.apply(n,[this].concat(r))||this).curLang="cn",t.textComponent=[],t.imgComponent=[],t.textConfig=null,t.replaceArr=["data1","data2","data3","data4","data5","data6","data7","data8"],t}t(o,n);var d=o.prototype;return d.onInit=function(){var n=r(a().mark((function n(t){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),d.setLanguage=function(n){this.curLang=n,this.updateLanguage()},d.loadLuanguageCfg=function(){var n=r(a().mark((function n(){var t=this;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(r(a().mark((function n(e){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.loadCommonAssetSync("config/language",u);case 2:r=n.sent,p(r.json),t.textConfig=new Map(r.json),t.updateLanguage(),e("");case 7:case"end":return n.stop()}}),n)})))));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),d.onDestroy=function(){this.textComponent.length=0,this.imgComponent.length=0,this.textConfig.clear()},d.updateLanguage=function(){for(var n,t=e(this.textComponent);!(n=t()).done;){var r=n.value.getComponent(f);i(r)&&i(r.node)&&r.reset()}for(var a,o=e(this.imgComponent);!(a=o()).done;){var s=a.value.getComponent(g);i(s)&&i(s.node)&&s.reset()}},d.register=function(n){if(i(n)){var t=n.getComponent(s)?this.textComponent:this.imgComponent;-1===t.indexOf(n)&&t.push(n)}},d.unregister=function(n){if(i(n)){var t=n instanceof s?this.textComponent:this.imgComponent,e=t.indexOf(n);-1!==e&&t.splice(e,1)}},d.getString=function(n){var t=this;if(!this.textConfig)return"";var e=this.textConfig.get(n);if(!e)return console.warn("i18nMgr.getString("+n+") is error."),"";for(var r=e[this.curLang],a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return o.forEach((function(n,e){r=r.replace(t.replaceArr[e],n)})),r},d.setText=function(){var n=r(a().mark((function n(t,e){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.textConfig){n.next=3;break}return n.next=3,this.loadLuanguageCfg();case 3:t&&(t.string=this.getString(e));case 4:case"end":return n.stop()}}),n,this)})));return function(t,e){return n.apply(this,arguments)}}(),d.setSprite=function(){var n=r(a().mark((function n(t,e){var r,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="i18n/"+t,n.next=3,h.loadCommonAssetSync(r,c);case 3:if(o=n.sent){n.next=7;break}return l("i18n not SpriteFrame = "+r),n.abrupt("return");case 7:e(o);case 8:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),d.getLanguage=function(){return this.curLang},o}(d));o._RF.pop()}}}));

System.register("chunks:///_virtual/i18nSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app.ts"],(function(t){var e,r,i,n,o,s,a,u,c,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,a=t._decorator,u=t.Sprite,c=t.Component},function(t){l=t.App}],execute:function(){var p,f,h,g,y,d;s._RF.push({},"ed5b9yRf65BYrlBYyt6wEwZ","i18nSprite",void 0);var m=a.ccclass,v=a.property;t("default",(p=v({tooltip:"资源路径"}),f=v({tooltip:"是否都合并到一起"}),m((y=e((g=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,i(e,"url",y,n(e)),i(e,"mergeI18n",d,n(e)),e}r(e,t);var s=e.prototype;return s.onLoad=function(){l.i18n.register(this),this.reset(),this.node.active=!this.isMerge},s.onDestroy=function(){l.i18n.unregister(this)},s.setPath=function(t){this.url=t;var e=this.getComponent(u);e&&l.i18n.setSprite(t,(function(t){t&&(e.spriteFrame=t)}))},s.reset=function(){this.setPath(this.url)},o(e,[{key:"isMerge",get:function(){return this.mergeI18n}}]),e}(c)).prototype,"url",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=e(g.prototype,"mergeI18n",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=g))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/iosPlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./nativePlatform.ts"],(function(n){var t,o,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){e=n.NativePlatform}],execute:function(){o._RF.push({},"0f9bd2G/GhMsbDAom239Gwb","iosPlatform",void 0);n("IosPlatform",function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var e=o.prototype;return e.getUUid=function(){return""},e.changeOrientation=function(t){n.prototype.changeOrientation.call(this,t)},e.savePictureToAlbum=function(n){},e.copyToClipboard=function(n){},e.getClipboardContent=function(){return new Promise((function(n){n("")}))},e.getPackageName=function(){return new Promise((function(n){n("")}))},e.getAppVersion=function(){return""},e.checkIsEmulator=function(){return!1},e.sendNativeMsg=function(n,t){throw new Error("Method not implemented.")},e.receiveNativeMsg=function(n,t){throw new Error("Method not implemented.")},e.faceBookLogin=function(){return""},e.faceBookLoginOut=function(){return!1},e.loginGoogle=function(){return""},e.loginOutGoogle=function(){return!1},e.faceBookShare=function(n){return!1},e.whatsAppShare=function(n){return!1},o}(e));o._RF.pop()}}}));

System.register("chunks:///_virtual/levelConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app.ts","./resLoadHelper.ts","./storageHelper.ts"],(function(e){var t,n,r,a,u,o,i,s;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e.JsonAsset},function(e){u=e.App},function(e){o=e.ResLoadHelper},function(e){i=e.StorageHelper,s=e.StorageHelperKey}],execute:function(){r._RF.push({},"6a5afnhfjdG+bGgTJol9IOX","levelConfig",void 0);e("LevelConfig",new(function(){function e(){}var r=e.prototype;return r.nextLevel=function(){var e=+this.getCurLevel();i.setData(s.Level,e+1),u.gameLogic.curLevel=e+1},r.getCurLevel=function(){return+i.getData(s.Level,1)},r.getLevelData=function(){var e=t(n().mark((function e(t){var r,a,u,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGridData(t);case 2:for(r=e.sent,a=[],u=0;u<r.mapData[0].m_id.length;u++)(o=r.mapData[0].m_id[u])>5&&(r.mapData[0].m_id[u]=this.handleIdArr(o)),a.indexOf(r.mapData[0].m_id[u])<0&&a.push(r.mapData[0].m_id[u]);return r.mapData[0].m_id=a,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.handleIdArr=function(e){return{50:0,51:1,100:2,201:3,208:4,420:0,400:1,404:2,409:3,410:4,411:0,412:1,413:2,415:3,416:4,417:0,418:1,423:2}[""+e]||0},r.getGridData=function(){var e=t(n().mark((function e(t){var r,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t>1700&&(t=1700),e.next=3,o.loadCommonAssetSync("config/"+t,a);case 3:return r=e.sent,u=r.json,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.setLevelStar=function(e,t){i.setData(s.Star+e,t)},r.getLevelStar=function(e){return+i.getData(s.Star+e)},e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/loadingViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts","./viewNameConst.ts","./app.ts","./audioManager.ts","./cocosHelper.ts","./resLoadHelper.ts"],(function(e){var t,o,n,r,i,s,a,p,c,u,l,d;return{setters:[function(e){t=e.inheritsLoose,o=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,i=e._decorator,s=e.UITransform},function(e){a=e.BaseViewCmpt},function(e){p=e.ViewName},function(e){c=e.App},function(e){u=e.SoundType},function(e){l=e.CocosHelper},function(e){d=e.ResLoadHelper}],execute:function(){var h;r._RF.push({},"6e08ewpp+dDfJKiZzTsPKh3","loadingViewCmpt",void 0);var f=i.ccclass;e("loadingViewCmpt",f("loadingViewCmpt")(h=function(e){function r(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).spPro=null,t.spProWidth=0,t.lbPro=null,t}t(r,e);var i=r.prototype;return i.onLoad=function(){e.prototype.onLoad.call(this),this.lbPro=this.viewList.get("lbPro"),this.spPro=this.viewList.get("spPro"),this.spProWidth=this.spPro.getComponent(s).width,this.spPro.getComponent(s).width=0,l.updateLabelText(this.lbPro,"Loading... 0.00%",!1),this.startLoadResources(),c.audio.play("background",u.Music,!0)},i.startLoadResources=function(){var e=this;d.preloadPath(["./prefab/ui/acrossView","./prefab/ui/homeView","./prefab/ui/gameView"],(function(t,o,n){var r=(t/o*100).toFixed(2)+"%";e.spPro&&(e.spPro.getComponent(s).width=t/o*e.spProWidth,l.updateLabelText(e.lbPro,"Loading... "+r,!1))}),o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scheduleOnce((function(){c.view.openView(p.Single.eAcrossView)}),1);case 1:case"end":return t.stop()}}),t)}))),o(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))))},r}(a))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/logHelper.ts",["cc","./globalFuncHelper.ts"],(function(r){var t,n,o;return{setters:[function(r){t=r.cclegacy,n=r.js},function(r){o=r.GlobalFuncHelper}],execute:function(){t._RF.push({},"47d63LVxThPM7D5WLhtj0lY","logHelper",void 0);var e=new(function(){function r(){this.Is_Print_Log=!0}var t=r.prototype;return t.printLog=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var l="log:  "+JSON.stringify(Array.prototype.slice.call(arguments));if(o.pushDebugInfo(l),e.Is_Print_Log){var c=console.log||print;c.call(this,"%c%s"+JSON.stringify(Array.prototype.slice.call(arguments)),"color:#857F7F;",r.stack(2))}},t.printNet=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var l="<color=#ff00ff>net:  "+JSON.stringify(Array.prototype.slice.call(arguments))+"</c>";if(o.pushDebugInfo(l),e.Is_Print_Log){var c=console.log||print;c.call(this,"%c%s"+JSON.stringify(Array.prototype.slice.call(arguments)),"color:#00D1FF;",r.stack(2))}},t.printError=function(){for(var t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];var c="<color=#ff0000>err:  "+i+"</c>";if(o.pushDebugInfo(c),e.Is_Print_Log){var s=console.log||print;s.call(this,"%c%s"+n.formatStr.apply(cc,arguments),"color:red",r.stack(2)),console.error("error trace")}},t.getDateString=function(){var r=new Date,t="",n=String(r.getFullYear());return t+=n+"-",t+=(n=String(r.getMonth()))+"-",t+=(n=String(r.getDay()))+" ",t+=(1==(n=String(r.getHours())).length?"0"+n:n)+":",t+=(1==(n=String(r.getMinutes())).length?"0"+n:n)+":",t="["+(t+=(1==(n=String(r.getSeconds())).length?"0"+n:n)+"")+"]"},r.stack=function(r){var t=(new Error).stack.split("\n");t.shift();var n=[];t.forEach((function(r){var t,o=(r=r.substring(7)).split(" ");o.length<2?n.push(o[0]):n.push(((t={})[o[0]]=o[1],t))}));var o=[];if(r<n.length-1)for(var e in n[r])o.push(e);var i=o[0].split(".");return i[0]+"->"+i[1]+": "},r}());r("PrintLog",e.printLog),r("PrintNet",e.printNet),r("PrintError",e.printError);t._RF.pop()}}}));

System.register("chunks:///_virtual/loginViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts","./app.ts","./eventName.ts"],(function(t){var e,n,i,s,r,o,a,u,l,c,p,h,g,d,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized,r=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){a=t.cclegacy,u=t._decorator,l=t.EditBox,c=t.Button,p=t.Label,h=t.Node},function(t){g=t.BaseViewCmpt},function(t){d=t.App},function(t){b=t.EventName}],execute:function(){var f,w,L,v,m,B,y,I,T,S,C,k,R,x,z,V,M,E,U,D,N;a._RF.push({},"bab6aO5//VOvJHYarf4OOeU","loginViewCmpt",void 0);var P=u.ccclass,G=u.property;t("LoginViewCmpt",(f=P("loginViewCmpt"),w=G(l),L=G(l),v=G(l),m=G(c),B=G(c),y=G(p),I=G(h),T=G(c),S=G(c),f((R=e((k=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"pidInput",R,s(e)),i(e,"nameInput",x,s(e)),i(e,"passwordInput",z,s(e)),i(e,"loginBtn",V,s(e)),i(e,"registerBtn",M,s(e)),i(e,"statusLabel",E,s(e)),i(e,"InputContainer",U,s(e)),i(e,"switchToRegisterBtn",D,s(e)),i(e,"switchToLoginBtn",N,s(e)),e.currentMode="login",e}n(e,t);var a=e.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this),this.initUI(),this.setMode("login")},a.initUI=function(){this.bindEvents()},a.bindEvents=function(){var t=this;this.loginBtn&&this.loginBtn.node.on(c.EventType.CLICK,this.onLoginClick,this),this.registerBtn&&this.registerBtn.node.on(c.EventType.CLICK,this.onRegisterClick,this),this.switchToRegisterBtn&&this.switchToRegisterBtn.node.on(c.EventType.CLICK,(function(){return t.setMode("register")}),this),this.switchToLoginBtn&&this.switchToLoginBtn.node.on(c.EventType.CLICK,(function(){return t.setMode("login")}),this)},a.setMode=function(t){this.currentMode=t,"login"===t?(console.log("登录模式"),this.nameInput&&(this.nameInput.node.active=!1),this.loginBtn&&(this.loginBtn.node.active=!0),this.registerBtn&&(this.registerBtn.node.active=!1),this.switchToRegisterBtn&&(this.switchToRegisterBtn.node.active=!0),this.switchToLoginBtn&&(this.switchToLoginBtn.node.active=!1)):(console.log("注册模式"),this.nameInput&&(this.nameInput.node.active=!1),this.loginBtn&&(this.loginBtn.node.active=!1),this.registerBtn&&(this.registerBtn.node.active=!0),this.switchToRegisterBtn&&(this.switchToRegisterBtn.node.active=!1),this.switchToLoginBtn&&(this.switchToLoginBtn.node.active=!0)),this.updateStatusLabel("")},a.onRegisterClick=function(){var t=r(o().mark((function t(){var e,n,i,s,r,a=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("注册按钮点击"),i=null==(e=this.pidInput)||null==(e=e.string)?void 0:e.trim(),s="test"+Date.now()+Math.floor(1e4*Math.random()),r=null==(n=this.passwordInput)||null==(n=n.string)?void 0:n.trim(),i&&s&&r){t.next=7;break}return this.updateStatusLabel("Please provide complete information"),t.abrupt("return");case 7:if(!(r.length<6)){t.next=10;break}return this.updateStatusLabel("Password must be at least 6 characters long"),t.abrupt("return");case 10:return this.updateStatusLabel("Testing network connection..."),t.next=13,d.user.testSimpleConnection();case 13:if(t.sent){t.next=17;break}return this.updateStatusLabel("Network connection failed, please check your internet"),t.abrupt("return");case 17:return this.updateStatusLabel("Registering..."),t.prev=18,t.next=21,d.user.registerUser(i,s,r);case 21:if(!t.sent){t.next=30;break}return this.updateStatusLabel("Register successful! Logging in..."),t.next=26,d.user.loginUser(i,r);case 26:t.sent?(this.updateStatusLabel("Register and login successful!"),setTimeout((function(){a.closeLoginView()}),1e3)):this.updateStatusLabel("Register successful, but login failed"),t.next=31;break;case 30:this.updateStatusLabel("Register failed, player ID may already exist");case 31:t.next=37;break;case 33:t.prev=33,t.t0=t.catch(18),this.updateStatusLabel("Register failed, please try again"),console.error("Register failed:",t.t0);case 37:case"end":return t.stop()}}),t,this,[[18,33]])})));return function(){return t.apply(this,arguments)}}(),a.onLoginClick=function(){var t=r(o().mark((function t(){var e,n,i,s,r=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("登录按钮点击"),i=null==(e=this.pidInput)||null==(e=e.string)?void 0:e.trim(),s=null==(n=this.passwordInput)||null==(n=n.string)?void 0:n.trim(),i&&s){t.next=6;break}return this.updateStatusLabel("Please provide complete information"),t.abrupt("return");case 6:return this.updateStatusLabel("Testing network connection..."),t.next=9,d.user.testSimpleConnection();case 9:if(t.sent){t.next=13;break}return this.updateStatusLabel("Network connection failed, please check your internet"),t.abrupt("return");case 13:return this.updateStatusLabel("Logging in..."),t.prev=14,t.next=17,d.user.loginUser(i,s);case 17:t.sent?(this.updateStatusLabel("Login successful!"),setTimeout((function(){r.closeLoginView()}),1e3)):this.updateStatusLabel("Login failed, please check account password"),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(14),this.updateStatusLabel("Login failed, please try again"),console.error("登录失败:",t.t0);case 25:case"end":return t.stop()}}),t,this,[[14,21]])})));return function(){return t.apply(this,arguments)}}(),a.updateStatusLabel=function(t){this.statusLabel&&(this.statusLabel.string=t)},a.closeLoginView=function(){console.log("Close login view"),this.node.active=!1,d.event.emit(b.Game.LoginSuccess),d.event.emit(b.Game.UpdataGold)},a.showLoginView=function(){console.log("Show login view"),this.node.active=!0,this.setMode("login"),this.clearInputs()},a.clearInputs=function(){console.log("Clear inputs"),this.pidInput&&(this.pidInput.string=""),this.nameInput&&(this.nameInput.string=""),this.passwordInput&&(this.passwordInput.string=""),this.updateStatusLabel("")},e}(g)).prototype,"pidInput",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(k.prototype,"nameInput",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(k.prototype,"passwordInput",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(k.prototype,"loginBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(k.prototype,"registerBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(k.prototype,"statusLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(k.prototype,"InputContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(k.prototype,"switchToRegisterBtn",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(k.prototype,"switchToLoginBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=k))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/loginViewConfig.ts",["cc"],(function(T){var I;return{setters:[function(T){I=T.cclegacy}],execute:function(){I._RF.push({},"ed29aGOHwFHfbtNVPvY3muT","loginViewConfig",void 0);var N=T("LoginViewConfig",function(){function T(){}return T.getValidationError=function(T,I){switch(T){case"pid":if(!I||""===I.trim())return"请输入玩家ID";if(I.length>this.VALIDATION.MAX_PID_LENGTH)return"玩家ID不能超过"+this.VALIDATION.MAX_PID_LENGTH+"个字符";break;case"name":if(!I||""===I.trim())return"请输入昵称";if(I.length>this.VALIDATION.MAX_NAME_LENGTH)return"昵称不能超过"+this.VALIDATION.MAX_NAME_LENGTH+"个字符";break;case"password":if(!I||""===I.trim())return"请输入密码";if(I.length<this.VALIDATION.MIN_PASSWORD_LENGTH)return"密码至少"+this.VALIDATION.MIN_PASSWORD_LENGTH+"位"}return""},T.getStatusColor=function(T){switch(T){case"success":return this.COLORS.SUCCESS;case"error":return this.COLORS.ERROR;case"info":default:return this.COLORS.TEXT_SECONDARY}},T}());N.UI_COMPONENTS={PID_INPUT:"pidInput",NAME_INPUT:"nameInput",PASSWORD_INPUT:"passwordInput",LOGIN_BTN:"loginBtn",REGISTER_BTN:"registerBtn",SWITCH_TO_REGISTER_BTN:"switchToRegisterBtn",SWITCH_TO_LOGIN_BTN:"switchToLoginBtn",STATUS_LABEL:"statusLabel",TITLE_LABEL:"titleLabel",BACKGROUND:"background",CONTENT:"content"},N.DEFAULT_TEXTS={TITLE:"游戏登录",PID_PLACEHOLDER:"请输入玩家ID",NAME_PLACEHOLDER:"请输入昵称",PASSWORD_PLACEHOLDER:"请输入密码",LOGIN_BTN:"登录",REGISTER_BTN:"注册",SWITCH_TO_REGISTER:"注册新账号",SWITCH_TO_LOGIN:"已有账号",STATUS_EMPTY:"",STATUS_LOADING:"处理中...",STATUS_SUCCESS:"操作成功！",STATUS_ERROR:"操作失败，请重试"},N.COLORS={PRIMARY:"#4CAF50",SECONDARY:"#2196F3",ERROR:"#FF5722",SUCCESS:"#4CAF50",BACKGROUND:"#FFFFFF",INPUT_BG:"#F5F5F5",TEXT_PRIMARY:"#333333",TEXT_SECONDARY:"#666666",WHITE:"#FFFFFF"},N.SIZES={CONTENT_WIDTH:400,CONTENT_HEIGHT:500,INPUT_WIDTH:300,INPUT_HEIGHT:40,BUTTON_WIDTH:140,BUTTON_HEIGHT:40,SWITCH_BUTTON_WIDTH:120,SWITCH_BUTTON_HEIGHT:30},N.SPACING={CONTAINER_PADDING:20,COMPONENT_MARGIN:15,BUTTON_MARGIN:20},N.FONT_SIZES={TITLE:24,BUTTON:16,INPUT:14,STATUS:14,SWITCH:12},N.VALIDATION={MIN_PASSWORD_LENGTH:6,MAX_PID_LENGTH:20,MAX_NAME_LENGTH:30},N.ANIMATION={FADE_DURATION:.3,BUTTON_SCALE:.95,BUTTON_DURATION:.1,BORDER_DURATION:.2},I._RF.pop()}}}));

System.register("chunks:///_virtual/loginViewTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app.ts","./eventName.ts"],(function(e){var t,n,o,s,r,c,i,a;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,r=e._decorator,c=e.Component},function(e){i=e.App},function(e){a=e.EventName}],execute:function(){var u;s._RF.push({},"cd21e/OuvhODpYVGjgdifGZ","loginViewTest",void 0);var l=r.ccclass;r.property,e("LoginViewTest",l("loginViewTest")(u=function(e){function s(){return e.apply(this,arguments)||this}t(s,e);var r=s.prototype;return r.onLoad=function(){i.event.on(a.Game.LoginSuccess,this.onLoginSuccess,this),i.event.on(a.Game.LoginFailed,this.onLoginFailed,this),i.event.on(a.Game.RegisterSuccess,this.onRegisterSuccess,this),i.event.on(a.Game.RegisterFailed,this.onRegisterFailed,this)},r.onDestroy=function(){i.event.off(a.Game.LoginSuccess,this),i.event.off(a.Game.LoginFailed,this),i.event.off(a.Game.RegisterSuccess,this),i.event.off(a.Game.RegisterFailed,this)},r.testLogin=function(){var e=n(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("=== 测试登录功能 ==="),t="testplayer"+Date.now(),"123456",e.prev=3,e.next=6,i.user.loginUser(t,"123456");case 6:e.sent?console.log("✅ 登录测试成功"):console.log("❌ 登录测试失败 - 用户不存在"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("❌ 登录测试异常:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),r.testRegister=function(){var e=n(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("=== 测试注册功能 ==="),t="testplayer"+Date.now(),"Test Player",n="123456",e.prev=4,e.next=7,i.user.registerUser(t,"Test Player",n);case 7:if(!e.sent){e.next=14;break}return console.log("✅ 注册测试成功"),e.next=12,this.testLoginAfterRegister(t,n);case 12:e.next=15;break;case 14:console.log("❌ 注册测试失败");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),console.error("❌ 注册测试异常:",e.t0);case 20:case"end":return e.stop()}}),e,this,[[4,17]])})));return function(){return e.apply(this,arguments)}}(),r.testLoginAfterRegister=function(){var e=n(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("=== 测试注册后登录 ==="),e.prev=1,e.next=4,i.user.loginUser(t,n);case 4:e.sent?console.log("✅ 注册后登录测试成功"):console.log("❌ 注册后登录测试失败"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("❌ 注册后登录测试异常:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),r.testDataSync=function(){var e=n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("=== 测试数据同步 ==="),i.user.isLoggedIn){e.next=4;break}return console.log("❌ 用户未登录，无法测试数据同步"),e.abrupt("return");case 4:return e.prev=4,e.next=7,i.user.updateUserData({level:10,gold:1e3});case 7:e.sent?(console.log("✅ 数据同步测试成功"),console.log("当前用户数据:",i.user.currentUser)):console.log("❌ 数据同步测试失败"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("❌ 数据同步测试异常:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),r.testLogout=function(){console.log("=== 测试登出功能 ==="),i.user.logout(),console.log("✅ 登出测试成功"),console.log("登录状态:",i.user.isLoggedIn)},r.onLoginSuccess=function(){console.log("🎉 登录成功事件触发")},r.onLoginFailed=function(){console.log("💥 登录失败事件触发")},r.onRegisterSuccess=function(){console.log("🎉 注册成功事件触发")},r.onRegisterFailed=function(){console.log("💥 注册失败事件触发")},r.runAllTests=function(){var e=n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("🚀 开始运行登录界面测试...\n"),e.next=3,this.testRegister();case 3:return console.log(""),e.next=6,this.testLogin();case 6:return console.log(""),e.next=9,this.testDataSync();case 9:console.log(""),this.testLogout(),console.log(""),console.log("✅ 所有测试完成！");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.onClick_testRegister=function(){this.testRegister()},r.onClick_testLogin=function(){this.testLogin()},r.onClick_testDataSync=function(){this.testDataSync()},r.onClick_testLogout=function(){this.testLogout()},r.onClick_runAllTests=function(){this.runAllTests()},s}(c))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./baseNodeCmpt.ts","./baseViewCmpt.ts","./dropdown.ts","./i18nLabel.ts","./i18nSprite.ts","./prefabPool.ts","./rotateSelf.ts","./scrollItemCmpt.ts","./scrollViewCmpt.ts","./environment.ts","./environmentDebug.ts","./serverConfig.ts","./cameraCmpt.ts","./enumConst.ts","./eventName.ts","./levelConfig.ts","./modleNameConst.ts","./rankConfig.ts","./viewNameConst.ts","./app.ts","./audioManager.ts","./dataSyncManager.ts","./eventManager.ts","./i18nManager.ts","./noticeManager.ts","./payManager.ts","./paymentModeManager.ts","./platformManager.ts","./singletonClass.ts","./subGameManager.ts","./timeManager.ts","./userInfo.ts","./viewManager.ts","./DyManager.ts","./screenRayCmpt.ts","./gameLogic.ts","./mainCmpt.ts","./tileCmpt.ts","./characterCmpt.ts","./startCmpt.ts","./AdminViewCmpt.ts","./acrossViewCmpt.ts","./buyViewCmpt.ts","./challengeViewCmpt.ts","./gameViewCmpt.ts","./gridManagerCmpt.ts","./homeViewCmpt.ts","./blockCmpt.ts","./gridCmpt.ts","./gridTargetCmpt.ts","./mapCmpt.ts","./rankItemCmpt.ts","./rocketCmpt.ts","./loadingViewCmpt.ts","./loginViewCmpt.ts","./loginViewConfig.ts","./loginViewTest.ts","./rankCmpt.ts","./resultViewCmpt.ts","./settingViewCmpt.ts","./tipsViewCmpt.ts","./dataviewUtils.ts","./err.ts","./globalUtils.ts","./net.ts","./routers.ts","./util.ts","./cocosHelper.ts","./globalFuncHelper.ts","./logHelper.ts","./md5.ts","./androidPlatform.ts","./basePlatform.ts","./iosPlatform.ts","./nativePlatform.ts","./webPlatform.ts","./randomAdManager.ts","./resLoadHelper.ts","./storageHelper.ts","./toolsHelper.ts","./advertise.ts","./wxManager.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/mainCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseNodeCmpt.ts","./enumConst.ts","./eventName.ts","./levelConfig.ts","./viewNameConst.ts","./app.ts"],(function(e){var t,n,i,o,a,r,c,s,u,p,v,l,m,f,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,c=e.Node,s=e.input,u=e.Input},function(e){p=e.BaseNodeCmpt},function(e){v=e.Direction},function(e){l=e.EventName},function(e){m=e.LevelConfig},function(e){f=e.ViewName},function(e){d=e.App}],execute:function(){var y,C,h,g,w;a._RF.push({},"d77436CXCBN8qV/PO2/BFVK","mainCmpt",void 0);var L=r.ccclass,N=r.property;e("mainCmpt",(y=L("mainCmpt"),C=N(c),y((w=t((g=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"canvase",w,o(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this),d.init(this.canvase),this.initView(),this.connectServer()},a.addEvent=function(){s.on(u.EventType.KEY_DOWN,this.evtKeyDown,this),s.on(u.EventType.KEY_UP,this.evtKeyUp,this)},a.initView=function(){d.gameLogic.curLevel=m.getCurLevel(),d.view.openView(f.Single.eLoadingView)},a.evtKeyDown=function(e){68==e.keyCode&&d.event.emit(l.Game.Move,v.right),65==e.keyCode&&d.event.emit(l.Game.Move,v.left),87==e.keyCode&&d.event.emit(l.Game.Move,v.up),83==e.keyCode&&d.event.emit(l.Game.Move,v.down)},a.evtKeyUp=function(e){d.event.emit(l.Game.EndMove)},a.connectServer=function(){},t}(p)).prototype,"canvase",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/mapCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scrollItemCmpt.ts","./levelConfig.ts","./viewNameConst.ts","./app.ts","./cocosHelper.ts"],(function(e){var t,i,o,a,n,c,r,l,s,p,v;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,o=e._decorator,a=e.Sprite,n=e.UITransform,c=e.v3},function(e){r=e.default},function(e){l=e.LevelConfig},function(e){s=e.ViewName},function(e){p=e.App},function(e){v=e.CocosHelper}],execute:function(){var u;i._RF.push({},"d426dp/1rBAp4Y33skK/g5G","mapCmpt",void 0);var h=o.ccclass;o.property,e("mapCmpt",h("mapCmpt")(u=function(e){function i(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).index=0,t.local=null,t}t(i,e);var o=i.prototype;return o.onLoad=function(){for(var t=1;t<9;t++)this["onClick_"+t]=this.onClick_Item.bind(this);e.prototype.onLoad.call(this),this.local=this.viewList.get("local")},o.initData=function(e){var t=null;this.node.children.forEach((function(i){var o=e%8;0==o&&(o=8),i.active=i.name=="map"+o,i.active&&(t=i)}));var i=p.gameLogic.curLevel;this.index=e;for(var o=1;o<9;o++){var n=t.getChildByName(""+o),c=8*(e-1)+o;v.updateLabelText(n.getChildByName("lv"),8*(e-1)+o),n.getComponent(a).grayscale=c>i,this.handleStar(n,c)}},o.handleStar=function(e,t){for(var i=p.gameLogic.curLevel,o=+l.getLevelStar(t)||0,a=t<=i&&o>0,r=1;r<4;r++)e.getChildByName("star"+r).active=a;if(a)for(var s=1;s<4;s++)e.getChildByName("star"+s).getChildByName("s").active=s<=o;if(t==i){var v=this.node.getComponent(n).convertToNodeSpaceAR(e.worldPosition);this.local.active=!0,this.local.setPosition(c(v.x,v.y+60,1))}},o.onClick_Item=function(e){p.audio.play("button_click");var t=p.gameLogic.curLevel,i=8*(this.index-1)+ +e.name;i>t?p.view.showMsgTips("请先完成前面的关卡"):p.view.openView(s.Single.eChallengeView,i)},i}(r))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/md5.ts",["cc"],(function(t){var h;return{setters:[function(t){h=t.cclegacy}],execute:function(){h._RF.push({},"e5e08DXXdJGQpcMEVUKCYAo","md5",void 0);var r=t("MD5",function(){function t(){}return t.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.any_md5=function(t,h){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),h)},t.hex_hmac_md5=function(t,h){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(h)))},t.b64_hmac_md5=function(t,h){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(h)))},t.any_hmac_md5=function(t,h,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(h)),r)},t.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.rstr_hmac_md5=function(t,h){var r=this.rstr2binl(t);r.length>16&&(r=this.binl_md5(r,8*t.length));for(var i=Array(16),s=Array(16),d=0;d<16;d++)i[d]=909522486^r[d],s[d]=1549556828^r[d];var n=this.binl_md5(i.concat(this.rstr2binl(h)),512+8*h.length);return this.binl2rstr(this.binl_md5(s.concat(n),640))},t.rstr2hex=function(t){for(var h,r=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",s=0;s<t.length;s++)h=t.charCodeAt(s),i+=r.charAt(h>>>4&15)+r.charAt(15&h);return i},t.rstr2b64=function(t){for(var h="",r=t.length,i=0;i<r;i+=3)for(var s=t.charCodeAt(i)<<16|(i+1<r?t.charCodeAt(i+1)<<8:0)|(i+2<r?t.charCodeAt(i+2):0),d=0;d<4;d++)8*i+6*d>8*t.length?h+=this.b64pad:h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>>6*(3-d)&63);return h},t.rstr2any=function(t,h){var r,i,s,d,n,_=h.length,m=Array(Math.ceil(t.length/2));for(r=0;r<m.length;r++)m[r]=t.charCodeAt(2*r)<<8|t.charCodeAt(2*r+1);var f=Math.ceil(8*t.length/(Math.log(h.length)/Math.log(2))),e=Array(f);for(i=0;i<f;i++){for(n=Array(),d=0,r=0;r<m.length;r++)d=(d<<16)+m[r],d-=(s=Math.floor(d/_))*_,(n.length>0||s>0)&&(n[n.length]=s);e[i]=d,m=n}var a="";for(r=e.length-1;r>=0;r--)a+=h.charAt(e[r]);return a},t.str2rstr_utf8=function(t){for(var h,r,i="",s=-1;++s<t.length;)h=t.charCodeAt(s),r=s+1<t.length?t.charCodeAt(s+1):0,55296<=h&&h<=56319&&56320<=r&&r<=57343&&(h=65536+((1023&h)<<10)+(1023&r),s++),h<=127?i+=String.fromCharCode(h):h<=2047?i+=String.fromCharCode(192|h>>>6&31,128|63&h):h<=65535?i+=String.fromCharCode(224|h>>>12&15,128|h>>>6&63,128|63&h):h<=2097151&&(i+=String.fromCharCode(240|h>>>18&7,128|h>>>12&63,128|h>>>6&63,128|63&h));return i},t.rstr2binl=function(t){for(var h=Array(t.length>>2),r=0;r<h.length;r++)h[r]=0;for(var i=0;i<8*t.length;i+=8)h[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return h},t.binl2rstr=function(t){for(var h="",r=0;r<32*t.length;r+=8)h+=String.fromCharCode(t[r>>5]>>>r%32&255);return h},t.binl_md5=function(t,h){t[h>>5]|=128<<h%32,t[14+(h+64>>>9<<4)]=h;for(var r=1732584193,i=-271733879,s=-1732584194,d=271733878,n=0;n<t.length;n+=16){var _=r,m=i,f=s,e=d;r=this.md5_ff(r,i,s,d,t[n+0],7,-680876936),d=this.md5_ff(d,r,i,s,t[n+1],12,-389564586),s=this.md5_ff(s,d,r,i,t[n+2],17,606105819),i=this.md5_ff(i,s,d,r,t[n+3],22,-1044525330),r=this.md5_ff(r,i,s,d,t[n+4],7,-176418897),d=this.md5_ff(d,r,i,s,t[n+5],12,1200080426),s=this.md5_ff(s,d,r,i,t[n+6],17,-1473231341),i=this.md5_ff(i,s,d,r,t[n+7],22,-45705983),r=this.md5_ff(r,i,s,d,t[n+8],7,1770035416),d=this.md5_ff(d,r,i,s,t[n+9],12,-1958414417),s=this.md5_ff(s,d,r,i,t[n+10],17,-42063),i=this.md5_ff(i,s,d,r,t[n+11],22,-1990404162),r=this.md5_ff(r,i,s,d,t[n+12],7,1804603682),d=this.md5_ff(d,r,i,s,t[n+13],12,-40341101),s=this.md5_ff(s,d,r,i,t[n+14],17,-1502002290),i=this.md5_ff(i,s,d,r,t[n+15],22,1236535329),r=this.md5_gg(r,i,s,d,t[n+1],5,-165796510),d=this.md5_gg(d,r,i,s,t[n+6],9,-1069501632),s=this.md5_gg(s,d,r,i,t[n+11],14,643717713),i=this.md5_gg(i,s,d,r,t[n+0],20,-373897302),r=this.md5_gg(r,i,s,d,t[n+5],5,-701558691),d=this.md5_gg(d,r,i,s,t[n+10],9,38016083),s=this.md5_gg(s,d,r,i,t[n+15],14,-660478335),i=this.md5_gg(i,s,d,r,t[n+4],20,-405537848),r=this.md5_gg(r,i,s,d,t[n+9],5,568446438),d=this.md5_gg(d,r,i,s,t[n+14],9,-1019803690),s=this.md5_gg(s,d,r,i,t[n+3],14,-187363961),i=this.md5_gg(i,s,d,r,t[n+8],20,1163531501),r=this.md5_gg(r,i,s,d,t[n+13],5,-1444681467),d=this.md5_gg(d,r,i,s,t[n+2],9,-51403784),s=this.md5_gg(s,d,r,i,t[n+7],14,1735328473),i=this.md5_gg(i,s,d,r,t[n+12],20,-1926607734),r=this.md5_hh(r,i,s,d,t[n+5],4,-378558),d=this.md5_hh(d,r,i,s,t[n+8],11,-2022574463),s=this.md5_hh(s,d,r,i,t[n+11],16,1839030562),i=this.md5_hh(i,s,d,r,t[n+14],23,-35309556),r=this.md5_hh(r,i,s,d,t[n+1],4,-1530992060),d=this.md5_hh(d,r,i,s,t[n+4],11,1272893353),s=this.md5_hh(s,d,r,i,t[n+7],16,-155497632),i=this.md5_hh(i,s,d,r,t[n+10],23,-1094730640),r=this.md5_hh(r,i,s,d,t[n+13],4,681279174),d=this.md5_hh(d,r,i,s,t[n+0],11,-358537222),s=this.md5_hh(s,d,r,i,t[n+3],16,-722521979),i=this.md5_hh(i,s,d,r,t[n+6],23,76029189),r=this.md5_hh(r,i,s,d,t[n+9],4,-640364487),d=this.md5_hh(d,r,i,s,t[n+12],11,-421815835),s=this.md5_hh(s,d,r,i,t[n+15],16,530742520),i=this.md5_hh(i,s,d,r,t[n+2],23,-995338651),r=this.md5_ii(r,i,s,d,t[n+0],6,-198630844),d=this.md5_ii(d,r,i,s,t[n+7],10,1126891415),s=this.md5_ii(s,d,r,i,t[n+14],15,-1416354905),i=this.md5_ii(i,s,d,r,t[n+5],21,-57434055),r=this.md5_ii(r,i,s,d,t[n+12],6,1700485571),d=this.md5_ii(d,r,i,s,t[n+3],10,-1894986606),s=this.md5_ii(s,d,r,i,t[n+10],15,-1051523),i=this.md5_ii(i,s,d,r,t[n+1],21,-2054922799),r=this.md5_ii(r,i,s,d,t[n+8],6,1873313359),d=this.md5_ii(d,r,i,s,t[n+15],10,-30611744),s=this.md5_ii(s,d,r,i,t[n+6],15,-1560198380),i=this.md5_ii(i,s,d,r,t[n+13],21,1309151649),r=this.md5_ii(r,i,s,d,t[n+4],6,-145523070),d=this.md5_ii(d,r,i,s,t[n+11],10,-1120210379),s=this.md5_ii(s,d,r,i,t[n+2],15,718787259),i=this.md5_ii(i,s,d,r,t[n+9],21,-343485551),r=this.safe_add(r,_),i=this.safe_add(i,m),s=this.safe_add(s,f),d=this.safe_add(d,e)}return[r,i,s,d]},t.md5_cmn=function(t,h,r,i,s,d){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(h,t),this.safe_add(i,d)),s),r)},t.md5_ff=function(t,h,r,i,s,d,n){return this.md5_cmn(h&r|~h&i,t,h,s,d,n)},t.md5_gg=function(t,h,r,i,s,d,n){return this.md5_cmn(h&i|r&~i,t,h,s,d,n)},t.md5_hh=function(t,h,r,i,s,d,n){return this.md5_cmn(h^r^i,t,h,s,d,n)},t.md5_ii=function(t,h,r,i,s,d,n){return this.md5_cmn(r^(h|~i),t,h,s,d,n)},t.safe_add=function(t,h){var r=(65535&t)+(65535&h);return(t>>16)+(h>>16)+(r>>16)<<16|65535&r},t.bit_rol=function(t,h){return t<<h|t>>>32-h},t}());r.hexcase=0,r.b64pad="",h._RF.pop()}}}));

System.register("chunks:///_virtual/modleNameConst.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var o,n,c;e("ModleNameConst",void 0),t._RF.push({},"3b8168Bp4tLiJOWyyhLQpSH","modleNameConst",void 0),n=o||(o=e("ModleNameConst",{})),c=function(e){return e.map="map",e.t3dNode="3d",e}({}),n.modle=c,t._RF.pop()}}}));

System.register("chunks:///_virtual/nativePlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePlatform.ts"],(function(e){var o,t,a;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy},function(e){a=e.BasePlatform}],execute:function(){t._RF.push({},"2ada30nhNlOw6+KiODWW115","nativePlatform",void 0);e("Native_Operation",function(e){return e.GetUUid="GetUUid",e.ChangeOrientation="ChangeOrientation",e.SavePicture="SavePicture",e.CopyToClipboard="CopyToClipboard",e.GetClipboardContent="GetClipboardContent",e.GetPackageName="GetPackageName",e.GetAppVersion="GetAppVersion",e.CheckIsEmulator="CheckIsEmulator",e.FaceBookLogin="FaceBookLogin",e.FaceBookOut="FaceBookOut",e.FaceBookShare="FaceBookShare",e.WhatsAppShare="WhatsAppShare",e.LoginGoogle="LoginGoogle",e.LoginOutGoogle="LoginOutGoogle",e}({})),e("NativePlatform",function(e){function t(){for(var o,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(o=e.call.apply(e,[this].concat(a))||this).isPortrait=!1,o}o(t,e);var a=t.prototype;return a.loadGame=function(e){return new Promise((function(e){e("")}))},a.savePicture=function(e){},t}(a));t._RF.pop()}}}));

System.register("chunks:///_virtual/net.ts",["cc","./dataviewUtils.ts","./routers.ts","./util.ts","./app.ts","./eventName.ts"],(function(t){var n,e,i,s;return{setters:[function(t){n=t.cclegacy},function(t){e=t.default},function(t){i=t.Router},null,function(t){s=t.App},null],execute:function(){n._RF.push({},"0f807Aev9dEYZPT86jjSz6L","net",void 0);var o=t("default",function(){function t(){this.socket=null,this.id=0,this.serverType=0,this.isConnected=!1,this._isConnecting=!1}var n=t.prototype;return n.init=function(t){},n.breakConnect=function(){},n.handleRecvdate=function(t,n){s.event.emit(t.router,n)},n.sendMsg=function(t,n){console.log("------------------sendData------------------"),console.log(t,n);var i=e.encoding(this.id,this.serverType,Number(n),t);this.socket.send(i)},n.reconnect=function(t){this.init((function(){var t={name:s.user.rankData.name};c.sendMsg(t,i.rut_login)}))},t}()),c=t("Net",new o);n._RF.pop()}}}));

System.register("chunks:///_virtual/noticeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singletonClass.ts"],(function(n){var e,t,i;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){i=n.SingletonClass}],execute:function(){t._RF.push({},"b82e02aUeRK3olcbikDGuqv","noticeManager",void 0);n("NoticeManager",function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/payManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./md5.ts","./app.ts","./serverConfig.ts","./paymentModeManager.ts"],(function(e){var t,n,r,o,a,s,i,c;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){o=e.MD5},function(e){a=e.App},function(e){s=e.ServerConfig},function(e){i=e.PaymentMode,c=e.paymentModeManager}],execute:function(){r._RF.push({},"42570/GfjtMqJOIemZ2Bp/e","payManager",void 0),e("PayManager",function(){function e(){this.PROXY_URL=this.getProxyUrl(),this.merNo="100140",this.md5Key="^Qdb}Kzy",this.test3DMerNo="100204",this.test3DMd5Key="Dp}MwSfW",this.enableTest3D=!1,this.returnURL=s.getCallbackServerAPI()+"/get3DResult",this.realIp=null}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var r=e.prototype;return r.setTest3DMode=function(e){console.warn("[PayManager] setTest3DMode已废弃，现在从服务器获取支付模式"),this.enableTest3D=e,console.log("3D支付测试模式: "+(e?"开启":"关闭"))},r.getRealIp=function(){var e=t(n().mark((function e(){var t,r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.showtime(),!this.realIp){e.next=3;break}return e.abrupt("return",this.realIp);case 3:return e.prev=3,t=new XMLHttpRequest,e.abrupt("return",new Promise((function(e,n){t.open("GET","https://api.ipify.org?format=json",!0),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status)try{var n=JSON.parse(t.responseText);r.realIp=n.ip,console.log("获取到真实IP:",r.realIp),e(r.realIp)}catch(t){console.warn("解析IP响应失败，使用默认IP"),e("127.0.0.1")}else console.warn("获取IP失败，使用默认IP"),e("127.0.0.1")},t.onerror=function(){console.warn("获取IP网络错误，使用默认IP"),e("127.0.0.1")},t.timeout=5e3,t.ontimeout=function(){console.warn("获取IP超时，使用默认IP"),e("127.0.0.1")},t.send()})));case 8:return e.prev=8,e.t0=e.catch(3),console.warn("获取IP异常，使用默认IP:",e.t0),e.abrupt("return","127.0.0.1");case 12:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(){return e.apply(this,arguments)}}(),r.getProxyUrl=function(){return s.getPayProxyAPI()+"/pay"},r.generateOrderId=function(){return(Date.now().toString().slice(-5)+Math.floor(1e4*Math.random()).toString().padStart(5,"0")).substring(0,10)},r.requestPay=function(){var e=t(n().mark((function e(t){var r,a,s,u,p,d,m,l,g,h=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getRealIp();case 3:return r=e.sent,e.next=6,c.getPaymentMode();case 6:return a=e.sent,console.log("[PayManager] 当前支付模式: "+a),s=a===i.THREE_D?this.test3DMerNo:this.merNo,u=a===i.THREE_D?this.test3DMd5Key:this.md5Key,p=s+this.generateOrderId(),d=s+p+t.currency+t.amount+this.returnURL+u,m=o.hex_md5(d),l={shippingEmail:t.email,shippingPhone:t.phone,shippingCountry:t.country,shippingState:t.state,shippingFirstName:t.firstName,shippingLastName:t.lastName,shippingAddress:t.address,apartment:"",shippingZipCode:t.zipCode,shippingCity:t.city,billNo:p,md5_key:u,currency:t.currency,language:"en",merNo:s,returnURL:this.returnURL,noticeUrl:"aaa",tradeUrl:"bbb",lastName:t.lastName,firstName:t.firstName,country:t.country,state:t.state,city:t.city,address:t.address,zipCode:t.zipCode,email:t.email,ip:r,cookie:"123",phone:t.phone,cardBank:"sdfdghdh",productInfo:t.productInfo,nationalCode:"us",cardTypeId:"1",cardNum:t.cardNum,month:t.month,year:t.year,cvv2:t.cvv2,amount:t.amount,md5Info:m},e.prev=14,g=new XMLHttpRequest,e.abrupt("return",new Promise((function(e,t){console.log("请求URL:",h.PROXY_URL),console.log("请求参数:",l),g.open("POST",h.PROXY_URL,!0),g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),g.onreadystatechange=function(){if(4===g.readyState)if(200===g.status){var n=JSON.parse(g.responseText);console.log("支付响应:",n),"P0001"===n.code?(h.handlePaymentSuccess(n,l),e({code:n.code,message:n.message||"支付成功",data:n})):"P0004"===n.code&&n.auth3DUrl?(console.log("需要3D验证，验证URL:",n.auth3DUrl),e({code:n.code,message:"需要3D验证",data:n,auth3DUrl:n.auth3DUrl})):e({code:n.code||"ERROR",message:n.message||"支付失败",data:n})}else t({code:"ERROR",message:g.statusText||"网络错误"})},g.onerror=function(){return t({code:"ERROR",message:"网络错误"})},g.send(h.objectToQueryString(l))})));case 19:return e.prev=19,e.t0=e.catch(14),console.error("支付请求失败:",e.t0),e.abrupt("return",{code:"ERROR",message:e.t0.message||"支付请求失败"});case 23:e.next=29;break;case 25:return e.prev=25,e.t1=e.catch(0),console.error("支付参数处理失败:",e.t1),e.abrupt("return",{code:"ERROR",message:e.t1.message||"支付参数处理失败"});case 29:case"end":return e.stop()}}),e,this,[[0,25],[14,19]])})));return function(t){return e.apply(this,arguments)}}(),r.handlePaymentSuccess=function(e,t){var n,r=void 0!==a&&a.user&&a.user.currentUser?a.user.currentUser:{pid:"",name:""},o=decodeURIComponent(t.productInfo||""),i="",c={};if(o.includes("钻石礼包-")){var u=o.match(/钻石礼包-(\d+)钻石/);if(u&&u[1]){for(var p=parseInt(u[1]),d=t.amount,m=1;m<=14;m++)if(m<=5&&"8"===d&&12===p||m<=5&&"20"===d&&40===p||m<=5&&"40"===d&&70===p||m<=5&&"80"===d&&140===p||m<=5&&"100"===d&&180===p||6===m&&"8"===d&&24===p||7===m&&"20"===d&&80===p||8===m&&"40"===d&&140===p||9===m&&"80"===d&&280===p||10===m&&"100"===d&&360===p||11===m&&"200"===d&&50===p||12===m&&"500"===d&&200===p||13===m&&"1000"===d||14===m&&"1500"===d&&1e3===p){i="itemBtn"+m;break}i&&("itemBtn11"===i?c={diamonds:50,bombBomb:3,bombHor:3,bombVer:5,bombAllSame:2}:"itemBtn12"===i?c={diamonds:200,bombBomb:5,bombHor:5,bombVer:10,bombAllSame:3}:"itemBtn13"===i?c={bombBomb:10,bombHor:10,bombVer:20,bombAllSame:5}:"itemBtn14"===i?c={diamonds:1e3,bombBomb:20,bombHor:20,bombAllSame:10}:parseInt(i.replace("itemBtn",""))<=10&&(c={diamonds:p,isFirstCharge:parseInt(i.replace("itemBtn",""))>=6}))}}var l={user_id:r.pid||"",user_name:r.name||"",amount:parseFloat(e.amount||(null==(n=e.data)?void 0:n.amount)||0),order_no:e.billNo||t.billNo||"",pay_time:this.getCurrentFormattedTime(),raw_response:e,product_id:i,product_info:o,product_details:c};fetch(s.getPayProxyAPI()+"/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(e){return e.json()})).then((function(e){e.success?console.log("支付记录已上传"):console.error("支付记录上传失败",e.message)})).catch((function(e){console.error("支付记录上传异常",e)}))},r.showtime=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),i=t+"-"+n.toString().padStart(2,"0")+"-"+r.toString().padStart(2,"0")+" "+o.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0");console.log(i)},r.getCurrentFormattedTime=function(){var e=new Date,t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),o=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0");return console.log(t,n,r,o,a,s),t+"-"+n+"-"+r+" "+o+":"+a+":"+s},r.objectToQueryString=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!=r&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}return t.join("&")},e}()).instance=null,r._RF.pop()}}}));

System.register("chunks:///_virtual/paymentModeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./serverConfig.ts"],(function(e){var t,n,r,a;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){a=e.ServerConfig}],execute:function(){r._RF.push({},"0e11aWARD9L/JqlVKlqJoB9","paymentModeManager",void 0);var s=e("PaymentMode",function(e){return e.TWO_D="2D",e.THREE_D="3D",e}({})),o=e("PaymentModeManager",function(){function e(){this.isFetching=!1,this.fetchPromise=null}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var r=e.prototype;return r.getPaymentMode=function(){var e=t(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFetching||!this.fetchPromise){e.next=3;break}return console.log("[PaymentModeManager] 等待正在进行的支付模式获取..."),e.abrupt("return",this.fetchPromise);case 3:return this.isFetching=!0,this.fetchPromise=this.fetchPaymentModeFromServer(),e.prev=5,e.next=8,this.fetchPromise;case 8:return t=e.sent,console.log("[PaymentModeManager] 从服务器获取支付模式成功: "+t),e.abrupt("return",t);case 13:return e.prev=13,e.t0=e.catch(5),console.error("[PaymentModeManager] 获取支付模式失败，使用默认模式:",e.t0),e.abrupt("return",s.TWO_D);case 17:return e.prev=17,this.isFetching=!1,this.fetchPromise=null,e.finish(17);case 21:case"end":return e.stop()}}),e,this,[[5,13,17,21]])})));return function(){return e.apply(this,arguments)}}(),r.fetchPaymentModeFromServer=function(){var e=t(n().mark((function e(){var t,r,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(a.getMainServerURL()+"/api/config/payment/mode");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("HTTP error! status: "+t.status);case 6:return e.next=8,t.json();case 8:if((r=e.sent).success){e.next=11;break}throw new Error(r.message||"获取支付模式失败");case 11:if((o=r.data.mode)===s.TWO_D||o===s.THREE_D){e.next=15;break}return console.warn("[PaymentModeManager] 无效的支付模式: "+o+"，使用默认2D模式"),e.abrupt("return",s.TWO_D);case 15:return e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(0),console.error("[PaymentModeManager] 从服务器获取支付模式异常:",e.t0),e.t0;case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),r.refreshPaymentMode=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[PaymentModeManager] refreshPaymentMode已废弃，现在每次都实时请求"),e.abrupt("return",this.getPaymentMode());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.isRequesting=function(){return this.isFetching},r.clearRequestState=function(){this.isFetching=!1,this.fetchPromise=null,console.log("[PaymentModeManager] 请求状态已清除")},e}());o.instance=null;e("paymentModeManager",o.getInstance());r._RF.pop()}}}));

System.register("chunks:///_virtual/platformManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singletonClass.ts","./toolsHelper.ts"],(function(t){var r,n,o,e,a,u;return{setters:[function(t){r=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){e=t.cclegacy},function(t){a=t.SingletonClass},function(t){u=t.ToolsHelper}],execute:function(){e._RF.push({},"bb726cfaqRBCKlkDmkl3WnO","platformManager",void 0);t("PlatformManager",function(t){function e(){for(var r,n=arguments.length,o=new Array(n),e=0;e<n;e++)o[e]=arguments[e];return(r=t.call.apply(t,[this].concat(o))||this).curPlatform=void 0,r}r(e,t);var a=e.prototype;return a.onInit=function(){var t=n(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a.getPlatform=function(){},a.loadGame=function(t){return this.curPlatform.loadGame(t)},a.getUUid=function(){return this.curPlatform.getUUid()},a.changeOrientation=function(t){return this.curPlatform.changeOrientation(t)},a.savePicture=function(t){},a.shootBackground=function(t,r,n){return this.curPlatform.shootBackground(t,r,n)},a.copyToClipboard=function(t){return this.curPlatform.copyToClipboard(t)},a.getClipboardContent=function(){var t=n(o().mark((function t(r){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.curPlatform.getClipboardContent(r);case 2:return n=t.sent,n=u.matchClipboardContent(n),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),a.getPackageName=function(){return this.curPlatform.getPackageName()},a.getAppVersion=function(){return this.curPlatform.getAppVersion()},a.checkIsEmulator=function(){return this.curPlatform&&this.curPlatform.checkIsEmulator()},a.sendNativeMsg=function(t,r){return this.curPlatform.sendNativeMsg(t,r)},a.receiveNativeMsg=function(t,r){return this.curPlatform.receiveNativeMsg(t,r)},a.faceBookLogin=function(){return this.curPlatform.faceBookLogin()},a.faceBookLoginOut=function(){return this.curPlatform.faceBookLoginOut()},a.loginGoogle=function(){return this.curPlatform.loginGoogle()},a.faceBookShare=function(t){return this.curPlatform.faceBookShare(t)},a.whatsAppShare=function(t){return this.curPlatform.whatsAppShare(t)},a.loginOutGoogle=function(){return this.curPlatform.loginOutGoogle()},e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/prefabPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resLoadHelper.ts"],(function(t){var e,o,i,n,r,s,a;return{setters:[function(t){e=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){i=t.cclegacy,n=t._decorator,r=t.NodePool,s=t.instantiate},function(t){a=t.ResLoadHelper}],execute:function(){var u;i._RF.push({},"95009wXWIlFf4m2ggINQca5","prefabPool",void 0);var p=n.ccclass;n.property,t("PrefabPool",p(u=function(){function t(){this.cmpt=void 0,this._poolSize=10,this._pool=void 0,this._preUrl=void 0,this._preNode=void 0,this._nodeName=void 0,this._init=!1}var i=t.prototype;return i.initPool=function(){var t=e(o().mark((function t(e,i,n){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clean(),this._preUrl=e,t.next=4,a.loadPrefabSync(e);case 4:if(r=t.sent){t.next=7;break}return t.abrupt("return");case 7:r.addRef(),this._preNode=r,this._nodeName=r.name,n&&(this.cmpt=n),this.initPoolSize(i),this._init=!0;case 13:case"end":return t.stop()}}),t,this)})));return function(e,o,i){return t.apply(this,arguments)}}(),i.initPoolSize=function(t){t>0&&(this._poolSize=t),this.cmpt?this._pool=new r(this.cmpt):this._pool=new r;for(var e=0;e<this._poolSize;e++){var o=this.buildNode();this._pool.put(o)}},i.getNode=function(){var t=e(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._init){t.next=3;break}return t.next=3,a.loadPrefabSync(this._preUrl);case 3:return t.abrupt("return",this.syncGetNode());case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.syncGetNode=function(){var t,e;if(this._pool.size()<=0){var o=this.buildNode();this.putNode(o)}this._pool.size()>0&&(t=(e=this._pool).get.apply(e,arguments));return t||null},i.putNode=function(t){this._pool.put(t)},i.poolSize=function(){return this._pool.size()},i.clean=function(){this._pool&&this._pool.clear(),this._preNode&&(this._preNode.decRef(),this._preNode=null)},i.buildNode=function(){return s(this._preNode)},i.getNodeName=function(){return this._nodeName},t}())||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/randomAdManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app.ts"],(function(e){var o,t,i,n,s;return{setters:[function(e){o=e.extends,t=e.createClass},function(e){i=e.cclegacy,n=e.sys},function(e){s=e.App}],execute:function(){i._RF.push({},"c9b75V4OcBLVryewUAdjnDG","randomAdManager",void 0);var d=e("RandomAdManager",function(){function e(){this.config={enabled:!0,minIntervalTime:60,triggerProbability:.3,initialDelay:30,useGoogleAdPlacement:!1},this.lastAdTime=0,this.gameStartTime=0,this.initialized=!1,this.adReady=!1,this.adShowing=!1,this.adBreak=null,this.gameStartTime=Date.now()}var i=e.prototype;return i.init=function(){this.initialized||(console.log("初始化H5随机广告管理器"),n.isBrowser?(this.config.useGoogleAdPlacement?this.initGoogleAdPlacement():this.initGenericAd(),this.initialized=!0,this.lastAdTime=Date.now()):console.log("非浏览器环境，广告功能不可用"))},i.initGoogleAdPlacement=function(){n.isBrowser?"undefined"!=typeof window?window.adBreak?(this.adBreak=window.adBreak,this.adReady=!0,console.log("Google Ad Placement API已就绪")):(console.warn("Google Ad Placement API未找到，请确保在HTML中正确引入了广告脚本"),this.loadGoogleAdPlacementScript()):console.log("window对象不存在，无法初始化广告"):console.log("非浏览器环境，广告功能不可用")},i.loadGoogleAdPlacementScript=function(){var e=this;if(n.isBrowser)if("undefined"!=typeof document&&document.head){console.log("尝试动态加载Google Ad Placement API脚本");try{var o=document.createElement("script");o.async=!0,o.dataset.adFrequencyHint="30s",o.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3940256099942544",o.crossOrigin="anonymous",o.onload=function(){window.adsbygoogle||(window.adsbygoogle=[]),window.adBreak=window.adConfig=function(e){window.adsbygoogle.push(e)},e.adBreak=window.adBreak,e.adReady=!0,console.log("Google Ad Placement API脚本加载成功"),e.preloadAds()},o.onerror=function(){console.error("Google Ad Placement API脚本加载失败"),e.adReady=!1},document.head.appendChild(o)}catch(e){console.error("加载广告脚本时发生错误:",e)}}else console.log("document对象不存在，无法加载广告脚本");else console.log("非浏览器环境，无法加载广告脚本")},i.preloadAds=function(){if(this.adBreak)try{console.log("预加载广告..."),this.adBreak({preloadAdBreaks:"on",onReady:function(){console.log("广告预加载完成，可以显示广告了")},onError:function(e){console.error("广告预加载失败",e)}})}catch(e){console.error("预加载广告时发生错误",e)}},i.initGenericAd=function(){if(n.isBrowser)if("undefined"!=typeof window){console.log("初始化通用广告SDK");try{window.gamebridge&&"function"==typeof window.gamebridge.showAd?(console.log("检测到gamebridge广告SDK"),this.adReady=!0):window.pyun&&"function"==typeof window.pyun.advertingPull?(console.log("检测到pyun广告SDK"),this.adReady=!0):this.adReady=!0}catch(e){console.error("初始化通用广告SDK时发生错误:",e),this.adReady=!0}}else console.log("window对象不存在，无法初始化广告");else console.log("非浏览器环境，广告功能不可用")},i.tryShowRandomAd=function(){if(!this.config.enabled)return!1;if(this.initialized||this.init(),!this.adReady)return console.log("广告未准备好，无法显示"),!1;if(this.adShowing)return console.log("广告正在显示中，不重复触发"),!1;var e=Date.now();return!(e-this.gameStartTime<1e3*this.config.initialDelay)&&(!(e-this.lastAdTime<1e3*this.config.minIntervalTime)&&(!(Math.random()>this.config.triggerProbability)&&(this.showAd(),this.lastAdTime=e,!0)))},i.forceShowAd=function(e){var o=this;if(void 0===e&&(e="next"),console.log("[AdDebug] forceShowAd called, adType:",e,"adReady:",this.adReady,"adShowing:",this.adShowing),this.lastAdTime=0,this.adShowing)return console.log("[AdDebug] 广告正在显示中，请稍后再试"),void setTimeout((function(){o.resetAdState()}),500);console.log("强制显示"+e+"类型广告"),this.showAd()},i.resetAdState=function(){console.log("[AdDebug] 重置广告状态"),this.adShowing=!1,this.lastAdTime=0},i.showAd=function(){console.log("[AdDebug] showAd called, adReady:",this.adReady,"adShowing:",this.adShowing),this.adShowing?console.log("[AdDebug] 广告正在显示中，不重复触发"):(this.adShowing=!0,s.audio.stopMusic(),this.showGenericAd())},i.showGenericAd=function(){var e=this;if(console.log("[AdDebug] showGenericAd called, adShowing:",this.adShowing),!n.isBrowser)return console.log("[AdDebug] 非浏览器环境，无法显示广告"),this.adShowing=!1,void s.audio.resumeMusic();try{if(window.tt&&"function"==typeof window.tt.showInterstitialAd)return console.log("[AdDebug] 使用穿山甲H5插屏广告SDK"),void this.showPangleAd();console.log("[AdDebug] 使用模拟广告 showMockAd"),this.showMockAd(),setTimeout((function(){e.adShowing&&(console.log("[AdDebug] 广告显示超时，自动重置状态"),e.adShowing=!1,s.audio.resumeMusic())}),5e3)}catch(e){console.error("[AdDebug] showGenericAd异常:",e),this.adShowing=!1,s.audio.resumeMusic()}},i.showPangleAd=function(){var e=this;this.adShowing=!0;try{window.tt.showInterstitialAd({app_id:"5001121",slot_id:"901121375",success:function(){console.log("[AdDebug] 穿山甲插屏广告展示成功")},fail:function(o){console.error("[AdDebug] 穿山甲插屏广告展示失败",o),e.adShowing=!1,e.showMockAd()},complete:function(){e.adShowing=!1,s.audio.resumeMusic()}})}catch(e){console.error("[AdDebug] showPangleAd异常:",e),this.adShowing=!1,this.showMockAd()}},i.showMockAd=function(){var e=this;console.log("[AdDebug] showMockAd called, adShowing:",this.adShowing),this.adShowing=!0,setTimeout((function(){e.adShowing=!1,s.audio.resumeMusic()}),8e3);var o=["https://www.innersloth.com/games/among-us/","https://www.centurygames.com/games/kingshot/","https://play.google.com/store/apps/details?id=com.dreamgames.royalkingdom","https://play.google.com/store/apps/details?id=com.ningningstudio.kpopmagictiles","https://play.google.com/store/apps/details?id=com.humble.SlayTheSpire"],t=Math.floor(Math.random()*o.length),i=o[t],d=["http://game-01-6goq2s6z60c83eb7-1308501080.tcloudbaseapp.com/ad/1.jpg","http://game-01-6goq2s6z60c83eb7-1308501080.tcloudbaseapp.com/ad/2.jpg","http://game-01-6goq2s6z60c83eb7-1308501080.tcloudbaseapp.com/ad/3.jpg","http://game-01-6goq2s6z60c83eb7-1308501080.tcloudbaseapp.com/ad/4.jpg","http://game-01-6goq2s6z60c83eb7-1308501080.tcloudbaseapp.com/ad/5.jpg"][t];if(n.isBrowser&&"undefined"!=typeof document)try{var a=document.createElement("div");a.id="mock-ad-container",a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="100vw",a.style.height="100vh",a.style.backgroundColor="rgba(0,0,0,0.8)",a.style.zIndex="99999",a.style.display="flex",a.style.justifyContent="center",a.style.alignItems="center";var l=document.createElement("a");l.href=i,l.target="_blank";var c=document.createElement("img");c.src=d,c.style.width="320px",c.style.height="240px",c.style.borderRadius="12px",c.style.boxShadow="0 4px 24px rgba(0,0,0,0.3)",c.style.cursor="pointer",l.appendChild(c),a.appendChild(l);var r=document.createElement("div");r.innerText="×",r.style.position="absolute",r.style.top="30px",r.style.right="40px",r.style.fontSize="36px",r.style.color="#fff",r.style.cursor="pointer",r.style.zIndex="100000",a.appendChild(r),r.onclick=function(){document.body.contains(a)&&document.body.removeChild(a),e.adShowing=!1,s.audio.resumeMusic()},document.body.appendChild(a),setTimeout((function(){document.body.contains(a)&&document.body.removeChild(a),e.adShowing=!1,s.audio.resumeMusic()}),8e3)}catch(e){console.error("[AdDebug] 创建模拟广告UI失败:",e)}},i.setConfig=function(e){this.config=o({},this.config,e)},t(e,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}());d._instance=null;e("randomAd",d.instance);i._RF.pop()}}}));

System.register("chunks:///_virtual/rankCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts","./scrollViewCmpt.ts","./levelConfig.ts","./rankConfig.ts","./app.ts","./globalFuncHelper.ts"],(function(t){var n,e,i,o,l,r,s,a,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator},function(t){o=t.BaseViewCmpt},function(t){l=t.ScrollViewCmpt},function(t){r=t.LevelConfig},function(t){s=t.RankConfig},function(t){a=t.App},function(t){c=t.GlobalFuncHelper}],execute:function(){var u;e._RF.push({},"98c94SPemNDPI6fxQMIl+TX","rankCmpt",void 0);var p=i.ccclass;i.property,t("RankCmpt",p("rankCmpt")(u=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).scrollView=null,n}n(e,t);var i=e.prototype;return i.onLoad=function(){t.prototype.onLoad.call(this),this.scrollView=this.viewList.get("rankScroll").getComponent(l),this.initData()},i.initData=function(){this.evtRankList(null)},i.evtRankList=function(t){var n=[],e={star:c.getGold(),id:0,level:r.getCurLevel(),icon:c.getIcon(),name:a.user.rankData.name,time:"",rank:0};n.push(e),this.setRankList(n)},i.setRankList=function(t){var n=s.data;t&&(n=n.concat(t)),n.sort((function(t,n){return-t.level+n.level}));for(var e=0;e<n.length;e++)n[e].rank=e+1;this.scrollView||(this.scrollView=this.viewList.get("rankScroll").getComponent(l)),this.scrollView.initData({list:n,target:this}),this.scrollView.scrollToTop(1)},e}(o))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/rankConfig.ts",["cc"],(function(e){var l;return{setters:[function(e){l=e.cclegacy}],execute:function(){l._RF.push({},"da5eer+RFBMrpOXdqjyKOet","rankConfig",void 0);e("RankConfig",new function(){this.data=[{id:1,name:"Alex Walker",level:11,gold:14,star:3,icon:3},{id:2,name:"Emma Thompson",level:12,gold:15,star:14,icon:7},{id:3,name:"James Wilson",level:13,gold:16,star:15,icon:2},{id:4,name:"Sophia Davis",level:14,gold:17,star:16,icon:5},{id:5,name:"Oliver Brown",level:15,gold:18,star:17,icon:6},{id:6,name:"Isabella White",level:16,gold:19,star:18,icon:8},{id:7,name:"William Clark",level:17,gold:20,star:19,icon:7},{id:8,name:"Mia Anderson",level:18,gold:21,star:110,icon:5},{id:9,name:"Lucas Martin",level:19,gold:22,star:111,icon:8},{id:10,name:"Ava Garcia",level:20,gold:23,star:112,icon:1},{id:11,name:"Henry Rodriguez",level:21,gold:24,star:113,icon:2},{id:12,name:"Charlotte Lee",level:22,gold:25,star:114,icon:3},{id:13,name:"Benjamin King",level:23,gold:26,star:115,icon:8},{id:14,name:"Amelia Wright",level:24,gold:27,star:116,icon:5},{id:15,name:"Mason Scott",level:25,gold:28,star:117,icon:7},{id:16,name:"Harper Green",level:26,gold:29,star:118,icon:8},{id:17,name:"Ethan Adams",level:27,gold:30,star:119,icon:3},{id:18,name:"Evelyn Baker",level:28,gold:31,star:120,icon:8},{id:19,name:"Daniel Hill",level:29,gold:32,star:121,icon:8},{id:20,name:"Victoria Ross",level:30,gold:22,star:122,icon:1},{id:21,name:"Michael Ward",level:31,gold:23,star:123,icon:2},{id:22,name:"Scarlett Morris",level:32,gold:24,star:124,icon:8},{id:23,name:"Joseph Morgan",level:33,gold:25,star:125,icon:3},{id:24,name:"Chloe Cooper",level:34,gold:26,star:126,icon:8},{id:25,name:"David Reed",level:35,gold:27,star:127,icon:7},{id:26,name:"Zoe Bailey",level:36,gold:28,star:128,icon:9},{id:27,name:"Christopher Cox",level:37,gold:29,star:129,icon:8},{id:28,name:"Lily Howard",level:38,gold:30,star:17,icon:5},{id:29,name:"Andrew Butler",level:39,gold:31,star:17,icon:8},{id:30,name:"Grace Foster",level:11,gold:32,star:18,icon:8},{id:31,name:"Joshua Brooks",level:11,gold:33,star:19,icon:8},{id:32,name:"Madison Price",level:11,gold:34,star:10,icon:8},{id:33,name:"Ryan Long",level:11,gold:35,star:11,icon:5},{id:34,name:"Hannah Sanders",level:12,gold:36,star:12,icon:6},{id:35,name:"Nathan Gray",level:13,gold:37,star:13,icon:7},{id:36,name:"Aubrey Wells",level:14,gold:38,star:14,icon:8},{id:37,name:"Samuel Barnes",level:15,gold:15,star:15,icon:9},{id:38,name:"Aria Fisher",level:16,gold:16,star:16,icon:8},{id:39,name:"John Marshall",level:17,gold:17,star:17,icon:8},{id:40,name:"Zara Owen",level:18,gold:18,star:18,icon:8},{id:41,name:"Dylan Mason",level:19,gold:19,star:19,icon:8},{id:42,name:"Layla Gibson",level:20,gold:20,star:20,icon:8},{id:43,name:"Kevin Hunt",level:21,gold:21,star:21,icon:2},{id:44,name:"Nora Palmer",level:22,gold:22,star:22,icon:7},{id:45,name:"Tyler Warren",level:23,gold:23,star:23,icon:3},{id:46,name:"Lucy Dixon",level:24,gold:24,star:24,icon:7},{id:47,name:"Brandon Fox",level:25,gold:25,star:25,icon:6},{id:48,name:"Claire Murray",level:26,gold:26,star:26,icon:4},{id:49,name:"Jordan Knight",level:27,gold:27,star:27,icon:1},{id:50,name:"Violet Rose",level:28,gold:28,star:28,icon:9},{id:51,name:"Austin Stone",level:29,gold:29,star:29,icon:3},{id:52,name:"Bella Porter",level:30,gold:30,star:8,icon:7},{id:53,name:"Chase Meyer",level:31,gold:31,star:8,icon:8},{id:54,name:"Ruby Shaw",level:100,gold:31,star:100,icon:2},{id:55,name:"Leo Gordon",level:80,gold:32,star:80,icon:8},{id:56,name:"Eva Wagner",level:44,gold:33,star:44,icon:8},{id:57,name:"Max Hunter",level:62,gold:34,star:62,icon:3},{id:58,name:"Stella Black",level:35,gold:35,star:35,icon:6},{id:59,name:"Cole Parker",level:40,gold:36,star:40,icon:4},{id:60,name:"Hazel Wood",level:170,gold:37,star:170,icon:3},{id:61,name:"Owen Grant",level:211,gold:38,star:211,icon:8},{id:62,name:"Luna Hayes",level:210,gold:15,star:210,icon:8},{id:63,name:"Felix Cole",level:99,gold:16,star:99,icon:9},{id:64,name:"Nova Reid",level:72,gold:17,star:72,icon:3},{id:65,name:"Finn Walsh",level:37,gold:18,star:37,icon:1},{id:66,name:"Ivy Pierce",level:88,gold:19,star:88,icon:8},{id:67,name:"Theo Hart",level:82,gold:20,star:82,icon:6},{id:68,name:"Alice Dean",level:31,gold:21,star:31,icon:9},{id:69,name:"Miles Cross",level:57,gold:22,star:57,icon:5},{id:70,name:"Rose Flynn",level:78,gold:23,star:78,icon:2},{id:71,name:"Hugo West",level:165,gold:24,star:165,icon:1},{id:72,name:"Jade Burke",level:76,gold:25,star:76,icon:7},{id:73,name:"Atlas Ford",level:38,gold:26,star:38,icon:5},{id:74,name:"Eden Lane",level:65,gold:27,star:65,icon:6},{id:null,name:"Sage Blake",level:176,gold:28,star:176,icon:8}]});l._RF.pop()}}}));

System.register("chunks:///_virtual/rankItemCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scrollItemCmpt.ts","./app.ts","./cocosHelper.ts"],(function(t){var e,i,a,n,l,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,a=t._decorator},function(t){n=t.default},function(t){l=t.App},function(t){s=t.CocosHelper}],execute:function(){var r;i._RF.push({},"0ef0ds8tatAG79n1BOwTcbF","rankItemCmpt",void 0);var c=a.ccclass;a.property,t("rankItemCmpt",c("rankItemCmpt")(r=function(t){function i(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).head=null,e.lbName=null,e.lbLevel=null,e.lbRank=null,e.lbBei=null,e}e(i,t);var a=i.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this),this.head=this.viewList.get("head"),this.lbName=this.viewList.get("lbName"),this.lbRank=this.viewList.get("lbRank"),this.lbLevel=this.viewList.get("lbLevel"),this.lbBei=this.viewList.get("lbBei")},a.initData=function(t){this.viewList.get("self").active=t.name==l.user.rankData.name,s.updateLabelText(this.lbBei,t.level),s.updateLabelText(this.lbName,t.name),s.updateLabelText(this.lbLevel,t.level),s.updateLabelText(this.lbRank,t.rank),this.viewList.get("1").active=1==t.rank,this.viewList.get("2").active=2==t.rank,this.viewList.get("3").active=3==t.rank,this.viewList.get("lbRank").active=t.rank>3,s.updateUserHeadSpriteAsync(this.head,t.icon)},i}(n))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/resLoadHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./logHelper.ts"],(function(e){var r,n,t,s,u,o,a,i,c,l,f,p;return{setters:[function(e){r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){t=e.cclegacy,s=e.resources,u=e.error,o=e.assetManager,a=e.SpriteFrame,i=e.Texture2D,c=e.Prefab,l=e.AudioClip},function(e){f=e.PrintError,p=e.PrintLog}],execute:function(){t._RF.push({},"1d82ef1RPtJgrWD8FefRXfc","resLoadHelper",void 0);e("ResLoadHelper",new(function(){function e(){this.resBundle=s}var t=e.prototype;return t.setBundle=function(e){this.resBundle=e||s},t.preloadAsset=function(e,r){this.resBundle.preload(e,r)},t.preloadDir=function(e,r,n){this.resBundle.preloadDir(e,(function(e,n,t){r&&r(e,n,t)}),(function(r,t){if(r)return u("preloadDir 加载asset失败, url:"+e+", err: "+r),null;n&&n(t)}))},t.preloadPath=function(e,r,n,t){this.resBundle.preload(e,(function(e,n,t){r&&r(e,n,t)}),(function(r,s){if(r)return t&&t(r),u("preload 加载asset失败, url:"+e+", err: "+r),null;n&&n(s)}))},t.loadModle=function(){var e=r(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadCommonAssetSync("modle/"+r,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),t.loadPieces=function(){var e=r(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadCommonAssetSync("pieces/"+r,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),t.loadCommonAssetSync=function(){var e=r(n().mark((function e(r,t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){r=t==c?"prefab/"+r:r,t==a&&(r+="/spriteFrame"),s.load(r,t,(function(n,t){n?(f("loadCommonAssetSync 加载asset失败, url:"+r+", err: "+n),e(null)):(p(r),e(t))}))})));case 1:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),t.loadAssetSync=function(e,r){var n=this;return new Promise((function(t){n.resBundle.load(e,r,(function(r,n){r?(f("loadAssetSync 加载asset失败, url:"+e+", err: "+r),t(null)):t(n)}))}))},t.loadAssetAsync=function(e,r,n,t,s){(void 0===t&&(t=!1),t)?o.loadRemote(e,{ext:".png"},(function(r,t){if(r)return f("loadAssetAsync remote png 加载asset失败, url:"+e+", err: "+r),o.loadRemote(e,{ext:".jpg"},(function(r,t){if(r)return f("loadAssetAsync remote jpg 加载asset失败, url:"+e+", err: "+r),null;var s=new a,u=new i;u.image=t,s.texture=u,n&&n(s)})),null;var s=new a,u=new i;u.image=t,s.texture=u,n&&n(s)})):this.resBundle.load(e,r,(function(r,t){if(r)return f("loadAssetAsync 加载asset失败, url:"+e+", err: "+r),null;n&&n(t)}))},t.loadPrefabSync=function(){var e=r(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.loadAssetSync("prefab/"+r,c));case 1:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),t.loadAudioClipSync=function(){var e=r(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.loadAssetSync("sound/"+r,l));case 1:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),t.loadCommonAudioClip=function(){var e=r(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.loadCommonAssetSync("sound/"+r,l));case 1:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),t.releaseAsset=function(e,r){this.resBundle.release(e,r)},e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/resultViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts","./eventName.ts","./levelConfig.ts","./viewNameConst.ts","./app.ts","./globalFuncHelper.ts","./advertise.ts","./gridCmpt.ts","./randomAdManager.ts","./serverConfig.ts"],(function(e){var t,n,i,o,a,s,r,l,c,u,d,h,v,w,f,p,g;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e._decorator,s=e.tween,r=e.v3},function(e){l=e.BaseViewCmpt},function(e){c=e.EventName},function(e){u=e.LevelConfig},function(e){d=e.ViewName},function(e){h=e.App},function(e){v=e.GlobalFuncHelper},function(e){w=e.Advertise},function(e){f=e.gridCmpt},function(e){p=e.randomAd},function(e){g=e.ServerConfig}],execute:function(){var m;o._RF.push({},"0f90fAEI/tN8ZvgDVfbMKdZ","resultViewCmpt",void 0);var y=a.ccclass;a.property,e("ResultViewCmpt",y("resultViewCmpt")(m=function(e){function o(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).isWin=!1,t.level=0,t.starCount=0,t.star=null,t.coutArr=[],t}t(o,e);var a=o.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this),this.star=this.viewList.get("animNode/win/star")},a.loadExtraData=function(){var e=n(i().mark((function e(t,n,o,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===o&&(o=[]),void 0===a&&(a=0),p&&"function"==typeof p.forceShowAd&&(p.resetAdState(),p.forceShowAd("next")),this.level=t,this.isWin=n,this.coutArr=o,this.starCount=a,n?h.audio.play("win"):h.audio.play("lose"),this.viewList.get("animNode/win").active=n,this.viewList.get("animNode/lose").active=!n,n?(u.setLevelStar(t,a),this.handleWin(o)):this.handleLose();case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,i,o){return e.apply(this,arguments)}}(),a.handleLose=function(){},a.handleWin=function(e){this.viewList.get("animNode/win/target").children.forEach((function(t,n){if(e&&(t.active=n<e.length,n<e.length)){t.getComponent(f).setType(e[n][0]);var i=e[n][1];0==i?t.getComponent(f).showGou(!0):t.getComponent(f).setCount(i)}})),this.playStarAnim()},a.playStarAnim=function(){this.star.active=this.isWin;var e=this.starCount;this.isWin&&this.star.children.forEach((function(t,n){t.getChildByName("s").active=n+1<=e,t.setScale(0,0,0),s(t).to(.3*(n+1),{scale:r(1,1,1)},{easing:"backOut"}).start()}))},a.onClick_nextBtn=function(){h.audio.play("button_click"),v.setGold(h.gameLogic.rewardGold),this.level==u.getCurLevel()&&u.nextLevel(),h.view.closeView(d.Single.eGameView),h.view.openView(d.Single.eHomeView,!0),this.onClick_closeBtn()},a.onClick_shareBtn=function(){h.audio.play("button_click"),h.event.emit(c.Game.Share,h.gameLogic.curLevel),w.showVideoAds(),h.backHome()},a.onClick_continueBtn=function(){if(h.audio.play("button_click"),+v.getGold()<10){var e=u.getCurLevel();return h.event.emit(c.Game.Share,e),h.view.showMsgTips("Diamond shortage"),void w.showVideoAds()}v.setGold(-10),h.event.emit(c.Game.UpdataGold),this.syncGoldDataToServer(),h.event.emit(c.Game.ContinueGame),this.onClick_closeBtn()},a.onClick_guanbiBtn=function(){this.isWin&&this.level==u.getCurLevel()&&u.nextLevel(),h.backHome(!0),e.prototype.onClick_closeBtn.call(this)},a.onClickNextLevel=function(){h.audio.play("button_click"),p.tryShowRandomAd(),h.view.closeView(d.Single.eResultView),h.view.openView(d.Single.eGameView,this.level+1)},a.onClickReplay=function(){h.audio.play("button_click"),p.tryShowRandomAd(),h.view.closeView(d.Single.eResultView),h.view.openView(d.Single.eGameView,this.level)},a.syncGoldDataToServer=function(){try{window.dataSyncManager?(console.log("[ResultView] 开始同步金币数据到服务器"),window.dataSyncManager.forceSyncAllData().then((function(e){e?console.log("[ResultView] 金币数据同步成功"):console.error("[ResultView] 金币数据同步失败")})).catch((function(e){console.error("[ResultView] 金币数据同步异常:",e)}))):(console.warn("[ResultView] 数据同步管理器未初始化，尝试手动同步"),this.manualSyncGoldData())}catch(e){console.error("[ResultView] 同步金币数据失败:",e),this.manualSyncGoldData()}},a.manualSyncGoldData=function(){try{var e=void 0!==h&&h.user&&h.user.currentUser;if(!e||!e.id)return void console.warn("[ResultView] 用户未登录，跳过金币同步");var t=v.getGold(),n={userId:e.id,data:[{key:"Gold",value:t.toString(),type:"string"}]};console.log("[ResultView] 准备同步金币数据:",n),fetch(g.getMainServerURL()+"/api/user/sync-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){e.success?console.log("[ResultView] 金币数据同步成功"):console.error("[ResultView] 金币数据同步失败:",e.message)})).catch((function(e){console.error("[ResultView] 金币数据同步异常:",e)}))}catch(e){console.error("[ResultView] 手动同步金币数据失败:",e)}},o}(l))||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/rocketCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseNodeCmpt.ts","./enumConst.ts"],(function(t){var i,e,o,s,n,r,c;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,s=t.tween,n=t.v3},function(t){r=t.BaseNodeCmpt},function(t){c=t.Bomb}],execute:function(){var a;e._RF.push({},"294b8YiupBCuLH2ohWG/5Dn","rocketCmpt",void 0);var p=o.ccclass;o.property,t("rocketCmpt",p("rocketCmpt")(a=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var o=e.prototype;return o.onLoad=function(){t.prototype.onLoad.call(this)},o.initData=function(t){var i=this;this.viewList.get("down").active=t==c.ver,this.viewList.get("up").active=t==c.ver,this.viewList.get("right").active=t==c.hor,this.viewList.get("left").active=t==c.hor;var e=.6;t==c.ver?(s(this.viewList.get("down")).to(e,{position:n(0,-800,1)}).start(),s(this.viewList.get("up")).to(e,{position:n(0,800,1)}).call((function(){i.node.destroy()})).start()):t==c.hor&&(s(this.viewList.get("right")).to(e,{position:n(720,0,1)}).start(),s(this.viewList.get("left")).to(e,{position:n(-720,0,1)}).call((function(){i.node.destroy()})).start())},e}(r))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/rotateSelf.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,r,n;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,n=t.Component}],execute:function(){var c;o._RF.push({},"26798zR015DGLmi4WYgoZGU","rotateSelf",void 0);var i=r.ccclass;r.property,t("rotateSelf",i("rotateSelf")(c=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var r=o.prototype;return r.start=function(){},r.update=function(t){this.node.angle--},o}(n))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/routers.ts",["cc"],(function(t){var u;return{setters:[function(t){u=t.cclegacy}],execute:function(){u._RF.push({},"0cebfu+MAFOT7tgFDkR1Kxz","routers",void 0);t("Router",{rut_login:"1001",rut_list:"1002",rut_update:"1003"});u._RF.pop()}}}));

System.register("chunks:///_virtual/screenRayCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseNodeCmpt.ts","./eventName.ts","./app.ts"],(function(t){var n,o,e,i,c,s,a,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.input,c=t.Input},function(t){s=t.BaseNodeCmpt},function(t){a=t.EventName},function(t){r=t.App}],execute:function(){var u;o._RF.push({},"af448ZFLpFJHqF7Ke94yyTx","screenRayCmpt",void 0);var h=e.ccclass;e.property,t("screenRayCmpt",h("screenRayCmpt")(u=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).isCanDo=!1,n}n(o,t);var e=o.prototype;return e.onLoad=function(){t.prototype.onLoad.call(this)},e.start=function(){i.on(c.EventType.TOUCH_START,this.onTouchStart,this),i.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this),i.on(c.EventType.TOUCH_END,this.onTouchEnd,this),i.on(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.onTouchStart=function(t){this.isCanDo||(this.isCanDo=!0,r.event.emit(a.Game.TouchStart,t.getUILocation()))},e.onTouchMove=function(t){this.isCanDo?r.event.emit(a.Game.TouchMove,t.getUILocation()):this.isCanDo=!0},e.onTouchEnd=function(t){this.isCanDo=!1,r.event.emit(a.Game.TouchEnd,t.getUILocation())},o}(s))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/scrollItemCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseNodeCmpt.ts"],(function(t){var o,n,e,c;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator},function(t){c=t.BaseNodeCmpt}],execute:function(){var r;n._RF.push({},"9782fuZH11LWoU9aufDR7CZ","scrollItemCmpt",void 0);var i=e.ccclass;e.property,t("default",i("scrollItemCmpt")(r=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var e=n.prototype;return e.onLoad=function(){t.prototype.onLoad.call(this),this.addEvent()},e.initData=function(){},e.addEvent=function(){},e.delEvent=function(){},n}(c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/scrollViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./eventName.ts","./app.ts","./scrollItemCmpt.ts"],(function(t){var e,i,o,n,r,s,a,h,l,p,c,m,g,u,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,h=t.Widget,l=t.UITransform,p=t.size,c=t.instantiate,m=t.Vec3,g=t.ScrollView},function(t){u=t.EventName},function(t){f=t.App},function(t){d=t.default}],execute:function(){var v,C,A,y,I,b;r._RF.push({},"03df9SdzGdMcbQGDTRJhBGo","scrollViewCmpt",void 0);var S=s.ccclass,w=s.property;t("ScrollViewCmpt",(v=S("scrollViewCmpt"),C=w(a),v((I=e((y=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"scrollItem",I,n(e)),o(e,"gap",b,n(e)),e.loopCount=0,e.itemArr=[],e.posArr=[],e.bottomY=-1e5,e.m_data=null,e}i(e,t);var r=e.prototype;return r.start=function(){t.prototype.start.call(this),this.node.on("scrolling",this.scrolling,this),this.scrollItem.active=!1},r.resetContentSize=function(t){var e=this.node.getComponent(h);e&&e.updateAlignment();var i=this.scrollItem.getComponent(l).height,o=t.length*(i+this.gap);this.content.getComponent(l).setContentSize(p(this.node.getComponent(l).width,o));var n=Math.ceil(this.node.getComponent(l).height/(i+this.gap)),r=t.length;this.loopCount=r>n?n:r},r.initData=function(t){var e=t.list;this.m_data=t,this.resetContentSize(e),this.itemArr.length>0&&this.itemArr.forEach((function(t){t.active=!1}));var i=this.scrollItem.getComponent(l).height;this.posArr=[];for(var o=0;o<e.length;o++){var n=-(i+this.gap)*o-(i/2+this.gap);if(this.posArr.push(n),o<=this.loopCount){var r=this.itemArr[o];r||(r=c(this.scrollItem),this.content.addChild(r),this.itemArr.push(r));var s=r.getComponent(d);r.active=!0,s&&s.initData(e[o],this.m_data.target),r.setPosition(new m(0,n,0))}}},r.updateItemInfo=function(t,e){if(t){var i=t.getComponent(d);i&&this.m_data.list[e]&&i.initData(this.m_data.list[e],this.m_data.target)}},r.scrolling=function(){if(this.itemArr[0]){f.event.emit(u.Game.Scrolling,this.node);for(var t=0;t<this.itemArr.length;t++){var e=this.itemArr[t],i=e.getPosition(),o=e.parent.getComponent(l).convertToWorldSpaceAR(i),n=this.node.parent.getComponent(l).convertToWorldSpaceAR(this.node.getPosition()),r=this.node.getComponent(l).height/2;if(o.y>=n.y+r+this.scrollItem.getComponent(l).height){var s=this.posArr.indexOf(i.y);if(s+this.loopCount+1>this.posArr.length-1)return;var a=e.getPosition();a.y=this.posArr[s+this.loopCount+1],e.setPosition(a),this.updateItemInfo(e,s+this.loopCount+1)}if(o.y<this.bottomY){var h=this.posArr.indexOf(i.y);if(h-this.loopCount-1>=0){var p=e.getPosition();p.y=this.posArr[h-this.loopCount-1],e.setPosition(p),this.updateItemInfo(e,h-this.loopCount-1)}}i=(e=this.itemArr[this.itemArr.length-1]).getPosition(),o=e.parent.getComponent(l).convertToWorldSpaceAR(i),-1e5==this.bottomY&&(this.bottomY=n.y-r-this.scrollItem.getComponent(l).height)}}},e}(g)).prototype,"scrollItem",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(y.prototype,"gap",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),A=y))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/serverConfig.ts",["cc","./environment.ts"],(function(e){var r,n;return{setters:[function(e){r=e.cclegacy},function(e){n=e.EnvironmentConfig}],execute:function(){r._RF.push({},"dfa677ozTpC3LgMhMkluYJy","serverConfig",void 0);e("ServerConfig",function(){function e(){}return e.getMainServerAPI=function(){return n.getMainServerAPI()},e.getMainServerURL=function(){return n.getMainServerURL()},e.getPayProxyURL=function(){return n.getPayProxyURL()},e.getPayProxyAPI=function(){return n.getPayProxyAPI()},e.getCallbackServerURL=function(){return n.getCallbackServerURL()},e.getCallbackServerAPI=function(){return n.getCallbackServerAPI()},e.getServerHost=function(){return n.getServerHost()},e.getAllConfig=function(){return n.getAllConfig()},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/settingViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts","./enumConst.ts","./eventName.ts","./app.ts","./serverConfig.ts","./cocosHelper.ts","./globalFuncHelper.ts","./storageHelper.ts"],(function(t){var e,n,a,i,o,r,s,u,c,l,p,d,f,h,g,m,b,y,v,C,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){s=t.cclegacy,u=t._decorator,c=t.Node,l=t.Prefab,p=t.instantiate,d=t.Label},function(t){f=t.BaseViewCmpt},function(t){h=t.PageIndex},function(t){g=t.EventName},function(t){m=t.App},function(t){b=t.ServerConfig},function(t){y=t.CocosHelper},function(t){v=t.GlobalFuncHelper},function(t){C=t.StorageHelper,_=t.StorageHelperKey}],execute:function(){var w,H,S,k,I,N,B;s._RF.push({},"5851b+QnKRAfo5M6KhGfdnW","settingViewCmpt",void 0);var D=u.ccclass,L=u.property;t("settingViewCmpt",(w=D("settingViewCmpt"),H=L(c),S=L(l),w((N=e((I=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).lbName=null,e.lbHeart=null,e.head=null,e.content=null,a(e,"payContent",N,i(e)),a(e,"PayInfoItem",B,i(e)),e}n(e,t);var s=e.prototype;return s.onLoad=function(){for(var e=1;e<10;e++)this["onClick_head"+e]=this.onClickHead.bind(this);t.prototype.onLoad.call(this),this.lbName=this.viewList.get("lbName"),this.lbHeart=this.viewList.get("animNode/content/p/lbHeart"),this.content=this.viewList.get("scrollview/view/content"),this.head=this.viewList.get("bg/head"),this.updateOperateStatus()},s.updateOperateStatus=function(){this.viewList.get("bg/btnSound/off")?(this.viewList.get("bg/btnSound/off").active=!C.getBooleanData(_.Music_Eff_Status),this.viewList.get("bg/btnMusic/off").active=!C.getBooleanData(_.Music_Status)):(this.viewList.get("animNode/content/btnSound/off").active=!C.getBooleanData(_.Music_Eff_Status),this.viewList.get("animNode/content/btnMusic/off").active=!C.getBooleanData(_.Music_Status)),this.lbHeart&&y.updateLabelText(this.lbHeart,"x"+v.getHeart()),this.lbName&&(y.updateLabelText(this.lbName,m.user.rankData.name),this.updateHead(),this.updateHeadInfo("head"+m.user.rankData.icon))},s.loadExtraData=function(){m.audio.play("UI_PopUp")},s.updateHead=function(){this.head&&y.updateUserHeadSpriteAsync(this.head,m.user.rankData.icon)},s.onClick_btnSound=function(){m.audio.play("button_click"),C.setBooleanData(_.Music_Eff_Status,!C.getBooleanData(_.Music_Eff_Status)),this.updateOperateStatus()},s.onClick_btnMusic=function(){m.audio.play("button_click"),C.setBooleanData(_.Music_Status,!C.getBooleanData(_.Music_Status)),this.updateOperateStatus()},s.onClickHead=function(t){m.audio.play("button_click"),this.updateHeadInfo(t.name);var e=+t.name.substring(t.name.length-1,t.name.length);m.user.rankData.icon=e,v.setIcon(e),this.updateHead()},s.updateHeadInfo=function(t){this.head&&this.content.children.forEach((function(e){e.getChildByName("s").active=e.name==t}))},s.onClick_replayBtn=function(){if(this.onClick_closeBtn(),m.audio.play("button_click"),0==v.getHeart())return m.view.showMsgTips("生命值不足"),void m.backHome(!1,h.shop);m.event.emit(g.Game.Restart),v.setHeart(-1)},s.onClick_homeBtn=function(){m.audio.play("button_click"),this.onClick_closeBtn(),m.backHome()},s.showPayInfo=function(){var t=o(r().mark((function t(){var e,n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=m.user.currentUser)&&e.pid){t.next=4;break}return console.warn("未登录，无法查询支付记录"),t.abrupt("return");case 4:return t.next=6,fetch(b.getMainServerAPI()+"/users/"+e.pid+"/payments");case 6:return n=t.sent,t.next=9,n.json();case 9:(a=t.sent).success?(console.log("支付记录：",a.data),this.updatePayInfoUI(a.data)):console.error("查询支付记录失败",a.message);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.formatPayTime=function(t){if(!t)return"未知";try{var e=new Date(t);return isNaN(e.getTime())?(console.warn("无效的日期字符串:",t),t):e.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Asia/Shanghai"})}catch(e){return console.error("格式化支付时间出错:",e,t),t}},s.updatePayInfoUI=function(t){var e=this;if(this.payContent.removeAllChildren(),!t||0===t.length){var n=p(this.PayInfoItem);return n.getChildByName("info").getComponent(d).string="No payment records.",void this.payContent.addChild(n)}t.forEach((function(t){var n=p(e.PayInfoItem),a=e.formatPayTime(t.pay_time);n.getChildByName("info").getComponent(d).string="Order No: "+t.order_no+"  Amount: "+t.amount+"  Pay Time: "+a,e.payContent.addChild(n)}))},e}(f)).prototype,"payContent",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(I.prototype,"PayInfoItem",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=I))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/singletonClass.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"2bc1bhYp31C8I5yjunTi037","singletonClass",void 0);t("SingletonClass",function(){function t(){this._instance=null,this._isValid=!1}t.getInstance=function(t){return null==this.prototype._instance&&(this.prototype._instance=new t),this.prototype._instance};var i=t.prototype;return i.init=function(){this.onInit.apply(this,arguments),this._isValid=!0},i.destroy=function(){this._isValid&&(this.onDestroy(),this._isValid=!1,this._instance=null)},i.onInit=function(){},i.onDestroy=function(){},n(t,[{key:"valid",get:function(){return this._isValid}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/startCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts"],(function(t){var r,e,n,s;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){s=t.BaseViewCmpt}],execute:function(){var c;e._RF.push({},"c5570pneRxP1apLu6UgC9Ua","startCmpt",void 0);var o=n.ccclass;n.property,t("startCmpt",o("startCmpt")(c=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.start=function(){},n.update=function(t){},e}(s))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/storageHelper.ts",["cc","./app.ts","./logHelper.ts"],(function(t){var e,a,s,o;return{setters:[function(t){e=t.cclegacy,a=t.sys},function(t){s=t.App},function(t){o=t.PrintError}],execute:function(){e._RF.push({},"2e5d77HtUNEkpzK/zlWCR4y","storageHelper",void 0);t("StorageHelper",new(function(){function t(){}var e=t.prototype;return e.initData=function(){this.getData(i.Icon)||this.setData(i.Icon,1),this.getData(i.Music_Status)||this.setBooleanData(i.Music_Status,!0),this.getData(i.Music_Eff_Status)||this.setBooleanData(i.Music_Eff_Status,!0),this.getData(i.Zhen_Dong_Status)||this.setBooleanData(i.Zhen_Dong_Status,!0),this.getData(i.Level)||(this.setData(i.Level,1),s.gameLogic.curLevel=1),this.getData(i.Gold)||this.setData(i.Gold,500),this.getData(i.RefreshTools)||this.setData(i.RefreshTools,4),this.getData(i.ToolTime)||this.setData(i.ToolTime,4),this.getData(i.ToolReturn)||this.setData(i.ToolReturn,4),this.getData(i.StarBoxIndex)||this.setData(i.StarBoxIndex,0),this.getData(i.BombHor)||this.setData(i.BombHor,3),this.getData(i.BombVer)||this.setData(i.BombVer,3),this.getData(i.BombBomb)||this.setData(i.BombBomb,3),this.getData(i.BombAllSame)||this.setData(i.BombAllSame,3),this.getData(i.BombHint)||this.setData(i.BombHint,3),this.getData(i.BombExtraSteps)||this.setData(i.BombExtraSteps,3),this.getData(i.BombReshuffle)||this.setData(i.BombReshuffle,3),this.getData(i.Heart)||this.setData(i.Heart,3)},e.getBooleanData=function(t,e){var a=this.getData(t,e);return!!a&&!!+a},e.setBooleanData=function(t,e){var a=e?"1":"0";this.setData(t,a),t==i.Music_Status&&(e?s.audio.resumeMusic():s.audio.stopMusic())},e.getData=function(t,e){if(t){var s,i=a.localStorage.getItem(t);if(!i)return e;try{s=JSON.parse(i)}catch(t){o("解析失败, data="+i),s=null}return s||i}o("StorageHelper 存储的key不能为空")},e.setData=function(t,e){if(t)if(e||0==e){var s="";try{s=JSON.stringify(e)}catch(t){o("解析失败, data="+e),s=null}s&&(e=s),a.localStorage.setItem(t,e),this.addToSyncQueue(t,e)}else o("StorageHelper not data");else o("StorageHelper 存储的key不能为空")},e.addToSyncQueue=function(t,e){if(window.dataSyncManager&&s.user.isLoggedIn){var a="string";"number"==typeof e?a="number":"boolean"==typeof e?a="boolean":"object"==typeof e&&(a="json"),window.dataSyncManager.addToSyncQueue(t,e,a)}},t}()));var i=t("StorageHelperKey",new function(){this.Icon="Icon",this.Audio_Open="Audio_Open",this.Audio_Volume="Audio_Volume",this.Music_Status="Music_Status",this.Music_Eff_Status="Music_Eff_Status",this.Zhen_Dong_Status="Zhen_Dong_Status",this.Level="Level",this.StarScore="StarScore",this.StarReward="StarReward",this.LevelReward="LevelReward",this.Gold="Gold",this.RefreshTools="RefreshTools",this.ToolTime="ToolTime",this.ToolReturn="ToolReturn",this.StarBoxIndex="StarBoxIndex",this.Guide="Guide",this.Star="Star",this.BombHor="BombHor",this.BombVer="BomVerr",this.BombBomb="BombBomb",this.BombAllSame="BombAllSame",this.Heart="Heart",this.BombHint="BombHint",this.BombExtraSteps="BombExtraSteps",this.BombReshuffle="BombReshuffle",this.FirstChargeItem6="FirstChargeItem6",this.FirstChargeItem7="FirstChargeItem7",this.FirstChargeItem8="FirstChargeItem8",this.FirstChargeItem9="FirstChargeItem9",this.FirstChargeItem10="FirstChargeItem10"});e._RF.pop()}}}));

System.register("chunks:///_virtual/subGameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singletonClass.ts"],(function(n){var e,s,t;return{setters:[function(n){e=n.inheritsLoose},function(n){s=n.cclegacy},function(n){t=n.SingletonClass}],execute:function(){s._RF.push({},"148e8M9suxL7IQJo5WYysGm","subGameManager",void 0);n("SubGameManager",function(n){function s(){return n.apply(this,arguments)||this}return e(s,n),s}(t));s._RF.pop()}}}));

System.register("chunks:///_virtual/tileCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts"],(function(t){var e,i,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator},function(t){r=t.BaseViewCmpt}],execute:function(){var c;i._RF.push({},"057992TSIdA57l2pwSOz1HO","tileCmpt",void 0);var s=n.ccclass;n.property,t("TileCmpt",s("TileCmpt")(c=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i}(r))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/timeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./eventName.ts","./app.ts","./singletonClass.ts"],(function(n){var t,e,i,o,s;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){i=n.EventName},function(n){o=n.App},function(n){s=n.SingletonClass}],execute:function(){e._RF.push({},"a8272OhvdVIV53O/161g+FV","timeManager",void 0);n("default",function(n){function e(){var t;return(t=n.call(this)||this).TimeDownConst=60,t.TimeDown=0,t._isDoing=!0,t}t(e,n);var s=e.prototype;return s.onInit=function(){setInterval(this.updateSecound.bind(this),1e3)},s.updateSecound=function(){this._isDoing&&(o.gameLogic.isFrezenTime||this.TimeDown--,o.event.emit(i.Game.TIMER_DOWN))},s.stopAll=function(){this._isDoing=!1},s.reStart=function(){this._isDoing=!0},e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/tipsViewCmpt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts","./cocosHelper.ts","./toolsHelper.ts"],(function(t){var e,n,o,i,s,r,c,p,u,a;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){i=t.cclegacy,s=t._decorator,r=t.Vec3,c=t.tween},function(t){p=t.BaseViewCmpt},function(t){u=t.CocosHelper},function(t){a=t.ToolsHelper}],execute:function(){var l;i._RF.push({},"fb0d4eQ+5lBVbkohQEjgq1L","tipsViewCmpt",void 0);var f=s.ccclass;s.property,t("tipsViewCmpt",f("tipsViewCmpt")(l=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var s=i.prototype;return s.onLoad=function(){t.prototype.onLoad.call(this)},s.setTips=function(t){u.updateLabelText(this.viewList.get("animNode/lb"),t,!1)},s.setCloseFunc=function(){var t=n(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.delayTime(2);case 2:c(this.node).to(.5,{position:new r(0,1e3)}).call((function(){e&&e()})).start();case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.upMove=function(){var t=this.node.position,e=new r(t.x,t.y+100,t.z);this.node.setPosition(e)},i}(p))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/toolsHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o,a,i;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy,a=t.sys,i=t.Sprite}],execute:function(){o._RF.push({},"ce45ac17OxKSZ//ADHhu2f1","toolsHelper",void 0);var u=t("ToolsHelper",new(function(){function t(){this._timeoutIdTab=new Map}var o=t.prototype;return o.arrayRandomItem=function(t){return Array.isArray(t)?t[Math.ceil(Math.random()*t.length)-1]:t},o.getRandomCode=function(){var t=u.getRandom(0,10);return t<3?String.fromCodePoint(u.getRandom(97,122)):t<6?String.fromCodePoint(u.getRandom(65,90)):String.fromCodePoint(u.getRandom(48,57))},o.weightedRandom=function(t,e){for(var n=t.reduce((function(t,e){return t+e}),0),r=Math.random()*n,o=0,a=0;a<t.length;a++)if(r<=(o+=t[a]))return e[a];return null},o.getChipsByMoney=function(t,e){for(var n=[],r=e.length-1;r>=0;r--){var o=e[r];if(!(o>t)){var a=Math.floor(t/o);if(!(a<1)){for(;a-- >0;)n.push(e[r]);if(0===(t%=o))break}}}return n},o.getRandom=function(t,e,n){void 0===n&&(n=!0);var r=n?e-t+1:e-t,o=Math.random()*r;return Math.floor(o+t)},o.getRandf=function(t,e){return(Math.random()*(Math.round(Math.random())?-1:1)/2+.5)*(e-t)+t},o.toSecBySeconds=function(t){if(t<=0)return"00:00:00";var e=this.toMinBySeconds(t);e+=":";var n=Math.floor(t%60);return n<10&&(e+="0"),e+=n.toFixed(0)},o.toMinBySeconds=function(t){if(t<=0)return"00:00";var e="",n=Math.floor(t/3600),r=Math.floor(t/60)%60;return e=n<10?n>0?"0"+n+":":"00:":n+":",r<10&&(e+="0"),e+=r},o.toMinBySeconds2=function(t){if(t<=0)return"00:00";var e="",n=Math.floor(t/60)%60;e=n<10?n>0?"0"+n+":":"00:":n+":";var r=Math.floor(t%60);return r<10&&(e+="0"),e+=r.toFixed(0)},o.toDayHourBySeconds=function(t){var e={day:0,h:0,m:0,s:0};if(t<0)return e;var n=Math.floor(t/86400);t%=86400;var r=Math.floor(t/3600);return t%=3600,e={day:n,h:r,m:Math.floor(t/60),s:t%=60}},o.toFullTimeData=function(t){var e=new Date(1e3*t);return{y:e.getFullYear(),m1:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m2:e.getMinutes(),s:e.getSeconds()}},o.cloneMap=function(t){if(!(t instanceof Map))return null;for(var n,r=new Map,o=e(t);!(n=o()).done;){var a=n.value,i=a[0],u=a[1],c=void 0;c=u instanceof Map?this.cloneMap(u):u,r.set(i,c)}return r},o.cloneObject=function(t){return JSON.parse(JSON.stringify(t))},o.moneyToThousands=function(t){t/=100;for(var e=parseFloat((t+"").replace(/[^\d\.-]/g,"")).toFixed(2)+"",n=e.split(".")[0].split("").reverse(),r=e.split(".")[1],o="",a=0;a<n.length;a++)o+=n[a]+((a+1)%3==0&&a+1!=n.length?",":"");return o.split("").reverse().join("")+"."+r},o.moneyToMillion=function(t){t/=1e4;for(var e=parseFloat((t+"").replace(/[^\d\.-]/g,"")).toFixed(2)+"",n=e.split(".")[0].split("").reverse(),r=e.split(".")[1],o="",a=0;a<n.length;a++)o+=n[a]+((a+1)%3==0&&a+1!=n.length?",":"");return o.split("").reverse().join("")+"."+r},o.getCurTime=function(){var t=new Date;return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()+" ")+(t.getHours()+":")+(t.getMinutes()+":")+t.getSeconds()+":>>"},o.delayTime=function(){var t=n(r().mark((function t(e,n){var o,a,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=0),void 0===n&&(n=0),this._timeoutIdTab.has(n)||this._timeoutIdTab.set(n,[]),o=this._timeoutIdTab.get(n),t.next=6,new Promise((function(t){a=setTimeout(t,1e3*e),o.push(a)}));case 6:~(i=o.indexOf(a))&&o.splice(i,1);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),o.clearDelayTime=function(t){(void 0===t&&(t=0),this._timeoutIdTab.has(t))&&this._timeoutIdTab.get(t).forEach((function(t){clearTimeout(t)}))},o.getUUid=function(){return""},o.matchChinese=function(t){return/[\u4E00-\u9FA5\uF900-\uFA2D]/.test(t)},o.matchLetterNumber=function(t){return t.match(/[a-zA-Z0-9]*/g)},o.matchHtmlElement=function(t){return t.match(/<([^>]+)>/g)},o.checkAccountExist=function(){return null},o.matchHtmlContent=function(t){return!!t.match(/<([a-zA-Z]+)[^>]*>([^<]*)<\/\1>/g)},o.showClearEditContentBtn=function(t,e){""!=t.trim()?e.active=!0:e.active=!1},o.matchClipboardContent=function(t){return/Nuggets-Share=.*?/.test(t)?t:""},o.matchNumber=function(t){return t.match(/\d+/g)},o.getFullTime=function(t){var e=this.toFullTimeData(t),n=e.m1>9?e.m1:"0"+e.m1,r=e.d>9?e.d:"0"+e.d,o=e.h>9?e.h:"0"+e.h,a=e.m2>9?e.m2:"0"+e.m2,i=e.s>9?e.s:"0"+e.s;return e.y+"/"+n+"/"+r+" "+o+":"+a+":"+i},o.getMoneyByContry=function(t){var e=u.moneyToThousands(t);return this.getMoneyType()+e},o.getMoneyType=function(){return"R$"},o.openUrl=function(t){a.openURL(t)},o.convertRoleName=function(t){return(t.length>4?t.substring(0,4):t.substring(0,Math.floor(.5*t.length)))+"***"},o.convertRoleName2=function(t,e){void 0===e&&(e=4);var n=t,r=e;return t.length>r&&(n=t.substring(0,r)+"***"),n},o.reSet2DArray=function(t){var e=t;Array.isArray(t[0])||(e=[t[0]]);return e},o.setNodeGray=function(t,e){var n=t.getComponent(i);n&&(n.grayscale=e);for(var r=0;r<t.children.length;r++)this.setNodeGray(t.children[r],e)},t}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/userInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./eventName.ts","./routers.ts","./globalFuncHelper.ts","./storageHelper.ts","./app.ts","./singletonClass.ts","./serverConfig.ts","./dataSyncManager.ts"],(function(e){var t,n,r,o,s,a,c,i,u,l,p,f,g,h;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,s=e.sys},function(e){a=e.EventName},function(e){c=e.Router},function(e){i=e.GlobalFuncHelper},function(e){u=e.StorageHelper,l=e.StorageHelperKey},function(e){p=e.App},function(e){f=e.SingletonClass},function(e){g=e.ServerConfig},function(e){h=e.DataSyncManager}],execute:function(){o._RF.push({},"92568tI/dFNWIkbntDk95QM","userInfo",void 0);e("UserInfo",function(e){function o(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).rankData={star:0,id:0,level:0,icon:i.getIcon(),name:"",gold:0,rank:0,time:""},t.pid=0,t.ACCOUNT_API=g.getMainServerAPI(),t.isLoggedIn=!1,t.currentUser=null,t}t(o,e);var f=o.prototype;return f.updateRankData=function(e){this.rankData=e},f.init=function(){this.rankData.name="Happy Barry",p.event.on(c.rut_login,this.evtLogin,this),this.checkSavedLogin()},f.evtLogin=function(e){this.pid=e.msg.user.pid,console.log("-------------------- pid -------------------"),console.log("-------------------- pid -------------------"),console.log("-------------------- pid -------------------"),console.log(this.pid)},f.registerUser=function(){var e=n(r().mark((function e(t,n,o){var s,a,c,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("[Register] 开始注册请求:",{pid:t,name:n,password:"***"}),console.log("[Register] 请求URL:",this.ACCOUNT_API+"/users"),e.prev=3,s=new AbortController,a=setTimeout((function(){return s.abort()}),1e4),e.next=8,fetch(this.ACCOUNT_API+"/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({pid:t,name:n,password:o}),signal:s.signal});case 8:if(c=e.sent,clearTimeout(a),console.log("[Register] 响应状态:",c.status),c.ok){e.next=14;break}return console.error("[Register] HTTP错误:",c.status,c.statusText),e.abrupt("return",!1);case 14:return e.next=16,c.json();case 16:if(i=e.sent,console.log("[Register] 响应数据:",i),!i.success){e.next=23;break}return console.log("用户注册成功:",i.data),e.abrupt("return",!0);case 23:return console.error("用户注册失败:",i.message),e.abrupt("return",!1);case 25:e.next=31;break;case 27:return e.prev=27,e.t0=e.catch(3),console.log("[Register] Fetch失败，尝试XMLHttpRequest:",e.t0),e.abrupt("return",this.registerUserWithXHR(t,n,o));case 31:e.next=37;break;case 33:return e.prev=33,e.t1=e.catch(0),console.error("[Register] 注册请求异常:",e.t1),e.abrupt("return",!1);case 37:case"end":return e.stop()}}),e,this,[[0,33],[3,27]])})));return function(t,n,r){return e.apply(this,arguments)}}(),f.registerUserWithXHR=function(e,t,n){var r=this;return new Promise((function(o){var s=new XMLHttpRequest;s.timeout=1e4;var a=r.ACCOUNT_API;s.onreadystatechange=function(){if(4===s.readyState)if(console.log("[Register XHR] 状态:",s.status),console.log("[Register XHR] 响应:",s.responseText),200===s.status)try{var e=JSON.parse(s.responseText);e.success?(console.log("用户注册成功(XHR):",e.data),o(!0)):(console.error("用户注册失败(XHR):",e.message),o(!1))}catch(e){console.error("[Register XHR] JSON解析失败:",e),o(!1)}else console.error("[Register XHR] HTTP错误:",s.status),o(!1)},s.ontimeout=function(){console.error("[Register XHR] 请求超时"),o(!1)},s.onerror=function(){console.error("[Register XHR] 网络错误"),o(!1)},s.open("POST",a+"/users",!0),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Accept","application/json"),s.send(JSON.stringify({pid:e,name:t,password:n}))}))},f.loginUser=function(){var e=n(r().mark((function e(t,n){var o,s,a,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("[Login] 开始登录请求:",{pid:t,password:"***"}),console.log("[Login] 请求URL:",this.ACCOUNT_API+"/login"),e.prev=3,o=new AbortController,s=setTimeout((function(){return o.abort()}),1e4),e.next=8,fetch(this.ACCOUNT_API+"/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({pid:t,password:n}),signal:o.signal});case 8:if(a=e.sent,clearTimeout(s),console.log("[Login] 响应状态:",a.status),a.ok){e.next=14;break}return console.error("[Login] HTTP错误:",a.status,a.statusText),e.abrupt("return",!1);case 14:return e.next=16,a.json();case 16:if(c=e.sent,console.log("[Login] 响应数据:",c),!c.success){e.next=28;break}return console.log("用户登录成功:",c.data),this.isLoggedIn=!0,this.currentUser=c.data,this.saveLoginInfo(t,n),e.next=25,this.syncUserData(c.data);case 25:return e.abrupt("return",!0);case 28:return console.error("用户登录失败:",c.message),e.abrupt("return",!1);case 30:e.next=36;break;case 32:return e.prev=32,e.t0=e.catch(3),console.log("[Login] Fetch失败，尝试XMLHttpRequest:",e.t0),e.abrupt("return",this.loginUserWithXHR(t,n));case 36:e.next=42;break;case 38:return e.prev=38,e.t1=e.catch(0),console.error("[Login] 登录请求异常:",e.t1),e.abrupt("return",!1);case 42:case"end":return e.stop()}}),e,this,[[0,38],[3,32]])})));return function(t,n){return e.apply(this,arguments)}}(),f.loginUserWithXHR=function(e,t){var n=this;return new Promise((function(r){var o=new XMLHttpRequest;o.timeout=1e4;var s=n.ACCOUNT_API,a=n;o.onreadystatechange=function(){if(4===o.readyState)if(console.log("[Login XHR] 状态:",o.status),console.log("[Login XHR] 响应:",o.responseText),200===o.status)try{var n=JSON.parse(o.responseText);n.success?(console.log("用户登录成功(XHR):",n.data),a.isLoggedIn=!0,a.currentUser=n.data,a.saveLoginInfo(e,t),a.syncUserData(n.data).then((function(){r(!0)})).catch((function(e){console.error("[Login XHR] 同步用户数据失败:",e),r(!0)}))):(console.error("用户登录失败(XHR):",n.message),r(!1))}catch(e){console.error("[Login XHR] JSON解析失败:",e),r(!1)}else console.error("[Login XHR] HTTP错误:",o.status),r(!1)},o.ontimeout=function(){console.error("[Login XHR] 请求超时"),r(!1)},o.onerror=function(){console.error("[Login XHR] 网络错误"),r(!1)},o.open("POST",s+"/login",!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","application/json"),o.send(JSON.stringify({pid:e,password:t}))}))},f.syncUserData=function(){var e=n(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[UserInfo] syncUserData 开始，用户数据:",t),this.rankData.name=t.name,this.rankData.gold=t.gold,this.rankData.level=t.level,this.rankData.icon=t.icon,console.log("[UserInfo] 更新rankData完成:",this.rankData),u.setData(l.Gold,t.gold),u.setData(l.Level,t.level),console.log("[UserInfo] 本地存储更新完成，当前金币:",i.getGold()),p.event.emit(a.Game.UpdataGold),console.log("[UserInfo] 开始初始化数据同步管理器..."),e.next=13,this.initDataSyncManager();case 13:return console.log("[UserInfo] 开始从服务器获取用户游戏数据..."),e.next=16,this.fetchUserGameData();case 16:console.log("[UserInfo] syncUserData 完成，最终金币:",i.getGold());case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),f.initDataSyncManager=function(){var e=n(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{setTimeout((function(){try{var e=h.getInstance();window.dataSyncManager=e,console.log("[UserInfo] 数据同步管理器初始化成功")}catch(e){console.error("[UserInfo] 初始化数据同步管理器失败:",e)}}),1e3)}catch(e){console.error("[UserInfo] 初始化数据同步管理器失败:",e)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f.fetchUserGameData=function(){var e=n(r().mark((function e(){var t,n,o,s,c=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=null==(t=this.currentUser)?void 0:t.id){e.next=5;break}return console.warn("[UserInfo] 用户ID不存在，跳过获取游戏数据"),e.abrupt("return");case 5:return console.log("[UserInfo] 开始从服务器获取用户游戏数据，用户ID:",n),e.next=8,fetch(g.getMainServerURL()+"/api/user/get-game-data?userId="+n);case 8:return o=e.sent,e.next=11,o.json();case 11:if(!(s=e.sent).success||!s.data){e.next=19;break}console.log("[UserInfo] 从服务器获取游戏数据成功:",s.data),s.data.forEach((function(e){if("Gold"===e.key){var t=parseInt(e.value);u.setData(l.Gold,t),c.rankData.gold=t,console.log("[UserInfo] 更新金币数据:",t)}else if("Level"===e.key){var n=parseInt(e.value);u.setData(l.Level,n),c.rankData.level=n,console.log("[UserInfo] 更新等级数据:",n)}})),p.event.emit(a.Game.UpdataGold),console.log("[UserInfo] 本地存储和UI已更新"),e.next=22;break;case 19:return console.log("[UserInfo] 从服务器获取游戏数据失败，尝试初始化默认数据"),e.next=22,this.initializeUserGameData();case 22:e.next=29;break;case 24:return e.prev=24,e.t0=e.catch(0),console.error("[UserInfo] 获取用户游戏数据失败:",e.t0),e.next=29,this.initializeUserGameData();case 29:case"end":return e.stop()}}),e,this,[[0,24]])})));return function(){return e.apply(this,arguments)}}(),f.initializeUserGameData=function(){var e=n(r().mark((function e(){var t,n,o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=null==(t=this.currentUser)?void 0:t.id){e.next=5;break}return console.warn("[UserInfo] 用户ID不存在，跳过初始化游戏数据"),e.abrupt("return");case 5:return console.log("[UserInfo] 开始初始化用户游戏数据，用户ID:",n),e.next=8,fetch(g.getMainServerURL()+"/api/user/init-game-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n})});case 8:return o=e.sent,e.next=11,o.json();case 11:if(!(s=e.sent).success){e.next=18;break}return console.log("[UserInfo] 用户游戏数据初始化成功"),e.next=16,this.fetchUserGameData();case 16:e.next=19;break;case 18:console.error("[UserInfo] 用户游戏数据初始化失败:",s.message);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("[UserInfo] 初始化用户游戏数据失败:",e.t0);case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),f.saveLoginInfo=function(e,t){var n={pid:e,password:t,timestamp:Date.now()};s.localStorage.setItem("loginInfo",JSON.stringify(n))},f.checkSavedLogin=function(){var e=n(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=s.localStorage.getItem("loginInfo"))){e.next=14;break}if(e.prev=2,n=JSON.parse(t),!(Date.now()-n.timestamp<6048e5)){e.next=9;break}return e.next=7,this.loginUser(n.pid,n.password);case 7:e.sent&&console.log("自动登录成功");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("检查保存的登录信息失败:",e.t0);case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),f.updateUserData=function(){var e=n(r().mark((function e(t){var n,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoggedIn&&this.currentUser){e.next=3;break}return console.error("用户未登录"),e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,fetch(this.ACCOUNT_API+"/users/"+this.currentUser.pid,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 6:return n=e.sent,e.next=9,n.json();case 9:if(!(o=e.sent).success){e.next=15;break}return console.log("用户数据更新成功"),e.abrupt("return",!0);case 15:return console.error("用户数据更新失败:",o.message),e.abrupt("return",!1);case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(3),console.error("更新用户数据请求失败:",e.t0),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,this,[[3,19]])})));return function(t){return e.apply(this,arguments)}}(),f.logout=function(){this.isLoggedIn=!1,this.currentUser=null,s.localStorage.removeItem("loginInfo"),console.log("用户已登出")},f.getUserInfo=function(){var e=n(r().mark((function e(t){var n,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.ACCOUNT_API+"/users/"+t);case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(o=e.sent).success){e.next=11;break}return e.abrupt("return",o.data);case 11:return console.error("获取用户信息失败:",o.message),e.abrupt("return",null);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),console.error("获取用户信息请求失败:",e.t0),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),f.testSimpleConnection=function(){var e=n(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){console.log("[Simple Network] 开始简单连接测试");var n=t.ACCOUNT_API.replace("/admin/api","")+"/test";fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){console.log("[Simple Network] Fetch API连接成功"),e(!0)})).catch((function(t){console.log("[Simple Network] Fetch失败，尝试XMLHttpRequest:",t);var r=new XMLHttpRequest;r.timeout=5e3,r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(console.log("[Simple Network] XHR API连接成功"),e(!0)):(console.error("[Simple Network] XHR API连接失败:",r.status),e(!1)))},r.ontimeout=function(){console.error("[Simple Network] XHR请求超时"),e(!1)},r.onerror=function(){console.error("[Simple Network] XHR网络错误"),e(!1)},r.open("GET",n,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("Accept","application/json"),r.send()}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o}(f));o._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,o,a,u,c,i;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){n=e.cclegacy,o=e.sys,a=e.Vec3,u=e.Texture2D,c=e.ImageAsset,i=e.SpriteFrame}],execute:function(){e({copyVec3Array:function(e){for(var r=[],t=0;t<e.length;t++){var n=new a(e[t].x,e[t].y,e[t].z);r.push(n)}return r},getBase64Data:function(e){return s.apply(this,arguments)},getBase64SpriteFrame:function(e){return f.apply(this,arguments)},getDay:function(){var e=(new Date).getFullYear().toString(),r=(new Date).getTime()-new Date(e).getTime(),t=Math.ceil(r/864e5)+1;return console.log("今天是%s年中的第%s天",e,t),t},getIp:function(e){o.platform==o.Platform.WECHAT_GAME||(o.platform,o.Platform.BYTEDANCE_MINI_GAME);return""},shuffle:function(e){for(var r=1;r<e.length;r++){var t=Math.floor(Math.random()*(r+1)),n=e[t];e[t]=e[r],e[r]=n}return e},unitVec3:function(e){return new a(Math.floor(e.x),Math.floor(e.y),Math.floor(e.z))}}),n._RF.push({},"0c812zqnDNP3JmNG/3OWpKo","util",void 0);e("IpType",function(e){return e[e.local=0]="local",e[e.remote=1]="remote",e}({})),e("ServerType",function(e){return e[e.connectorServer=100]="connectorServer",e[e.gameServer=101]="gameServer",e[e.userServer=102]="userServer",e}({})),e("ServerPort",function(e){return e[e.gameServer=9e3]="gameServer",e[e.userServer=9001]="userServer",e[e.connector=8999]="connector",e}({}));function s(){return(s=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var t=r.spriteFrame.texture,n="",o=new Image;o.src=t,o.onload=function(){var r=document.createElement("canvas");r.width=o.width,r.height=o.height,r.getContext("2d").drawImage(o,0,0,o.width,o.height),n=r.toDataURL("image/png"),console.log(n),e(n)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var t=new u,n=new Image;n.src=r,n.onload=function(){t.image=new c(n);var r=new i;r.texture=t,e(r)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/viewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseViewCmpt.ts","./prefabPool.ts","./enumConst.ts","./viewNameConst.ts","./tipsViewCmpt.ts","./logHelper.ts","./resLoadHelper.ts","./singletonClass.ts"],(function(e){var t,i,n,s,r,a,o,u,c,l,w,h,p,m,f,V,d,g,v,y;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose,n=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e.isValid,o=e.director,u=e.Vec3,c=e.instantiate,l=e.Prefab},function(e){w=e.BaseViewCmpt},function(e){h=e.PrefabPool},function(e){p=e.WindowType,m=e.WindowOpenType},function(e){f=e.ViewName},function(e){V=e.tipsViewCmpt},function(e){d=e.PrintLog,g=e.PrintError},function(e){v=e.ResLoadHelper},function(e){y=e.SingletonClass}],execute:function(){r._RF.push({},"efbecumL1BMJZnaWgzpVnaD","viewManager",void 0);e("ViewManager",function(e){function r(){var t;return(t=e.call(this)||this).sceneNode=void 0,t.allView=new Map,t.multiView=[],t.curMultiView=void 0,t.isExistMultiView=!1,t.isViewOpening=!1,t.waitOpenViewList=[],t.msgPool=void 0,t.msgCmptArr=[],t.isShowMask=void 0,t.netMaskTips=void 0,t.foreverNodeArr=[f.Single.eMarquee],t.msgPool=new h,t.msgPool.initPool(""+f.Multiple.eMsg,10),t}t(r,e);var y=r.prototype;return y.onInit=function(e){this.sceneNode=e},y.openView=function(){var e=n(s().mark((function e(t){var i,n,r,a,o,u,h,p=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=p.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=p[r];if(!this.isViewOpening){e.next=4;break}return this.waitOpenViewList.push({name:t,data:n}),e.abrupt("return");case 4:if(this.getViewByName(t)){e.next=22;break}return this.isViewOpening=!0,e.next=8,v.loadPrefabSync(""+t);case 8:if(o=e.sent){e.next=18;break}return e.next=12,v.loadCommonAssetSync(""+t,l);case 12:if(o=e.sent){e.next=18;break}return g("ViewManager openView not prefab = "+t),this.isViewOpening=!1,this.openWaitView(),e.abrupt("return");case 18:u=c(o),a=u.getComponent(w),e.next=23;break;case 22:a=this.getViewByName(t);case 23:if(a){e.next=26;break}return g("ViewManager openView not Cmpt = "+t),e.abrupt("return");case 26:return a.viewOpenType==m.eSingle?(this.getViewByName(t)?d(" open repeat view !!!"):(this.getRootView(a.viewType).addChild(a.node),a.node.attr({viewName:t}),this.allView.set(t,a)),(h=a).loadExtraData.apply(h,n)):(a.node.attr({viewName:t}),this.setMultiView.apply(this,[a].concat(n))),d(" openView = "+t),this.isViewOpening=!1,this.openWaitView(),e.abrupt("return",a.node);case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),y.runScene=function(){var e=n(s().mark((function e(t,n){var r,a,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!=o.getScene().name){e.next=3;break}return g(" runScene same Scene "),e.abrupt("return");case 3:return e.next=5,new Promise((function(e){o.preloadScene(t,e)}));case 5:for(r=i(this.allView);!(a=r()).done;)u=a.value,c=u[0],this.closeView(c);this.allView.clear(),this.netMaskTips&&this.netMaskTips.removeFromParent(),this.netMaskTips=null,o.loadScene(t);case 10:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),y.showAlertText=function(e,t,i,n,s,r){},y.showMsgTips=function(){var e=n(s().mark((function e(t){var i,n,r,a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.msgPool.getNode();case 2:for((i=e.sent).setPosition(new u),this.sceneNode.getChildByName("toast").addChild(i),(n=i.getComponent(V)).setTips(t),n.setCloseFunc((function(){a.msgCmptArr.shift(),a.msgPool.putNode(i)})),r=0;r<this.msgCmptArr.length;r++)this.msgCmptArr[r].upMove();this.msgCmptArr.push(n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),y.closeView=function(e){var t=this.getViewByName(e);t?(d(" closeView = "+e),this.delViewByName(e),t.onClose()):d("closeView not found = "+e)},y.closeTopView=function(){for(var e,t=0,n=i(this.allView);!(e=n()).done;){var s=e.value,r=s[0];s[1];(t+=1)==this.allView.size&&this.closeView(r)}},y.isForeverNode=function(e){return this.foreverNodeArr.indexOf(e)>-1},y.backLobbyView=function(){var e=this;this.allView.forEach((function(t){var i=t.node.viewName;e.isForeverNode(i)||e.closeView(i)})),this.multiView.length=0,this.multiView=[]},y.getCurName=function(){for(var e,t=0,n=i(this.allView);!(e=n()).done;){var s=e.value,r=s[0];s[1];if((t+=1)==this.allView.size)return r}return null},y.isExistView=function(e){for(var t,n=i(this.allView);!(t=n()).done;){var s=t.value;s[0];if(s[1].node.viewName==e)return!0}return!1},y.getViews=function(){return this.allView.keys},y.getViewByName=function(e){return this.curMultiView&&a(this.curMultiView.node)&&e==this.curMultiView.node.viewName?this.curMultiView:this.allView.has(e)?this.allView.get(e):null},y.delViewByName=function(e){this.getViewByName(e)&&this.allView.delete(e)},y.openWaitView=function(){if(this.waitOpenViewList&&this.waitOpenViewList.length){var e=this.waitOpenViewList.shift();this.openView.apply(this,[e.name].concat(e.data))}},y.getRootView=function(e){if(!this.sceneNode)return o.getScene().getChildByName("Canvas")||o.getScene();var t;switch(e){case p.eMap:t=this.sceneNode.getChildByName("map");break;case p.eView:t=this.sceneNode.getChildByName("view");break;case p.eTips:t=this.sceneNode.getChildByName("tips");break;case p.eMarquee:t=this.sceneNode.getChildByName("marquee");break;case p.eToast:t=this.sceneNode.getChildByName("toast");break;case p.eNetwork:t=this.sceneNode.getChildByName("network")}return!t&&(t=o.getScene().getChildByName("Canvas"))||o.getScene(),t},y.addChildToTipsLayer=function(e,t){var i=this.getRootView(p.eTips),n=new u;console.log(n),e.setPosition(n),i.addChild(e)},y.setMultiView=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.multiView.length||this.isExistMultiView?(this.multiView.push({cmpt:e,data:i}),this.multiView.sort((function(e,t){return e.cmpt.viewType-t.cmpt.viewType}))):(this.multiView.push({cmpt:e,data:i}),this.nextMultiView())},y.nextMultiView=function(){var e=n(s().mark((function e(){var t,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.multiView.length){e.next=3;break}return this.isExistMultiView=!1,e.abrupt("return");case 3:return this.isExistMultiView=!0,i=this.multiView.shift(),this.curMultiView=i.cmpt,this.getRootView(i.cmpt.viewType).addChild(i.cmpt.node),(t=i.cmpt).loadExtraData.apply(t,i.data),e.next=11,new Promise((function(e){i.cmpt.setCloseFunc(e)}));case 11:this.nextMultiView();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),y.showMarquee=function(e){var t=this.getViewByName(f.Single.eMarquee);t?e&&t.getComponent(w).loadExtraData(e):this.openView(f.Single.eMarquee,e)},y.getCommonGoodsItem=function(){var e=n(s().mark((function e(t){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.loadCommonAssetSync("common/goodsItem",l);case 2:if(!(i=e.sent)){e.next=5;break}return e.abrupt("return",c(i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r}(y));r._RF.pop()}}}));

System.register("chunks:///_virtual/viewNameConst.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){var u;e("ViewName",void 0),i._RF.push({},"f5e413VR6pGubT+2JeS4qCY","viewNameConst",void 0),function(e){var i=function(e){return e.eTest="ui/testView",e.eMarquee="ui/marquee/marqueeView",e.eHomeView="ui/homeView",e.eGameView="ui/gameView",e.eResultView="ui/resultView",e.eWinView="ui/winView",e.eSettingView="ui/settingView",e.ePaurseView="ui/paurseView",e.eLoadingView="ui/loadingView",e.eGoldRewrdView="ui/goldRewrdView",e.eShareView="ui/shareView",e.eBuyView="ui/buyView",e.eloseView="ui/loseView",e.eLevelTargetView="ui/levelTargetView",e.esettingGameView="ui/settingGameView",e.eChallengeView="ui/challengeView",e.eGuideView="ui/guideView",e.eAcrossView="ui/acrossView",e.eLoginView="ui/loginView",e}({});e.Single=i;var u=function(e){return e.eAlert="common/alertView",e.eMsg="ui/tipsView",e}({});e.Multiple=u;var w=function(e){return e.rocket="rocket",e.particle="particle",e.grid="grid",e.score="score",e.block="block",e.map="map",e}({});e.Pieces=w}(u||(u=e("ViewName",{}))),i._RF.pop()}}}));

System.register("chunks:///_virtual/webPlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app.ts","./logHelper.ts","./toolsHelper.ts","./basePlatform.ts"],(function(e){var t,n,r,o,a,i,u,c,s,l,f;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,i=e.assetManager},function(e){u=e.App},function(e){c=e.PrintLog,s=e.PrintError},function(e){l=e.ToolsHelper},function(e){f=e.BasePlatform}],execute:function(){a._RF.push({},"b3474h7hB9OkoY4qXVh7G2W","webPlatform",void 0);e("WebPlatform",function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var f=a.prototype;return f.getUUid=function(){return l.getUUid()},f.copyToClipboard=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";var n,r=getSelection();r.rangeCount>0&&(n=r.getRangeAt(0)),document.body.appendChild(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length;try{document.execCommand("copy")}catch(e){}document.body.removeChild(t),n&&(r.removeAllRanges(),r.addRange(n)),u.view.showMsgTips("复制成功")},f.getClipboardContent=function(){var e=n(r().mark((function e(t){var n,a,i,u,c,s,l,f,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.navigator.clipboard.read();case 3:n=e.sent,a="",i=o(n);case 6:if((u=i()).done){e.next=22;break}c=u.value,s=o(c.types);case 9:if((l=s()).done){e.next=20;break}return f=l.value,e.next=13,c.getType(f);case 13:if(!(p=e.sent)||"text/plain"!=p.type){e.next=18;break}return e.next=17,p.text();case 17:a=e.sent;case 18:e.next=9;break;case 20:e.next=6;break;case 22:return t&&t(a),e.abrupt("return",a);case 26:e.prev=26,e.t0=e.catch(0),t&&t(null);case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}(),f.getPackageName=function(){return new Promise((function(e){e("")}))},f.getAppVersion=function(){return""},f.checkIsEmulator=function(){return!1},f.sendNativeMsg=function(e,t){throw new Error("Method not implemented.")},f.receiveNativeMsg=function(e){throw new Error("Method not implemented.")},f.loadGame=function(e){var t=""+e;return new Promise((function(n){var r=i.getBundle(t);r?n(r):i.loadBundle(""+e,{onFileProgress:function(e){c(" load game progress = "+e.progress)}},(function(e,t){if(e)return s(e),void n(null);n(t)}))}))},f.savePicture=function(e){},f.faceBookLogin=function(){return""},f.faceBookLoginOut=function(){return!1},f.loginGoogle=function(){return""},f.loginOutGoogle=function(){return!1},f.faceBookShare=function(){return!1},f.whatsAppShare=function(e){return!1},a}(f));a._RF.pop()}}}));

System.register("chunks:///_virtual/wxManager.ts",["cc","./enumConst.ts","./eventName.ts","./app.ts","./globalFuncHelper.ts","./advertise.ts"],(function(e){var t,o,n,i,s,r,a;return{setters:[function(e){t=e.cclegacy,o=e.sys},function(e){n=e.Bomb},function(e){i=e.EventName},function(e){s=e.App},function(e){r=e.GlobalFuncHelper},function(e){a=e.Advertise}],execute:function(){t._RF.push({},"9df71uc0lBP/rbf21UKe0qM","wxManager",void 0);e("IsGetInfo",!1);var c=e("WxManager",function(){function e(){this.wxCode=""}var t=e.prototype;return t.init=function(){s.event.on(i.Game.Share,this._evtShareToOthers,this),this._wxLogin()},t._wxLogin=function(){if(o.platform==o.Platform.WECHAT_GAME){console.log("start_login");var e=this;wx.login({success:function(t){console.log("loginSuccess"),e.wxCode=t.code,e._wxGetUserState()}.bind(this)})}},t._wxGetUserState=function(){if(o.platform==o.Platform.WECHAT_GAME){console.log("_wxGetUserState");var e=this;wx.getSetting({fail:function(t){console.log("_wxGetUserState1"),e._wxPrivacy()}.bind(this),success:function(t){console.log("_wxGetUserState2"),t.authSetting["scope.userInfo"]?(console.log("获取用户状态成功"),e._requirePrivaceAuthorize()):e._wxPrivacy()}.bind(this)})}},t._wxPrivacy=function(){if(o.platform==o.Platform.WECHAT_GAME){this._requirePrivaceAuthorize()}},t._requirePrivaceAuthorize=function(){if(o.platform==o.Platform.WECHAT_GAME){var e=this;wx.requirePrivacyAuthorize({success:function(t){console.log("-------- privacy --------"),console.log(t),e._wxGetUserInfo()},fail:function(){},complete:function(){}})}},t._wxGetUserInfo=function(){if(o.platform==o.Platform.WECHAT_GAME){console.log("手动授权 wxgetuserInfo");var e=this,t=wx.createUserInfoButton({type:"text",text:"click",style:{left:0,top:0,width:750,height:1443,backgroundColor:"",borderColor:"#FFFFFF",borderWidth:0,borderRadius:0,color:"#FFFFFF",textAlign:"center",fontSize:1,lineHeight:1400}});t.onTap((function(o){o.errMsg.indexOf("auth deny")>-1||o.errMsg.indexOf("auth denied")>-1?e._guideActive():e._setUserData(o),t.hide()})),t.show()}},t._guideActive=function(){if(o.platform==o.Platform.WECHAT_GAME){var e=this;wx.showModal({title:"警告",content:"拒绝授权将无法正常游戏",cancelText:"取消",showCancel:!0,confirmText:"设置",success:function(t){t.confirm&&wx.openSetting({success:function(t){!0===t.authSetting["scope.userInfo"]&&e.getUserInfo()}.bind(this)})}.bind(this)})}},t.getUserInfo=function(){if(o.platform==o.Platform.WECHAT_GAME){console.log("getUserInfo1");var e=this;wx.getUserProfile({fail:function(t){console.log("getUserInfo3"),console.log(t),(t.errMsg.indexOf("auth deny")>-1||t.errMsg.indexOf("auth denied")>-1)&&e._guideActive()}.bind(this),success:function(t){console.log("getUserInfo2"),e._setUserData(t)}.bind(this)})}},t._shareFunc=function(){if(o.platform==o.Platform.WECHAT_GAME){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});var e=canvas.toTempFilePathSync({x:10,y:10,width:700,height:1100,destWidth:400,destHeight:300});wx.onShareAppMessage((function(){return{title:"小姐姐在糖果世界挑战闯关，快来救救小姐姐",imageUrl:e}})),wx.onShareTimeline((function(){return{title:"小姐姐在糖果世界挑战，快来救救小姐姐",imageUrl:e}}))}},t._evtShareToOthers=function(e,t){if(void 0===t&&(t=!0),o.platform==o.Platform.WECHAT_GAME){var n=canvas.toTempFilePathSync({x:10,y:10,width:700,height:1100,destWidth:400,destHeight:300});wx.shareAppMessage({title:"小姐姐在糖果世界挑战已经闯过"+e+"关，快来挑战小姐姐吧",imageUrl:n}),t&&this.addReward()}else s.view.showMsgTips("Purchase successful")},t.ShareToOthers=function(e){if(o.platform==o.Platform.WECHAT_GAME){var t=canvas.toTempFilePathSync({x:10,y:10,width:700,height:1100,destWidth:400,destHeight:300});wx.shareAppMessage({title:"我以闯过"+e+"关，邀您来挑战",imageUrl:t})}this.addReward()},t.addReward=function(){setTimeout((function(){r.setGold(s.gameLogic.rewardGold),r.setBomb(n.hor,1),r.setBomb(n.ver,1),r.setBomb(n.bomb,1),r.setBomb(n.allSame,1),s.event.emit(i.Game.ToolCountRefresh),s.event.emit(i.Game.UpdataGold),s.event.emit(i.Game.ContinueGame)}),2e3)},t._setUserData=function(e){if(o.platform==o.Platform.WECHAT_GAME){console.log("------------------res------------"),console.log(e);var t=e.userInfo;if(this._shareFunc(),t&&t.nickName){var n={name:t.nickName,icon:t.avatarUrl};console.log(n),s.user.rankData.name=t.nickName}a.init()}},t.setWxCloudRankData=function(e){wx.setUserCloudStorage({KVDataList:[{key:"level",value:e}],success:function(){console.log("setwxcloudrankdata success")}})},e}());e("WxMgr",new c);t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});